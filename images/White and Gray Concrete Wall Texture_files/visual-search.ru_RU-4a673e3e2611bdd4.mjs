(self.modernJsonp=self.modernJsonp||[]).push([[14865,43390],{17314:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var i,n,l=a(813653),r=a(861470),s=0,o=0;let d=function(e,t,a){var d=t&&a||0,u=t||Array(16),c=(e=e||{}).node||i,p=void 0!==e.clockseq?e.clockseq:n;if(null==c||null==p){var g=e.random||(e.rng||l.Z)();null==c&&(c=i=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==p&&(p=n=(g[6]<<8|g[7])&16383)}var m=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:o+1,y=m-s+(h-o)/1e4;if(y<0&&void 0===e.clockseq&&(p=p+1&16383),(y<0||m>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,o=h,n=p;var _=((0xfffffff&(m+=122192928e5))*1e4+h)%0x100000000;u[d++]=_>>>24&255,u[d++]=_>>>16&255,u[d++]=_>>>8&255,u[d++]=255&_;var f=m/0x100000000*1e4&0xfffffff;u[d++]=f>>>8&255,u[d++]=255&f,u[d++]=f>>>24&15|16,u[d++]=f>>>16&255,u[d++]=p>>>8|128,u[d++]=255&p;for(var x=0;x<6;++x)u[d+x]=c[x];return t||(0,r.Z)(u)}},307359:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="610a35d46510240eb58e262c1909310c";let l=n},886219:(e,t,a)=>{"use strict";var i,n,l;a.r(t),a.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[l={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},l,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};r.hash="81db65fd15680cc0281b801ed4a8cb94";let s=r},625713:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CutoutObject_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};i.hash="f1b62436c05814e4188c8863a11dce6b";let n=i},482086:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightSpotlightDots_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="3a8409077905af94eb39568e4a5a57fc";let n=i},287221:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={fragment:{argumentDefinitions:l=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:r=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"7cd65bb908c0282c47af2a2dc30819668fdb6b1e8614019a84c0ea7e8c4cad07",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}};i.hash="a0953a7ea15ce447a2452bbeca8586ba";let n=i;var l,r,s,o=i.default||i;if("query"===o.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(o);else{let e=[o.params.name,o.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=o}},844593:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPage_pin"}],type:"Pin",abstractKey:null};i.hash="df8cf9d2521b1a82156cc4ecd7b04884";let n=i},41723:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="a4c8c4488bd813d69ca9e96072e3d2d7";let n=i},330681:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecipeMetadata_recipe",selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:i,storageKey:null}],storageKey:null}],type:"RecipeMetadata",abstractKey:null};n.hash="12f77507a9fdec344b44b7e659fa5ac1";let l=n},867540:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchCropper_pin"}],type:"Pin",abstractKey:null};i.hash="cf91489ba983999faaad373f85110c29";let n=i},211724:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i=(l=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],r=[{kind:"Variable",name:"pin",variableName:"pinId"}],s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o=[{kind:"Literal",name:"spec",value:"564x"}],p=[d={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],g=[{kind:"Literal",name:"spec",value:"736x"}],m=[{kind:"Literal",name:"spec",value:"474x"}],_={alias:"image236x",args:h=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:y=[s],storageKey:'additionalImagesPerSpec(spec:"236x")'},f={alias:"image474x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:y,storageKey:'additionalImagesPerSpec(spec:"474x")'},x={alias:"image564x",args:o,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:y,storageKey:'additionalImagesPerSpec(spec:"564x")'},S={alias:"image736x",args:g,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:y,storageKey:'additionalImagesPerSpec(spec:"736x")'},{fragment:{argumentDefinitions:l,kind:"Fragment",metadata:null,name:"RelatedProductsPageQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[s,{args:null,kind:"FragmentSpread",name:"RelatedProductsPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"RelatedProductsPageQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:"imageSpec_564x",args:o,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:g,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[d,u,c,s],storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:m,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:h,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:y,storageKey:null}],storageKey:null},_,f,x,S],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},_,f,x,S],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:y,storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},v],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},v],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[s,v],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},v],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"7a9e336abd7d1dae6b4a0011cd1d8cb6cb8f313e454f22bc130c58b11c738aa6",metadata:{},name:"RelatedProductsPageQuery",operationKind:"query",text:null}});i.hash="0f7b98a1f02dbf8528df0452aa26efd4";let n=i;var l,r,s,o,d,u,c,p,g,m,h,y,_,f,x,S,v,w=i.default||i;if("query"===w.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(w);else{let e=[w.params.name,w.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=w}},212198:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsPage_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchPageWithPinData_pin"}],type:"Pin",abstractKey:null};i.hash="91d05676e413b7b47653c2f8fa609093";let n=i},686319:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchMasonryGrid_pin"}],type:"Pin",abstractKey:null};i.hash="20c2c7f4ff982fb93a9608faa14f3ed2";let n=i},314494:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StelaCutout_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};i.hash="0b66eea622c037ef845cce3aa4cd2d46";let n=i},575174:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StelaCutouts_pin",selections:[{args:null,kind:"FragmentSpread",name:"StelaCutout_pin"},{args:null,kind:"FragmentSpread",name:"CutoutObject_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};i.hash="e0fa9e17d388effe31386439f7079c76";let n=i},551973:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthCropperContainer_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"}],type:"Pin",abstractKey:null};i.hash="939d46d8644385a7918ed8179ce77a4c";let n=i},586903:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i=(l=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],r=[{kind:"Variable",name:"pin",variableName:"pinId"}],s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},u=[{kind:"Literal",name:"spec",value:"564x"}],m=[{kind:"Literal",name:"spec",value:"736x"}],h=[g={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],y=[{kind:"Literal",name:"spec",value:"474x"}],_=[{kind:"Literal",name:"spec",value:"236x"}],f={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},S=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],w={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:v=[s],storageKey:null},b={alias:"image236x",args:_,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"236x")'},k={alias:"image474x",args:y,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"474x")'},P={alias:"image564x",args:u,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"564x")'},T={alias:"image736x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"736x")'},F={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},R=[p],{fragment:{argumentDefinitions:l,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},o,{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},d],storageKey:null},{alias:"imageSpec_564x",args:u,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[c,p,g],storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[c,p,g,s],storageKey:'images(spec:"orig")'},{alias:"imageSpec_736x",args:m,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:h,storageKey:'images(spec:"736x")'},{alias:"imageSpec_474x",args:y,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:h,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:_,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:h,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},o,d,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[f,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[x,{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:S,storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:S,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[s,f,w,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:v,storageKey:null}],storageKey:null},b,k,P,T],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[f,w,{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},b,k,P,T],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[F,I,E],storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},E,s],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},j,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},x,{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"170x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[j,f,{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},p,E],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[j,I,{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},F,E],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:v,storageKey:null},E],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},E],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},E],storageKey:null},E],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"4f98fda893ba1980532b9905b28f196e419e75b106a6485f5f63653917b888e1",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});i.hash="c1c702b23a1454b46f8e2fa9d8036257";let n=i;var l,r,s,o,d,u,c,p,g,m,h,y,_,f,x,S,v,w,b,k,P,T,F,I,E,j,R,A=i.default||i;if("query"===A.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(A);else{let e=[A.params.name,A.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=A}},870688:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopFlashlightPage_pin"}],type:"Pin",abstractKey:null};i.hash="01839fc3bcd9cdaf206873364167d157";let n=i},718931:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardBody_pin"},{args:null,kind:"FragmentSpread",name:"UnauthCropperContainer_pin"}],type:"Pin",abstractKey:null};n.hash="93612431e09eadc717c32d98e8d91e06";let l=n},259538:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useGetViewLog_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};i.hash="78ca00dffe2e5009ee41df9c253d916a";let n=i},348042:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchCropper_pin",selections:[{args:null,kind:"FragmentSpread",name:"useSamSegmentation_pin"},{args:null,kind:"FragmentSpread",name:"StelaCutouts_pin"}],type:"Pin",abstractKey:null};i.hash="dada23a14d0fcddf95de8176ed25f41f";let n=i},503390:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchPageWithPinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};i.hash="998c32da4dfbd09ab564137cf5290360";let n=i},752824:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetNormalizedPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};n.hash="3d7a6d04f923d00acfb2887f852aea16";let l=n},917013:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetViewLog_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="b524bc1e068664edfb117ac744cb044f";let n=i},204320:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:i=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};n.hash="01a93671cde480baa2cfd8b781589acd";let l=n},615027:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImageUrls_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};n.hash="b7ea441f2c20a68b323088ebe3847835";let l=n},46320:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useSamSegmentation_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="50c726067ab8af873ed4afded90b7bed";let n=i},283737:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var i=a(667294),n=a(883119),l=a(660098),r=a(233846),s=a(93002),o=a(785893);function d({collapsed:e,displayViewState:t,forceTappableHeader:a,headerHeight:d,headerPaddingRight:u,headerPreview:c,heading:p,onClick:g,showArrow:m,surface:h}){let y=(0,r.ZP)(),{closeupWithinMasonryEnabled:_,peekCloseupEnabled:f,viewportSize:x}=(0,s.x4)(),S=(0,l.rt)({peekCloseupEnabled:f,viewportSize:x,surface:h});return(0,o.jsx)(i.Fragment,{children:a||null!==t?(0,o.jsx)(n.iP,{disabled:!m,onTap:g,children:(0,o.jsx)(n.xu,{marginBottom:!e&&f?4:void 0,children:(0,o.jsxs)(n.kC,{alignItems:"center",dataTestId:"collapsible-header",direction:"row",flex:"grow",height:d,justifyContent:"between",children:[(0,o.jsx)(n.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:"300",children:p}),(0,o.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingRight:u}},direction:"row",display:"flex",children:[e&&c,(m||_)&&(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transform:e?"rotate(0deg)":"rotate(180deg)",transition:"all 600ms cubic-bezier(.25,1,.5,1)"}},opacity:+!!m,children:(0,o.jsx)(n.hU,{accessibilityLabel:y.bt("Значок «Развернуть»", "Expand icon", "accordion.actionButton", undefined, true),dataTestId:"collapse-button",disabled:!m,icon:"arrow-down",size:"sm"})})]})]})})}):(()=>{let e=(0,o.jsx)(n.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:S?"300":"400",children:p});return S?(0,o.jsx)(n.xu,{marginBottom:4,children:e}):e})()})}},624404:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(667294),n=a(883119),l=a(655163),r=a(785893);let s=({_enableViewTransitions:e,borderStyle:t,children:a,imageFit:s,suppressViewTransitionTags:o=!1,type:d})=>{let{inViewTransitionsExp:u}=(0,l.Z)({_enableViewTransitions:e}),[c,p]=(0,i.useState)(!1),g=(e||u)&&!!d&&!o&&(e||c),m="image"===d&&["contain","cover"].includes(s||"")?"100%":"inherit";return(0,r.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{...t,...g?{viewTransitionName:d,contain:"layout"}:{}}},height:m,onMouseLeave:()=>p(!1),onMouseOver:()=>p(!0),width:m,children:a})}},655163:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(667294),n=a(973935),l=a(967312);let r=function({_enableViewTransitions:e=!1}){let{checkExperiment:t}=(0,l.F)(),a=t("dweb_view_transitions").anyEnabled;return{executeWithViewTransition:(0,i.useCallback)(t=>{document.startViewTransition&&(e||a)?document.startViewTransition(()=>{(0,n.flushSync)(t)}):t()},[e,a]),inViewTransitionsExp:a}}},484465:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(967312),n=a(174646),l=a(538645);function r(){let{isAuthenticated:e}=(0,n.B)(),t=(0,l.ml)(),{checkExperiment:a}=(0,i.F)();return{mWebCloseupRedesignEnabled:e&&t&&a("mweb_closeup_redesign").anyEnabled,mWebCloseupRedesignExpGroup:a("mweb_closeup_redesign").group}}},466068:(e,t,a)=>{"use strict";a.d(t,{n:()=>i});let i=20},593745:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(857147);function n(e,t,a){let n=(0,i.mB)(e.search),l=parseFloat(n.x??""),r=parseFloat(n.y??""),s=parseFloat(n.w??""),o=parseFloat(n.h??"");if(function(...e){return e.every(e=>e>=0&&e<=1)}(l,r,s,o)&&t&&a)return{x:Math.floor(l*t),y:Math.floor(r*a),w:Math.floor(s*t),h:Math.floor(o*a)};{let e=parseInt(n.x??"",10),t=parseInt(n.y??"",10),a=parseInt(n.w??"",10),i=parseInt(n.h??"",10);return!function(...e){return e.every(Number.isInteger)}(e,t,a,i)?null:{x:e,y:t,w:a,h:i}}}},760291:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var i=a(883119),n=a(785893);function l({top:e,left:t,bottom:a,right:l,size:r,transition:s}){return(0,n.jsx)(i.xu,{color:"default",dangerouslySetInlineStyle:{__style:{top:e,left:t,right:l,bottom:a,transition:s}},height:r,position:"absolute",rounding:"circle",width:r})}var r=a(476943);function s({anchorSize:e,corner:t,maxTouchSize:a}){let l=r.FA[t],s=`${r.tT} ${t}`,o=Math.min(r.oq*r.MS,a),d=(o-e)/2,u=t.includes("n")?-d:void 0,c=t.includes("w")?-d:void 0,p=t.includes("s")?-d:void 0,g=t.includes("e")?-d:void 0;return(0,n.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{top:u,left:c,bottom:p,right:g,cursor:l,pointerEvents:"auto"}},"data-test-id":`cropper-corner-${t}`,height:o,id:s,position:"absolute",width:o})}var o=a(546886);let d=({x:e,y:t,size:a})=>`linear-gradient(black, black) ${e}px ${t}px / ${a}px ${a}px no-repeat`;function u({x:e,y:t,w:a,h:u,size:c,transition:p,visibility:g}){let m=c/2,h=r.oq/2-r.xh-r.ps-r.eq+(0,o.Z)({w:a,h:u,minSize:r.eq,maxSize:0}),y=a+2*m-2*h,_=u+2*m-2*h,f=r.oq-c,x=Math.max(r.XN-f,r.YY),S=r.xh/2,v=c-S,w=v-S,b=(Math.min(y,_)-r.dH)/2,k=d({x:0,y:0,size:v}),P=d({x:y-v,y:0,size:v}),T=d({x:0,y:_-v,size:v}),F=d({x:y-v,y:_-v,size:v});return(0,n.jsxs)(i.xu,{dangerouslySetInlineStyle:{__style:{top:t-m+h,left:e-m+h,pointerEvents:"none",visibility:g,transition:p}},height:_,position:"absolute",width:y,children:[(0,n.jsx)(i.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{border:`${r.xh}px solid white`,borderRadius:`${x}px`,mask:`${k}, ${P}, ${T}, ${F}`,pointerEvents:"none",transition:p}},height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),(0,n.jsx)(l,{left:0,size:r.xh,top:w,transition:p}),(0,n.jsx)(l,{left:w,size:r.xh,top:0,transition:p}),(0,n.jsx)(s,{anchorSize:c,corner:"nw",maxTouchSize:b}),(0,n.jsx)(l,{right:0,size:r.xh,top:w,transition:p}),(0,n.jsx)(l,{right:w,size:r.xh,top:0,transition:p}),(0,n.jsx)(s,{anchorSize:c,corner:"ne",maxTouchSize:b}),(0,n.jsx)(l,{bottom:0,left:w,size:r.xh,transition:p}),(0,n.jsx)(l,{bottom:w,left:0,size:r.xh,transition:p}),(0,n.jsx)(s,{anchorSize:c,corner:"sw",maxTouchSize:b}),(0,n.jsx)(l,{bottom:0,right:w,size:r.xh,transition:p}),(0,n.jsx)(l,{bottom:w,right:0,size:r.xh,transition:p}),(0,n.jsx)(s,{anchorSize:c,corner:"se",maxTouchSize:b})]})}},72185:(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var i=a(667294),n=a(883119),l=a(219308),r=a(476943),s=a(760291),o=a(569534),d=a(50904),u=a(764729),c=a(546886),p=a(316886),g=a(984804),m=a(836656),h=a(785893);function y({children:e,cropArea:{x:t,y:a,w:y,h:_},hoveredCutoutIndex:f,imageContainerX:x,imageContainerY:S,imageSize:{width:v=1,height:w=1},objectDetection:b,onChange:k,setHoveredCutoutIndex:P,setSelectedCutoutIndex:T,viewParameter:F,viewType:I}){let E=(0,l.Z)(),j=(0,i.useRef)(null),R=(0,i.useMemo)(()=>({x:0,y:0,w:v,h:w}),[w,v]),A=(0,i.useMemo)(()=>(0,d.Z)({cropArea:{x:t,y:a,w:y,h:_},imageSize:{width:v,height:w}}),[_,y,t,a,w,v]),[C,L]=(0,i.useState)(()=>(0,p.ZP)({x:t,y:a,w:y,h:_},R)?R:A),[Z,M]=(0,i.useState)("none"),[D,K]=(0,i.useState)("none"),[O,N]=(0,i.useState)(!1),[z,$]=(0,i.useState)(!1),[H,B]=(0,i.useState)(!1),[U,G]=(0,i.useState)(0),[W,V]=(0,i.useState)(0),{x:Y,y:q,w:X,h:Q}=C,J=(0,i.useMemo)(()=>(0,p.ZP)(C,R),[C,R]),ee=(0,i.useMemo)(()=>(0,c.Z)({w:X,h:Q,minSize:r.Zn,maxSize:r.oq}),[Q,X]),et=r.SP,ea=r.SP,ei=v-r.SP,en=w-r.SP,el="number"==typeof f,er=z?"none":"0.3s cubic-bezier(0.42, 0, 0.58, 1.2)",es=(0,o.Z)({cropperSelection:Z,anchorSelection:D,hasMouseMoved:z}),eo=e=>{e.preventDefault(),e.stopPropagation();let{clientX:t,clientY:a,target:i}=e,n=t-x,l=a-S;$(!1),B(!1),G(n),V(l);let{id:s}=i,[o,d="none"]=s.split(" "),u=`${o}`===r.tT,c=s===r.at,p=s===r.eX,h=s===g.P,y=s===m.I;u?(M("anchor"),K(d)):p?M("cropbox"):c?M("background"):(!(Y<n&&n<Y+X&&q<l&&l<q+Q)||J?M("background"):M("cropbox"),N(h||y))},ed=e=>{if("none"===Z)return;let{clientX:t,clientY:a}=e,i=t-x,n=a-S;if(!(Math.abs(i-U)<r.yG&&Math.abs(n-W)<r.yG&&!z&&["cropbox","background"].includes(Z)))switch($(!0),N(!1),T?.(-1),P?.(null),Z){case"anchor":{let e=["nw","sw"].includes(D),t=["nw","ne"].includes(D),a=Math.max(Math.min(i,ei),et),l=Math.max(Math.min(n,en),ea),s=e?Math.min(a,Y+X-r.yz):Y,o=t?Math.min(l,q+Q-r.yz):q;L({x:s,y:o,w:e?Math.max(Y+X-a,r.yz):Math.max(a-Y,r.yz),h:t?Math.max(q+Q-l,r.yz):Math.max(l-q,r.yz)});break}case"cropbox":{let e=Math.max(Math.min(Y+(i-U),v-X-et),et),t=Math.max(Math.min(q+(n-W),w-Q-ea),ea);G(i),V(n),L({x:e,y:t,w:X,h:Q});break}case"background":{let e=Math.max(Math.min(i,v),0),t=Math.max(Math.min(n,w),0),a=e-U,l=t-W;L({x:Math.min(U,e),y:Math.min(W,t),w:Math.abs(a),h:Math.abs(l)})}}},eu=()=>{if(M("none"),K("none"),N(!1),$(!1),"none"===Z)return;if(O&&("cutouts"===b&&el||"dots"===b))return void B(!0);let e=(e,t)=>{k({cropArea:e,cropSource:t}),L(e)};if(z){let t=Math.max(Math.min(Y,v-r.yz-et),et),a=Math.max(Math.min(q,w-r.yz-ea),ea),i=Q<r.yz?r.yz:a+Q>w-ea?w-a-ea:Q,n=X<r.yz?r.yz:t+X>v-et?v-t-et:X;e({x:t,y:a,w:n,h:i},6),"cropbox"===Z?E({event_type:7603,view_type:I,view_parameter:F}):"anchor"===Z?E({event_type:7604,view_type:I,view_parameter:F}):"background"===Z&&E({event_type:16584,view_type:I,view_parameter:F})}else J||"background"===Z?(e((0,u.Z)({mouseX:U,mouseY:W,cropSize:r.Rk,minBound:r.SP,imageWidth:v,imageHeight:w}),6),E({event_type:16585,view_type:I,view_parameter:F})):"cropbox"===Z&&(e(R,5),E({event_type:16586,view_type:I,view_parameter:F}))};return(0,i.useEffect)(()=>{H&&L(A)},[A,H]),(0,i.useEffect)(()=>{let e=j.current;return e?.addEventListener("mousedown",eo),window.addEventListener("mousemove",ed),window.addEventListener("mouseup",eu),()=>{e?.removeEventListener("mousedown",eo),window.removeEventListener("mousemove",ed),window.removeEventListener("mouseup",eu)}}),(0,h.jsxs)(n.xu,{ref:j,bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:es}},"data-test-id":"visual-search-cropper",left:!0,position:"absolute",right:!0,top:!0,children:[(0,h.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{border:`${r.ps}px solid rgba(255, 255, 255, 0.20)`,borderRadius:`${r.CX-ee}px`,boxShadow:"0 0 0 99999px rgba(0, 0, 0, 0.35)",left:Y,top:q,transition:er}},height:Q,position:"absolute",width:X}),(0,h.jsx)(n.xu,{bottom:!0,id:r.at,left:!0,position:"absolute",right:!0,top:!0}),(0,h.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{visibility:J?"hidden":"visible",left:Y,top:q}},"data-test-id":"cropper-section",height:Q,id:r.eX,position:"absolute",width:X}),e,(0,h.jsx)(s.Z,{h:Q,size:r.oq-ee,transition:er,visibility:J||"background"===Z&&z?"hidden":"visible",w:X,x:Y,y:q})]})}},476943:(e,t,a)=>{"use strict";a.d(t,{CX:()=>v,FA:()=>_,MS:()=>d,OI:()=>r,RD:()=>w,Rk:()=>k,SP:()=>n,Wm:()=>i,XN:()=>g,YY:()=>m,Zn:()=>p,at:()=>f,dH:()=>y,eX:()=>x,eq:()=>h,iC:()=>s,oq:()=>c,ps:()=>S,tT:()=>o,xZ:()=>l,xh:()=>u,yG:()=>P,yz:()=>b});let i=446,n=16,l=48,r={x:0,y:0,w:0,h:0},s=`
  .preview-crop-area-enter {
    opacity: 0;
  }

  .preview-crop-area-enter-active {
    opacity: 1;
    transition: opacity 300ms;
  }

  .preview-crop-area-exit {
    opacity: 1;
  }

  .preview-crop-area-exit-active {
    opacity: 0;
    transition: opacity 300ms;
  }

  .preview-crop-area-exit-done {
    opacity: 0;
  }
`,o="anchor",d=2,u=4,c=20,p=14,g=16,m=10,h=3,y=8,_={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},f="cropper-background",x="cropper-cropbox",S=1,v=10,w=32,b=20,k=120,P=2},569534:(e,t,a)=>{"use strict";function i({cropperSelection:e,anchorSelection:t,hasMouseMoved:a}){if("background"===e&&a)return"crosshair";if("cropbox"===e&&a)return"move";if("anchor"===e){if("nw"===t||"se"===t)return"nwse-resize";else if("ne"===t||"sw"===t)return"nesw-resize"}return"auto"}a.d(t,{Z:()=>i})},50904:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(476943);function n({cropArea:e,imageSize:t}){let{x:a,y:n,w:l,h:r}=e,{height:s,width:o}=t;if(!s||!o)return e;let d=a,u=n,c=l,p=r;return d<i.SP&&(d=i.SP,c-=i.SP-a),d+c>o-i.SP&&(c-=d+c-o+i.SP),u<i.SP&&(u=i.SP,p-=i.SP-n),u+p>s-i.SP&&(p-=u+p-s+i.SP),{x:d,y:u,w:c,h:p}}},764729:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});let i=({coordinate:e,cropSize:t,maxBound:a,minBound:i})=>e<=i?i:a<=e+t?a-t:e;function n({cropSize:e,imageHeight:t,imageWidth:a,minBound:n,mouseX:l,mouseY:r}){let s=l-e/2,o=r-e/2,d=a-n,u=t-n;return{x:i({coordinate:s,minBound:n,maxBound:d,cropSize:e}),y:i({coordinate:o,minBound:n,maxBound:u,cropSize:e}),w:e,h:e}}},546886:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(476943);function n({w:e,h:t,minSize:a,maxSize:n}){let l=Math.min(e,t);if(l<=i.yz)return n-a;if(l<i.RD){let e=(n-a)/(i.RD-i.yz);return e*(i.RD-l)}return 0}},984804:(e,t,a)=>{"use strict";a.d(t,{P:()=>s,Z:()=>u});var i=a(667294),n=a(883119),l=a(233846),r=a(785893);let s="flashlight-dot-style",o=16,d=32,u=(0,i.forwardRef)(({icon:e,onClick:t,onMouseDown:a,onMouseEnter:u,onMouseLeave:c,onMouseUp:p,selected:g,style:m,text:h,x:y,y:_,zIndex:f,backdropDiameter:x=d,dotDiameter:S=o},v)=>{let[w,b]=(0,i.useState)(!1),k=(0,l.ZP)(),P=w?x+4:x;return(0,r.jsx)(n.xu,{ref:v,dangerouslySetInlineStyle:{__style:{top:_-P/2,left:y-P/2,outline:"none"}},position:"absolute",zIndex:new n.Ry(f||0),children:(0,r.jsx)(n.iP,{accessibilityLabel:k.bt("Поиск позиции", "Search this item", "flashlight.dot.a11ylabel", undefined, true),dataTestId:"flashlight-dot",onMouseDown:a,onMouseEnter:({event:e})=>{b(!0),u?.({event:e})},onMouseLeave:({event:e})=>{b(!1),c?.({event:e})},onMouseUp:p,onTap:t,tabIndex:0,children:(0,r.jsxs)(n.xu,{alignItems:"center",borderStyle:"none",color:"default",dangerouslySetInlineStyle:{__style:{boxShadow:g?"0 0 0 3px #e60023":"none",borderRadius:S,top:(P-S)/2,left:(P-S)/2,...m}},"data-test-id":s,display:"flex",height:S,id:s,justifyContent:"center",padding:0,position:"absolute",width:S,children:[!!h&&(0,r.jsx)(n.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:h}),e&&(0,r.jsx)(n.JO,{accessibilityLabel:k.bt("Якорь тегов", "Tag anchor", "accessibility label for an anchor for an object in a pin", undefined, true),color:"error",icon:e,inline:!0,size:S/2})]})})})})},187963:(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var i,n=a(667294);a(167912);var l=a(219308),r=a(984804),s=a(755090),o=a(785893);function d({showAnimation:e,auxData:t,index:a,isStela:i,onClick:n,onHover:d,onUnhover:u,spotlightCenter:c,viewParameter:p,viewType:g}){let m=(0,l.Z)(),h=i?1221:1260;(0,s.Z)(()=>{m({event_type:120,element:h,aux_data:t,view_parameter:p,view_type:g})});let y=parseFloat((.1*(a+1)).toFixed(2)),_={animation:e?`spotlightDotPop 0.6s ease-out ${y}s both`:"none"};return(0,o.jsx)(r.Z,{onClick:()=>{m({aux_data:t,element:h,event_type:101,view_parameter:p,view_type:g}),n(a)},onMouseEnter:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),d?.(a)},onMouseLeave:({event:e})=>{e&&(e.stopPropagation(),e.preventDefault()),u?.()},style:_,x:c.x,y:c.y})}var u=a(78039),c=a(970601),p=a(372312),g=a(850610);let m=`
@keyframes spotlightDotPop {
  0% {
    transform: scale(0);
  }

  100% {
    transform: scale(1);
  }
}`,h=void 0!==i?i:i=a(482086),y=({showAnimation:e,pinKey:t,imageSignature:a,imageSize:i,currentSpotlightIdx:l,handleSpotlightClick:r,handleSpotlightHover:s,handleSpotlightUnhover:y,viewParameter:_,viewType:f,visualObjects:x})=>{let S=(0,u.Z)(h,t),v=(0,p.Z)(S),w=S?(S.visualObjects??[]).filter(e=>e.isStela):x??[];return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(c.Z,{unsafeCSS:m}),w.map((t,n)=>{if(n===l)return null;let{x:u,y:c,w:p,h:m}=t,h=(0,g.Z)({cropArea:{x:u,y:c,w:p,h:m},scaledWidth:i.width??0,scaledHeight:i.height??0}),x={x:h.x+h.w/2,y:h.y+h.h/2},w={...v({override:{entrypoint:"flashlight"}}),pin_id:S?.entityId??"",image_signature:a,visual_objects:JSON.stringify([{x:t.x,y:t.y,w:t.w,h:t.h}])},b=`${x.x}${x.y}`;return(0,o.jsx)(d,{auxData:w,index:n,isStela:!!t?.isStela,onClick:r,onHover:s,onUnhover:y,showAnimation:e,spotlightCenter:x,viewParameter:_,viewType:f},b)})]})}},740607:(e,t,a)=>{"use strict";a.d(t,{Pw:()=>i,SB:()=>n,ZP:()=>r,x9:()=>l});let i=80,n=55,l=e=>"phone"===e?n:i;function r(e,t){return t?0:l(e)}},509228:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r,k:()=>i.kH});var i=a(906667),n=a(174646),l=a(785893);let r=({dateFormatType:e,useUTC:t=!0,value:a})=>(0,l.jsx)(n.LC,{children:n=>(0,i.ZP)(n.locale,a,e,t)})},906667:(e,t,a)=>{"use strict";a.d(t,{A5:()=>l,ZP:()=>r,kH:()=>i});let i={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:"year_short_month_day_time_timezone",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},n=function(e){switch(e){case i.YEAR:return{year:"numeric"};case i.LONG:return{year:"numeric",month:"long",day:"numeric"};case i.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case i.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case i.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case i.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case i.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case i.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.MONTH_DAY:return{month:"long",day:"numeric"};case i.SHORT_MONTH:return{month:"short"};case i.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case i.DAY:return{day:"numeric"};case i.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case i.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case i.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case i.YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:return{month:"short",year:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.TIME:return{hour:"numeric",minute:"2-digit"};case i.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function l(){return -1!==Intl.DateTimeFormat.toString().indexOf("[native code]")}function r(e,t,a,i=!0,s){let o=n(a);return i?o.timeZone="UTC":s&&(o.timeZone=s),l()||(o.calendar="gregory"),new Intl.DateTimeFormat(e,o).format(t)}},722910:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(785893);let n=(0,i.jsx)("svg",{fill:"none",height:"5",viewBox:"0 0 37 5",width:"37",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("rect",{fill:"#E9E9E9",height:"5",rx:"2.5",width:"37"})})},498905:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var i=a(667294),n=a(883119),l=a(624404),r=a(538645);a(276162);var s=a(118244),o=a(785893);function d(e){(0,i.use)(s.ZP),(0,r.ZP)();let{alt:t,borderStyle:a,color:d,children:u,crossOrigin:c,decoding:p,elementTiming:g,fetchPriority:m,fit:h,loading:y,naturalHeight:_,naturalWidth:f,onError:x,onLoad:S,role:v,sizes:w,src:b,srcSet:k,suppressViewTransitionTags:P,_enableViewTransitions:T,_fixCompletedOnLoad:F}=e;return(0,o.jsx)(l.Z,{_enableViewTransitions:T,borderStyle:a,imageFit:h,suppressViewTransitionTags:P,type:"image",children:(0,o.jsx)(n.Ee,{_fixCompletedOnLoad:F,alt:t,color:d,crossOrigin:c,decoding:p,elementTiming:g,fetchPriority:m,fit:h,loading:y,naturalHeight:_,naturalWidth:f,onError:x,onLoad:S,role:v,sizes:w,src:b,srcSet:k,children:u})})}},380222:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(167912),n=a(244311),l=a(989043),r=a(667294),s=a(316886);let o=function({strategy:e,query:t,variables:a,options:o,useGetLegacyResource:d,useGetLegacyPaginatedResource:u,useGetLegacyData:c}){let p;if("GRAPHQL"===e){let e=(0,n.getRequest)(t);return(0,i.useLazyLoadQuery)(e,a,o)}if(null!=d&&null!=u&&null!=c)throw Error(`Only pass one of those calls from the list: 
[useGetLegacyResource, useGetLegacyPaginatedResource, useGetLegacyData]
to useLazyLoadQueryOrLegacy`);let{actualVariables:g,refetch:m}=function(e,t){let a=(0,r.useRef)(e),i=(0,r.useRef)(null),[,n]=(0,r.useState)({}),l=(0,s.ZP)(e,a.current)?null==i.current?a.current:i.current:(a.current=e,i.current=null,a.current),o=(0,r.useCallback)(e=>{let a={...l,...e||{}};(0,s.ZP)(l,a)&&t(),i.current=a,n({})},[l,t]);return{actualVariables:l,refetch:o}}(a,()=>{p()});if(null!=c){let e=c(g);if(!e)return null;let{selections:a}=(0,n.getRequest)(t).fragment;return p=()=>{},(0,l.Z)(a,{kind:"LegacyData",singularLegacyData:e,refetchInfo:{refetch:m},paginationInfo:null})}if(null!=d){let e=d(g),{data:a}=e;if(p=e.refresh,null==a)return null;let{selections:i}=(0,n.getRequest)(t).fragment;return(0,l.Z)(i,{kind:"LegacyData",singularLegacyData:a,refetchInfo:{refetch:m},paginationInfo:null})}if(null!=u){let e=u(g),{data:a,isFetching:i,isAtEnd:r,fetchMore:s}=e;if(p=e.refresh,null==a)return null;let{selections:o}=(0,n.getRequest)(t).fragment;return(0,l.Z)(o,{kind:"PaginationLegacyData",paginationLegacyData:a,refetchInfo:{refetch:m},paginationInfo:{isLoadingNext:i,hasNext:!r,loadNext:s}},null)}throw Error("useGetLegacyData or useGetLegacyResource must be provided")}},131714:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(667294);function n(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends i.Component{constructor(...e){super(...e),n(this,"ref",(0,i.createRef)()),n(this,"observer",null),n(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){this.ref&&this.ref.current&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.ref.current))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.ref.current),delete this.observer)}render(){return this.props.children(this.ref)}}let r=l},129333:(e,t,a)=>{"use strict";a.d(t,{Rq:()=>i,Vf:()=>n,jd:()=>l,oy:()=>r});let i=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,n=28,l=e=>window.innerHeight>=748&&i(e),r=()=>"undefined"!=typeof window&&!!window.navigator&&(/iPad/.test(navigator.platform)||"MacIntel"===navigator.platform&&"ontouchend"in document&&Math.min(window.screen.width,window.screen.height)>=700)},864339:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var i=a(883119),n=a(56063),l=a(129333),r=a(237238),s=a(174646),o=a(785893);let d=({children:e,dataLayoutShiftBoundaryId:t,hasFixedHeader:a=!1,hasGutter:d=!0,height:u,showKeychainError:c=!1,useViewport:p=!1})=>{let g=(0,s.B)(),m=(0,l.jd)(g.userAgent.platform)?l.Vf:0;return(0,o.jsx)(i.xu,{"data-layout-shift-boundary-id":t||"PageContainer",height:p?`calc(100vh - ${m}px)`:u,paddingX:d?n.D6:void 0,paddingY:a||c?void 0:3,children:(0,o.jsx)(r.C,{value:!!d,children:e})})}},237238:(e,t,a)=>{"use strict";a.d(t,{C:()=>l,V:()=>r});var i=a(667294);let n=(0,i.createContext)(!1),l=n,r=()=>(0,i.useContext)(n)},563651:(e,t,a)=>{"use strict";function i(e,t,a){return!!(e&&e.trim().length>0&&t&&!a)}a.d(t,{r:()=>i})},139714:(e,t,a)=>{"use strict";function i({embedSrc:e,embedType:t,imagesUrls:a,preferredResolution:i,excludeOriginals:n}){if(!e&&!t&&!a)return"";if("gif"===t)return e||"";if(!a)return"";if(i){let e="474x"===i&&a["474x"]||"236x"===i&&a["236x"]||a["736x"];if(e)return e}let l=Object.keys(a).reduce((e,t)=>{try{let i=t.split("x")[0];if(Number.isNaN(Number(i)))return{...e,[t]:a[t]};return{...e,[i]:a[t]}}catch(t){return e}},{}),r=Object.keys(l);return n&&"orig"===r[r.length-1]&&r.pop(),l[r.pop()]||""}a.d(t,{Z:()=>i})},859492:(e,t,a)=>{"use strict";a.d(t,{kt:()=>h,fs:()=>u,eK:()=>p,Ly:()=>g,BY:()=>m,bN:()=>y,jM:()=>c,RC:()=>o,EU:()=>d});let i=/\s\s+/g,n=e=>e.replace(i," ");var l=a(438711),r=a(112800);let s=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_title"])),o=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,d=(e,t)=>e?e.trim().length>t?(0,l.ZP)(e.trim(),t).trim():e.trim():"",u=({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l})=>{let r=l||e,s=d(t,200);return s?s:a?a:i?i:n&&r?r:null},c=({closeupUnifiedDescription:e,pinDescription:t})=>n((0,l.ZP)(e||t||"",496)).trim(),p=e=>{let{richSummaryDisplayName:t}=e,a=e.pinJoinVisualAnnotation||[],i=e.pinJoinAnnotationsWithLinks||{},r=e.richMetadataDescription||"",s=e.closeupUnifiedDescription||"",o=a.map(e=>(i||{})[e]||{name:e,url:""}),d="",u=(t||"").toLocaleLowerCase().trim(),c=r.toLocaleLowerCase().trim(),p=s.toLocaleLowerCase().trim();return s&&s.length>3&&p!==u?d=s:r&&r.length>3&&c!==u&&(d=r),d&&(d=n((0,l.ZP)(d,496)).trim()),{description:d,annotationsWithLinks:o}},g=({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l,pinJoinVisualAnnotation:o,seoNoindexReason:c,shouldLogUnauthTitle:p,shouldUseSimplifiedTitle:g=!1})=>(p&&(0,r.My)("unauth_closeup.pin_title",{useSeoFallback:s.has(c??""),gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,isStoryPin:!!n,storyPinDataMetadataPinTitle:l||"",pinJoinVisualAnnotation:o?.[0],pinTitle:e,seoNoindexReason:c}),s.has(c??""))?o?.[0]??" ":g?d(t,200)||o?.[0]||"":u({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l})||o?.[0]||e,m=e=>`/pin/${e}/`,h=(e,t)=>{let a=`Pinterest video from ${t}: `.concat(e);return""===t?e:a},y=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:m(e)},779561:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i,n=a(667294);a(167912);var l=a(78039);let r=void 0!==i?i:i=a(752824);function s({pinKey:e,maxWidth:t}){let a=(0,l.Z)(r,e),i=a?.imageSpec_564x||a?.imageSpec_736x||a?.imageSpec_orig||a?.imageSpec_474x||a?.imageSpec_236x,s=i?.width||1,o=i?.height||1,d=i?.url||"",u=function(e,t,a=564){return e>a&&(t*=a/e,e=a),{width:e,height:t}}(s,o,t);return{getNormalizedPinImage:(0,n.useCallback)(()=>({width:u.width,height:u.height,url:d}),[u.height,u.width,d])}}},505077:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s}),a(167912);var i,n=a(78039),l=a(233846);let r=void 0!==i?i:i=a(204320),s=e=>{let t,a=(0,l.ZP)(),i=(0,n.Z)(r,e),s=i.trackedLink||i.link||i.imageSpec_orig&&i.imageSpec_orig.url,{richMetadata:o,richSummary:d}=i,u=a.bt("Источник: ", "Saved from ", "Closeup pin annotation", undefined, true);return o&&o.products&&o.products[0]&&o&&o.products[0].name&&o.products[0].offerSummary&&(u=a.bt("Продавец: ", "Product sold by ", "pin annotation", undefined, true),t=(o.products?.[0]||void 0)?.offerSummary),!t&&d&&d&&d.products&&d.products[0]&&d&&d.products[0].name&&d.products[0].offerSummary&&(u=a.bt("Продавец: ", "Product sold by ", "pin annotation", undefined, true)),{pinLink:s,pinCreditPrefix:u,pinTitle:i.closeupUnifiedTitle,pinDescription:i.closeupUnifiedDescription,pinCategory:i.category}}},622809:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r}),a(167912);var i,n=a(78039);let l=void 0!==i?i:i=a(615027),r=e=>{let t=(0,n.Z)(l,e);return[["60x60",t?.imageSpec_60x60],["136x136",t?.imageSpec_136x136],["170x",t?.imageSpec_170x],["236x",t?.imageSpec_236x],["474x",t?.imageSpec_474x],["564x",t?.imageSpec_564x],["736x",t?.imageSpec_736x],["600x315",t?.imageSpec_600x315],["orig",t?.imageSpec_orig]].reduce((e,[t,a])=>a?{...e,[t]:a.url}:e,{})}},740195:(e,t,a)=>{"use strict";function i({hasPin:e,hasPinRichMetadata:t,hasPinRichMetadataProducts:a,hasPinRichMetadataArticle:i,hasPinRichMetadataRecipe:n,hasPinStoryPinData:l}){if(e){if(t)return a?144:i?141:n?145:139;if(l)return 157}return 140}a.d(t,{Z:()=>i})},857656:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(667294),n=a(498905),l=a(785893);let r=e=>document.querySelector(`img[src="${e}"]`)||null,s=(e,t,a)=>{let n=(0,i.useRef)(null),l=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(e!==n.current||a&&a!==l.current){n.current=e??null;let a=r(e);a?.complete&&t()}l.current=a},[e,t,a])};function o({alt:e,children:t,color:a,elementTiming:i,fetchPriority:r,isActive:o=!1,naturalHeight:d,naturalWidth:u,onLoad:c,src:p,fit:g="none",srcSet:m,...h}){return s(p,c,o),(0,l.jsx)(n.Z,{...h,alt:e,color:a,elementTiming:i,fetchPriority:r,fit:g,naturalHeight:d,naturalWidth:u,onLoad:c,src:p,srcSet:m,children:t})}},32747:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=(0,a(667294).createContext)(null)},282273:(e,t,a)=>{"use strict";a.d(t,{Z:()=>N});var i=a(667294),n=a(221097),l=a(582082),r=a(150739),s=a(535768),o=a(17433),d=a(298568),u=a(776090),c=a(638619),p=a(48756),g=a(904523),m=a(657742),h=a(482535);let y=e=>{let t=performance.getEntriesByType("resource").filter(e=>e.name.includes("i.pinimg")).reduce((e,t)=>{let a=t.name.replace(".jpg","").split("/");return{[a[a.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}},{});[...Array.from(document.getElementsByTagName("img")).map(e=>{let a=e.src.replace(".jpg","").split("/"),i=a[a.length-1];if(t[i]){let a=(0,h.rZ)(e)?.width||1,n=t[i].downloadSize;return{fileName:i,renderedSize:a,downloadedSize:n,ratio:n/a}}return{fileName:i,renderedSize:1,downloadedSize:1,ratio:1}}),...Array.from(document.querySelectorAll('div[role="img"]')).map(e=>{let a=e.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),i=a[a.length-1];if(t[i]&&e instanceof HTMLDivElement){let a=(0,h.rZ)(e)?.width||1,n=t[i].downloadSize;return{fileName:i,renderedSize:a,downloadedSize:n,ratio:n/a}}return{fileName:i,renderedSize:1,downloadedSize:1,ratio:1}})].forEach(t=>{let{ratio:a,fileName:i,downloadedSize:n}=t;t.ratio>1.05&&(0,s.A9)(`checkImageRatio.${e}`,{count:Math.round(10*a)/10,tags:{fileName:`${n}_${i}`}})})};var _=a(286272),f=a(642058),x=a(174646);let S=(e,t)=>{let a=(0,i.useRef)(t);return{getState:()=>a.current,dispatch:t=>{a.current=e(a.current,t)}}};var v=a(873874),w=a(992114),b=a(785893);let k=["initial_app_load","client_route_push"],P=(0,r.XV)("PwtSurface"),T="NavigationComplete",F="VisuallyComplete",I=()=>{(0,c._T)()},E=(e,t)=>{let{metricConfig:{metricId:a,pwtStaticContext:i,annotateExperiments:n},annotations:r,binaryAnnotations:d,constraintMap:p,startTime:g,imageTimings:m,spans:h,traceId:_}=e;(0,o.L8)(`Report_PWT_Complete_${(0,l.KJ)(a)}`,g,t);let f=(0,u.W)({annotateExperiments:[...n??[]],annotations:r,binaryAnnotations:d,constraintMap:p,endTime:t,imageTimings:m,metricId:a,pwtStaticContext:i,startTime:g,traceId:_,spans:h});try{y(String(f.binaryAnnotationMap["metricId.surface"].value))}catch(e){(0,s.H)("image_ratio_check_error",{error:e})}return(0,c._T)(),{...e,result:f,status:"DONE"}},j=e=>{if(e.metricConfig.constraints.every(t=>e.constraintMap[t])){let t=Math.max(...e.metricConfig.constraints.map(t=>e.constraintMap[t]));return E(e,t)}return P(`Remaining constraints: ${e.metricConfig.constraints.filter(t=>!e.constraintMap[t]).join(", ")}`),e},R=(e,t)=>{let{constraint:a,time:i}=t,n=(0,l.KJ)(e.metricConfig.metricId);return f.Z?e.metricConfig.constraints.find(e=>e===a)?e.constraintMap[a]?(P(`constraint "${a}" is already complete.`),(0,s.H)("duplicated_constraint_complete",{constraint:a,action:n}),e):(P(`marking constraint "${a}" as complete ${i||performance.now()}`),i?(0,o.ZP)(`constraint_${a}_is_complete`,i):(0,o.ZP)(`constraint_${a}_is_complete`),j({...e,constraintMap:{...e.constraintMap,[a]:i||f.Z.now()}})):(P(`marked constraint "${a}" is not a required constraint.`),e):((0,s.H)("missing_window_performance",{action:n}),e)},A=(e,t)=>{if(!f.Z){let t=(0,l.KJ)(e.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:t})}P(`removing constraint "${t}"`);let a=e.metricConfig.constraints.filter(e=>e!==t),{[t]:i,...n}=e.constraintMap;return j({...e,constraintMap:n,metricConfig:{...e.metricConfig,constraints:a}})},C=(e,t)=>{if(!f.Z){let t=(0,l.KJ)(e.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:t})}P(`updating pwt segment to "${t}"`);let a={...e.metricConfig.metricId,segment:t};return{...e,metricConfig:{...e.metricConfig,metricId:a}}},L=(e,t)=>{let{metricConfig:a,startTime:i,isSampled:n,disablePWTLogging:r}=t;if(r||"TIMING"!==e.status||i===e.startTime||I(),!a)return{status:"DISABLED",metricConfig:null};let o=(0,l.KJ)(a.metricId);if("TIMING"===e.status&&e.startTime===i&&e.constraintMap[T])return(0,s.H)("duplicated_init_route_action",{action:o}),e;if(!r){let e=(0,v.H)();(0,s.A9)(`handler.${o}`,{tags:{handler:e}});let t=void 0!==a.metricId.isAuthenticated&&{tags:{isAuth:a.metricId.isAuthenticated}}||void 0;"Other"===a.pwtStaticContext.browserName&&!1===a.metricId.isAuthenticated&&"initial_app_load"===a.metricId.navigationType?((0,s.A9)(`TIMING.${o}`,{tags:{userAgent:window?.navigator?.userAgent}}),(0,s.A9)(`TIMING.sampled.${o}`,{tags:{userAgent:window?.navigator?.userAgent},sampleRate:.03})):((0,s.A9)(`TIMING.${o}`),(0,s.A9)(`TIMING.sampled.${o}`,{sampleRate:.03})),(0,p.C)({resultLog:`TIMING.${o}`,annotateExperiments:a.annotateExperiments||[],getExperimentGroup:a.pwtStaticContext.getExperimentGroup,options:t})}return R({traceId:(0,c.vc)()||(0,c.ZP)("initial_app_load"===a.metricId.navigationType,a.pwtStaticContext.serverData?.trace_id),status:"TIMING",metricConfig:a,startTime:i,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:n,spans:[]},{constraint:T,disablePWTLogging:r})},Z=(e,t)=>{if(P("dispatch action",t),"INIT_ROUTE"===t.type)return L(e,t.payload);if("TIMING"!==e.status)return P(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":I();let a={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:a};case"ANNOTATE":let{name:i}=t.payload;if(!f.Z)return e;let n=f.Z.now();return P(`adding annotation {${i}: ${n}}`),{...e,annotations:{...e.annotations,...{[i]:n}}};case"BINARY_ANNOTATE":let{name:r,value:o,annotationType:d}=t.payload;return P(`adding binary annotation {${r}: ${o}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[r]:{value:o,type:d}}}};case"MARK_CONSTRAINT_COMPLETE":return R(e,t.payload);case"REMOVE_CONSTRAINT":return A(e,t.payload);case"SET_SEGMENT":return C(e,t.payload);case"SET_VISUALLY_COMPLETE_RESULT":{let{payload:{imageTimings:a}}=t;if(0===a.length)return I(),{...e,status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}};let i=Math.max(...a.map(e=>e.responseEnd||0));return R({...e,imageTimings:a},{constraint:F,time:i})}case"ADD_SUBSPAN":let{startTime:u}=e,{payload:{name:c,startTime:p,endTime:g,annotations:m,binaryAnnotations:h,parentId:y}}=t;return{...e,spans:[...e.spans,{name:c,id:(0,_.Z)(),startTime:p||u,endTime:g,annotationMap:{...m},binaryAnnotationMap:{...h},parentId:y}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,_.Z)(),startTime:f.Z?f.Z.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":let x=e.spans.findIndex(e=>e.name===t.payload.name);return x>-1?(e.spans[x].endTime=f.Z?f.Z.now():0,t.payload.annotations&&(e.spans[x].annotationMap={...e.spans[x].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[x].binaryAnnotationMap={...e.spans[x].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,s.H)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:let S=(0,l.KJ)(e.metricConfig.metricId);return(0,s.H)("invalid_pwt_surface_action",{action:S}),e}},M=e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}},D=new Set,K=({surface:e,constraints:t,segment:a,measureGridVisuallyComplete:l,annotateExperiments:r,customEnabledNavigationTypes:s,navigationInfo:{clientNavigation:o,navigationType:d},sampleRate:u})=>{let c=(0,i.useRef)("NOT_SET"),p=(0,m.Z)(),{getState:g,dispatch:h}=S(Z,{status:"DISABLED",metricConfig:null}),y=(0,x.B)();if(c.current!==o&&(c.current=o,p)){let{isAuthenticated:i}=p,n=e&&d&&(s||k).includes(d)?{metricId:{type:"surface",surface:e,navigationType:d,isAuthenticated:i,segment:a},annotateExperiments:r,constraints:[T,...t||[],...l?[F]:[]],pwtStaticContext:p}:null;(0,w.nP)("webapp.pwt_surface.init_route",{tags:{surface:e,navigationType:d,isAuthenticated:i}});let c=!D.has(o);h({type:"INIT_ROUTE",payload:{metricConfig:n,startTime:o?o.time:0,isSampled:!u||Math.random()<u,disablePWTLogging:!c}}),c&&D.add(o)}let _=g();if((0,i.useEffect)(()=>()=>{D.delete(o)},[o]),(0,i.useEffect)(()=>{let e=e=>{h({type:"ABORT",reason:e})};n.Z.onSessionPause(e);let t=window.innerHeight,a=window.innerWidth,i=()=>{let e=Math.abs(window.innerHeight-t),n=Math.abs(window.innerWidth-a),l=window.innerHeight!==t,r=window.innerWidth!==a,s={handler:(0,v.H)(),deviceType:p?.deviceType??"unknown",isAuthenticated:p?.isAuthenticated??"unknown",platform:y.userAgent.platform??"unknown"};if((0,w.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:{...s,heightChanged:l,widthChanged:r}}),l&&(0,w.S0)("webapp.PwtLogger.resizeHeightDelta",e,{sampleRate:1,tags:s}),r&&(0,w.S0)("webapp.PwtLogger.resizeWidthDelta",n,{sampleRate:1,tags:s}),window.removeEventListener("resize",i),p?.deviceType==="phone"&&(!r&&l&&e<=150||!l&&!r)||p?.deviceType==="desktop"&&!l&&!r)return void(0,w.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:{...s,heightChanged:l,widthChanged:r}});h({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",i),()=>{let t=g();P("handling unmount",t),"TIMING"===t.status&&I(),n.Z.removePauseListener(e),window.removeEventListener("resize",i)}},[]),"TIMING"!==_.status||!_.constraintMap[T])return{state:_,context:null};let{startTime:b,metricConfig:E}=_;return{state:_,context:{abort:e=>h({type:"ABORT",reason:e}),addAnnotation:e=>h({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,a)=>h({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:a}}),addSubspan:(e,t,a,i={},n={},l=null)=>h({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:a,annotations:i,binaryAnnotations:n,parentId:l}}),getId:()=>b,getMetricId:()=>E.metricId,markConstraintComplete:e=>h({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:f.Z?f.Z.now():0}}),removeConstraint:e=>h({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>h({type:"SET_SEGMENT",payload:e}),setVisuallyCompleteResult:E.constraints.includes(F)?e=>h({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,startSubspan:(e,t={},a={},i=null)=>h({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:a,parentId:i}}),stopSubspan:(e,t={},a={},i=null)=>h({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:a,parentId:i}})}}},O=()=>{let e=(0,d.A)(),t=!!e;(0,i.useEffect)(()=>{if(t){let t=e?.getMetricId(),a=t?(0,l.KJ)(t):null;(0,s.H)("nested_pwt_surface",{action:a})}},[t])};function N({children:e,...t}){let a=(0,g.Z)(),i=M(a),n=t.measureGridVisuallyComplete?["web_masonry_v2_auth","web_masonry_v2_unauth"]:[],l=[...t.annotateExperiments??[],...n],{context:r}=K({...t,annotateExperiments:l,navigationInfo:{navigationType:i,clientNavigation:a}});return O(),(0,b.jsx)(d.S,{value:r,children:e})}},904523:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(667294),n=a(32747);function l(){return(0,i.useContext)(n.Z)}},473357:(e,t,a)=>{"use strict";a.d(t,{A:()=>r,Z:()=>s});var i=a(667294),n=a(883119),l=a(785893);let r=({fill:e})=>{let t="half"===e?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(n.xu,{position:"absolute",children:(0,l.jsx)(n.JO,{accessibilityLabel:"","aria-hidden":!0,color:"default",icon:"star-half",size:15})}),(0,l.jsx)(n.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:15})]}):(0,l.jsx)(n.JO,{accessibilityLabel:"","aria-hidden":!0,color:"full"===e?"default":"subtle",icon:"star",size:15});return(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},"data-test-id":`rating-star-${e}`,display:"inlineBlock",children:t})};function s({max_rating:e,rating:t,display:a}){var i;if(!t)return null;let s=[],o=parseFloat(e)||5,d=5*(i=(i=parseFloat(t)||0)<=o?i:o)/o;if(Number.isNaN(d))return null;let u=Math.floor(d),c=d-u;return[...Array(u).keys()].forEach(e=>s.push((0,l.jsx)(r,{fill:"full"},e))),c>=.75?s.push((0,l.jsx)(r,{fill:"full"},s.length)):c>=.25&&s.push((0,l.jsx)(r,{fill:"half"},s.length)),[...Array(5-s.length).keys()].forEach(()=>s.push((0,l.jsx)(r,{fill:"empty"},s.length))),(0,l.jsx)(n.xu,{"aria-label":`Rating ${String(d)} stars out of 5`,"data-test-id":"rating-stars",display:a?"flex":"inlineBlock",position:"relative",role:"img",width:18*o,children:s})}},896403:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var i=a(667294),n=a(883119),l=a(233846),r=a(967312),s=a(121006),o=a(785893);function d({category:e,ingredients:t,textSize:a="300"}){return(0,o.jsxs)(n.xu,{children:[e&&(0,o.jsx)(n.xu,{children:(0,o.jsx)(n.xv,{size:a,weight:"bold",children:e})}),(0,o.jsx)("ul",{children:t.map((e,t)=>(0,o.jsx)("li",{"data-test-id":"recipe-ingredient",itemProp:"recipeIngredient",children:(0,o.jsx)(n.xu,{marginTop:1,children:(0,o.jsxs)(n.xv,{size:a,children:["• ",e.amt||null," ",e.name]})})},t))})]})}function u({instructions:e}){return e?e.map((e,t)=>{let a=`Step ${t+1}`;return(0,o.jsxs)(n.xu,{children:[(0,o.jsx)(n.xv,{size:"200",weight:"bold",children:a}),(0,o.jsx)(n.xv,{size:"100",children:e})]},a)}):null}var c=a(232375),p=a(132280),g=a(93002);function m({recipeProps:e,marginOverrides:t}){var a;let m=(0,l.ZP)(),{checkExperiment:h}=(0,r.F)(),{image:y,name:_,categorizedIngredients:f,instructions:x}=e.recipe,{peekCloseupEnabled:S}=(0,g.x4)(),v=x&&h("web_food_indicator").anyEnabled,w=0;if(f&&f.length){let e=[];f.forEach(t=>(w+=t.ingredients.length,e.push(t.ingredients)))}let b=S?(a=w,(0,s.Z)(m.nbt(["{{ count }} ингредиент", "{{ count }} ингредиента", "{{ count }} ингредиентов"], a, "closeup.recipePin.heading.ingredientCount", true),{count:a.toString()})):m.bt("Ингредиенты", "Ingredients", "Ingredients title and count in closeup recipe description", undefined, true);return(0,o.jsx)(n.xu,{marginBottom:2,marginTop:2,children:(0,o.jsxs)(c.Z,{itemScope:!0,itemType:"https://schema.org/Recipe",children:[(0,o.jsx)("meta",{content:_,itemProp:"name"}),(0,o.jsx)("meta",{content:y,itemProp:"image"}),v&&(0,o.jsx)(p.Z,{collapseByDefault:!1,heading:"Instructions",children:(0,o.jsx)(n.xu,{children:(0,o.jsx)(u,{instructions:x})})}),(0,o.jsx)(p.Z,{heading:b,children:(0,o.jsx)(n.xu,{children:f.map(({category:e,ingredients:a},l)=>{let r=`ingredient-${l}`;return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(n.xu,{marginBottom:t?.ingredientMarginBottom||4,children:(0,o.jsx)(d,{category:e,ingredients:a,textSize:"200"})})},r)})})})]})})}},874929:(e,t,a)=>{"use strict";function i(e,t,a,n=0){if(-1===t||-1===a||t===a)return e;let l=a+n,r=t+n;if(l<0||l>=e.length||r<0||r>=e.length)return e;let s=[...e],o=s[r],d=r<l?1:-1;for(let t=r;t!==l;t+=d)s[t]=e[t+d];return s[l]=o,s}a.d(t,{Z:()=>i})},232375:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(785893);let n=e=>{let t=e.itemType?{itemScope:!0,itemType:e.itemType}:{};return(0,i.jsx)("div",{"data-test-id":"rich-pin-information",...t,children:e.children||null})}},844379:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=(0,a(667294).createContext)("undefined"!=typeof window?window:null)},438711:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>n,mP:()=>i});let i="…";function n(e,t=80,a=i,l=!1){let r;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||l)r=e.substring(0,t);else{let a=e.lastIndexOf(" ",t);r=e.substring(0,a)}return(r=r.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+a}},5112:(e,t,a)=>{"use strict";a.d(t,{Z:()=>_});var i=a(667294),n=a(883119),l=a(468318),r=a(131714),s=a(174646),o=a(136388),d=a(390124),u=a(726462),c=a(55665),p=a(903683),g=a(785893);function m(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends i.Component{constructor(e){super(e),m(this,"componentWillUnmount",()=>{this.unregisterComponent()}),m(this,"getContext",()=>{let{clientTrackingParams:e,component:t,element:a,objectId:i,timeSpentContext:n,view:l,viewParameter:r}=this.props;return{view:l||n?.view,viewParameter:r||n?.viewParameter,component:t||n?.component,element:a,objectId:i||n?.objectId,clientTrackingParams:e||n?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),m(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),m(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){let t=e.getGrandparentUuid();if(t)return t}return e?.getParentUuid?.()}),m(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),m(this,"getTimedPair",()=>this.state.timedPair),m(this,"setTimedPair",(e,t)=>{this.setState({timedPair:e},()=>{t&&t()})}),m(this,"isRegistered",!1),m(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),m(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),m(this,"handleVisibilityChange",e=>{let{intersectionRatio:t}=e[0],{bottom:a,left:i,right:n,top:l}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===a&&0===i&&0===n&&0===l?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new u.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,o.Z)(e.auxData,this.props.auxData)&&(0,o.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e,intersectionObserverBoxHeight:t}=this.props;return(0,g.jsx)(c.$,{value:this.getContext(),children:(0,g.jsx)(r.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:a=>(0,g.jsx)(n.xu,{ref:a,height:t??"100%",children:i.Children.only(e)})})})}}function y(e){let t=(0,l.Hv)(),a=(0,c.a)(),n=(0,d.Z)(),r=(0,p.EQ)(),{requestIdentifier:o=""}=(0,s.B)(),u={app_instance_id:o.slice(0,8),...e.auxData??{}};return(0,i.useEffect)(()=>{n?.setHistoryStackContext(t)},[t,n]),(0,i.useEffect)(()=>{n?.setPins(r??{})},[r,n]),n?(0,g.jsx)(h,{...e,auxData:u,timeSpentContext:a,timeSpentManager:n,children:e.children}):e.children}y.displayName="DeprecatedTimeSpent";let _=y},55665:(e,t,a)=>{"use strict";a.d(t,{$:()=>i,a:()=>n});let{Provider:i,getMaybe:n}=(0,a(218291).Z)("timeSpentContext")},726462:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s,h:()=>r});var i=a(172045),n=a(17314);function l(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let r="undefined"!=typeof window&&window.performance&&window.performance.now?()=>Math.floor(1e6*window.performance.now()):()=>1e6*Date.now(),s=class{constructor(e){l(this,"start",()=>(this.startTime=r(),this.startTime)),l(this,"end",()=>(this.endTime=r(),this.duration=this.startTime?this.endTime-this.startTime:null,this.duration));try{this.uuid=(0,i.Z)()}catch(e){this.uuid=(0,n.Z)()}e&&Object.assign(this,e)}}},79646:(e,t,a)=>{"use strict";function i(e){if((e||"").includes("--")){let t=e.split("--"),a=t.pop();return{text:t.join("--"),pinId:a}}return{text:"",pinId:e}}a.d(t,{Z:()=>i})},407683:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(667294);let n=()=>{let e=(0,i.useRef)(!1);return(0,i.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},830073:(e,t,a)=>{"use strict";function i(e,t){let a=0,i=!1,n=-1;return e.forEach((e,l)=>{let{x:r=0,y:s=0,h:o=0,w:d=0}=e,u=function(e,t){let{x:a,y:i,w:n,h:l}=e,{x:r,y:s,w:o,h:d}=t,u=Math.max(a,r),c=Math.min(a+n,r+o),p=Math.max(i,s),g=Math.min(i+l,s+d),m=u<c&&p<g?(c-u)*(g-p):0;return m/(n*l+o*d-m)}(t,{x:r,y:s,h:o,w:d});u>=.9&&u>a&&(a=u,i=!0,n=l)}),{isCropAreaOnDotArea:i,indexToHide:n}}a.d(t,{Z:()=>i})},859075:(e,t,a)=>{"use strict";function i({cropArea:{x:e,y:t,w:a,h:i},scaledWidth:n,scaledHeight:l}){return{x:e/n,y:t/l,w:a/n,h:i/l}}a.d(t,{Z:()=>i})},850610:(e,t,a)=>{"use strict";function i({cropArea:e,scaledWidth:t,scaledHeight:a}){let i=e.h||0,n=e.w||0;return{h:Math.floor(i*a),w:Math.floor(n*t),x:Math.floor((e.x||0)*t),y:Math.floor((e.y||0)*a)}}a.d(t,{Z:()=>i})},476151:(e,t,a)=>{"use strict";function i({cropArea:e,cropSource:t,requestParams:a,searchQuery:i,surfaceType:n,title:l,trafficSource:r}){let s=[];if(e){let{x:t,y:a,w:i,h:n}=e;t>=0&&a>=0&&i>=0&&n>=0&&s.push(`x=${t}`,`y=${a}`,`w=${i}`,`h=${n}`)}return t&&s.push(`cropSource=${t}`),n&&s.push(`surfaceType=${n}`),l&&s.push(`full_feed_title=${encodeURIComponent(l)}`),i&&s.push(`q=${i}`),r&&"unknown"!==r&&s.push(`rs=${r}`),a&&s.push(`requestParams=${encodeURIComponent(a)}`),s.length?`?${s.join("&")}`:""}a.d(t,{Z:()=>i})},555587:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(476151);function n({checkExperiment:e,cropArea:t,cropSource:a,isProductPage:n,pinId:l,requestParams:r,searchQuery:s,surfaceType:o,title:d,trafficSource:u}){let c=e?.("web_remove_is_eligible_for_related_products",{dangerouslySkipActivation:!0}).anyEnabled,p=(0,i.Z)({cropArea:t,cropSource:a,requestParams:r,searchQuery:s,surfaceType:c?"flashlight":o,title:d,trafficSource:u}),g="";return n&&(g="products/"),`/pin/${l}/visual-search/${g}${p}`}},595818:(e,t,a)=>{"use strict";function i(e){return{h:e?.h??void 0,is_stela:e?.isStela??void 0,labelId:e?.labelId??void 0,label_x:e?.labelX??void 0,label_y:e?.labelY??void 0,label:e?.label??void 0,max_annotation_num_documents:e?.maxAnnotationNumDocuments??void 0,score:e?.score??void 0,show_on_closeup:e?.showOnCloseup??void 0,title:e?.title??void 0,w:e?.w??void 0,x:e?.x??void 0,y:e?.y??void 0}}a.d(t,{Z:()=>i})},259713:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var i=a(667294),n=a(616550),l=a(615071),r=a(883119),s=a(857147),o=a(533936),d=a(785893);let u=e=>`url(#${e})`,c=e=>`#${e}`;function p({imageHeight:e,imageUrl:t,imageWidth:a,maskHeight:p,maskUrl:g,maskWidth:m,maskX:h,maskY:y,show:_}){let f=(0,i.useRef)(null),x=(0,n.TH)(),S=`${h}-${y}-${m}-${p}`,v=`blurFilter-${S}`,w=`maskImage-${S}`,b=`whiteImage-${S}`,k=`blurImage-${S}`,P=`cutoutMask-${S}`,T=`outlineMask-${S}`,{w:F,h:I}=(0,s.mB)(x.search),E=Number(F)===a&&Number(I)===e||void 0===F&&void 0===I?o.eO:o.P0,j=Math.round(Math.min(m,p)),R=Math.min(o.Ll,j)*o.uB;return(0,d.jsx)(l.Z,{classNames:o.ID,in:_,nodeRef:f,timeout:o.CT,children:(0,d.jsx)(r.xu,{ref:f,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",filter:`brightness(${E}`}},opacity:0,children:(0,d.jsxs)("svg",{"data-gestalt-valid-html":"Image",id:o.ID,style:{position:"absolute",top:0,left:0,width:a,height:e},children:[(0,d.jsxs)("defs",{children:[(0,d.jsxs)("filter",{id:v,children:[(0,d.jsx)("feGaussianBlur",{edgeMode:"none",stdDeviation:R}),(0,d.jsx)("feComponentTransfer",{children:(0,d.jsx)("feFuncA",{amplitude:"1",exponent:o.nV,offset:"0",type:"gamma"})})]}),(0,d.jsx)("mask",{id:P,children:(0,d.jsx)("image",{height:p,href:g,id:w,width:m,x:h,y:y})}),(0,d.jsx)("use",{href:c(w),id:b,mask:u(P)}),(0,d.jsx)("mask",{id:T,children:(0,d.jsx)("use",{filter:u(v),href:c(b),id:k})})]}),(0,d.jsx)("image",{height:e,href:t,mask:u(T),width:a,x:0,y:0})]})})})}},836656:(e,t,a)=>{"use strict";a.d(t,{I:()=>h,Z:()=>_});var i,n=a(667294);a(167912);var l=a(616550),r=a(883119),s=a(19963),o=a(476943),d=a(78039),u=a(779561),c=a(259713);let p=(e,t,a)=>{let i=0;for(let n=0;n<e.length-1;n+=1){let l=e[n],r=e[n+1];if(l&&r){let e=(r.x-l.x)*t,n=(r.y-l.y)*a;i+=Math.sqrt(e*e+n*n)}}if(e.length>0){let n=e[0],l=e[e.length-1];if(n&&l){let e=(n.x-l.x)*t,r=(n.y-l.y)*a;i+=Math.sqrt(e*e+r*r)}}return i};function g({contour:e,context:t,contourXRatio:a,contourYRatio:i}){t.beginPath(),e.points.forEach((e,n)=>{if(e){let l=e.x*a,r=e.y*i;0===n?t.moveTo(l,r):t.lineTo(l,r)}})}var m=a(785893);let h="stela-cutout",y=void 0!==i?i:i=a(314494);function _({auxData:e,bitmapData:t,hasAnimatedCutoutsOnLand:a,hasLoggedRender:i,hoveredCutoutIndex:_,index:f,pinImageHovered:x,pinKey:S,selectedCutoutIndex:v,setHasAnimatedCutoutsOnLand:w,setHasLoggedRender:b,viewParameter:k,viewType:P}){let{logContextEvent:T}=(0,s.v)(),F=(0,l.TH)(),I=(0,d.Z)(y,S),{getNormalizedPinImage:E}=(0,u.Z)({pinKey:I,maxWidth:o.Wm}),j=(0,n.useRef)(null),R=(0,n.useRef)(null),A=(0,n.useRef)(null),[C,L]=(0,n.useState)(0),[Z,M]=(0,n.useState)(!1),[D,K]=(0,n.useState)(0),[O,N]=(0,n.useState)(!1),z=F.pathname.includes("visual-search"),{height:$,width:H,url:B}=E(),{contours:U,contourXRatio:G,contourYRatio:W,isHidden:V,maskHeightRatio:Y,maskUrl:q,maskWidthRatio:X,maskXRatio:Q,maskYRatio:J}=t,ee=Q*H,et=J*$,ea=X*H,ei=Y*$,en=_===f,el=v===f,er=U&&U.length>0;(0,n.useEffect)(()=>{i||(T({event_type:120,element:14154,view_parameter:k,view_type:P,aux_data:e}),b?.(!0))},[e,i,T,b,k,P]),(0,n.useEffect)(()=>{j.current&&(j.current.width=ea,j.current.height=ei,R.current=new(window.OffscreenCanvas||window.HTMLCanvasElement)(ea,ei))},[ea,ei]);let es=(0,n.useCallback)(()=>{N(!0)},[]);return(0,n.useEffect)(()=>{let e=j.current;return e?.addEventListener("transitionend",es),()=>{e?.removeEventListener("transitionend",es)}}),(0,n.useEffect)(()=>{if(!j.current||!R.current||!er||!G||!W)return;let e=j.current.getContext("2d");return a?void e?.clearRect(0,0,j.current.width,j.current.height):((!O||x||V&&en)&&(A.current=requestAnimationFrame(()=>{if(!j.current||!R.current)return;let t=R.current.getContext("2d");e&&t&&(!function({contours:e,context:t,hasAnimatedCutoutsOnLand:a,hoveredCutoutIndex:i,index:n,isHidden:l,contourXRatio:r,contourYRatio:s,setTraceProgress:o,setHasAnimatedCutoutsOnLand:d,style:u,traceProgress:c,selectedCutoutIndex:m}){if(t.clearRect(0,0,t.canvas.width,t.canvas.height),!e||0===e.length||m===i&&i===n||m===n)return;let h={trace:{strokeStyle:"#fff",lineWidth:2},outline:{strokeStyle:"#fff",lineWidth:3}},y=l&&i===n,_=!l||y;if("trace"===u&&void 0!==c){let l=c,m=e[0].points.length;if(a){if(y||i===n){o(l=(l+900/p(e[0].points,r,s)*3.2/1e3)%1);let a=Math.floor(.33*m),i=Math.floor(m*l),n=(i-a+m)%m;e.map(e=>({...e,points:n<i?e.points.slice(n,i):e.points.slice(n).concat(e.points.slice(0,i))})).forEach(e=>{e.points.length>1&&(t.strokeStyle=h[u].strokeStyle,g({contour:e,context:t,contourXRatio:r,contourYRatio:s}),_&&(t.lineWidth=h[u].lineWidth,t.stroke()))})}}else{let a,i;if(o(l+=l<=1?.0032:.009600000000000001),l>=2){o(1),d(!0);return}let n=Math.floor(.33*m);l<=1?i=((a=Math.floor(m*l))-n+m)%m:(a=m,i=Math.floor(m-n+n*(l-1))),e.map(e=>{let t=[];return t=i<a?e.points.slice(i,a):e.points.slice(i).concat(e.points.slice(0,a)),{...e,points:t}}).forEach(e=>{e.points.length>1&&(t.strokeStyle=h[u].strokeStyle,g({contour:e,context:t,contourXRatio:r,contourYRatio:s}),_&&(t.lineWidth=h[u].lineWidth,t.stroke()))})}}else e.forEach(e=>{g({contour:e,context:t,contourXRatio:r,contourYRatio:s}),_&&(t.strokeStyle=h[u].strokeStyle,t.lineWidth=h[u].lineWidth,t.stroke(),i===n&&(t.save(),t.fillStyle="rgba(255, 255, 255, 0.25)",t.fill(),t.restore()))})}({contours:U,context:t,contourXRatio:G,contourYRatio:W,index:f,isHidden:V,hoveredCutoutIndex:_,opacity:C,setTraceProgress:K,hasAnimatedCutoutsOnLand:a,setHasAnimatedCutoutsOnLand:w,style:"trace",traceProgress:D,selectedCutoutIndex:v}),e.clearRect(0,0,j.current.width,j.current.height),e.drawImage(R.current,0,0))})),()=>{A.current&&(cancelAnimationFrame(A.current),A.current=null)})},[G,W,U,a,er,_,f,O,V,en,C,x,v,w,D]),(0,n.useEffect)(()=>{if(x)M(!0),L(1);else if(Z)L(0);else{L(1);let e=setTimeout(()=>{M(!1),L(0)},3e3);return()=>clearTimeout(e)}},[x,Z,L]),(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(c.Z,{imageHeight:$,imageUrl:B,imageWidth:H,maskHeight:ei,maskUrl:q,maskWidth:ea,maskX:ee,maskY:et,show:en&&!el}),er&&(0,m.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{top:et,left:ee}},height:ei,position:"absolute",width:ea,children:(0,m.jsx)("canvas",{ref:j,"data-test-id":"cutout-item",id:h,style:{opacity:z||x?1:C,transition:x||Z||z?"none":"opacity 2s linear 1s"}})})]})}},533936:(e,t,a)=>{"use strict";a.d(t,{CT:()=>u,ID:()=>n,Ii:()=>i,Ll:()=>o,P0:()=>r,eO:()=>l,iF:()=>c,nV:()=>d,uB:()=>s});let i="stela-cutout",n="cutout-overlay",l=1.2,r=1,s=.1,o=100,d=2,u=300,c=`
  .${n}-enter {
    opacity: 0;
  }
  .${n}-enter-active {
    opacity: 1;
    transition: opacity ${u}ms;
  }
  .${n}-enter-done {
    opacity: 1;
  }
  .${n}-exit {
    opacity: 1;
  }
  .${n}-exit-active {
    opacity: 0;
    transition: opacity ${u}ms;
  }
  .${n}-exit-done {
    opacity: 0;
  }
`},245660:(e,t,a)=>{"use strict";function i(e,t){let{x:a,y:i}=e,n=!1,l=0,r=t.length-1;for(;l<t.length;){let{x:e,y:s}=t[l],{x:o,y:d}=t[r];s>i!=d>i&&a<(o-e)*(i-s)/(d-s)+e&&(n=!n),r=l,l+=1}return n}a.d(t,{Z:()=>i})},863658:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var i,n=a(667294);a(167912);var l=a(78039),r=a(967312),s=a(113474);let o=void 0!==i?i:i=a(46320);function d({boundingBox:e,pinKey:t}){let{checkExperiment:a}=(0,r.F)(),i=(0,l.Z)(o,t),d=a("dtn_exp6_uve4a").group,u=(0,n.useMemo)(()=>"enabled"===d?{detection_model:"dtn_exp6_yolov8",use_gss:!1,write_to_galaxy:!1}:"enabled_dtn_exp5_skip_gss"===d?{use_gss:!1,write_to_galaxy:!1}:{},[d]),{data:c}=(0,s.Z)(i.entityId?{name:"ApiResource",options:{url:`/v3/pins/${i.entityId}/segmentation/sam/`,data:{bounding_box:e?JSON.stringify({x:Math.min(Math.max(e.x||0,0),1),y:Math.min(Math.max(e.y||0,0),1),width:Math.min(Math.max(e.w||1,0),1),height:Math.min(Math.max(e.h||1,0),1)}):void 0,client:"visual_cutout",use_gss:!e,write_to_galaxy:!e,cleanup_masks:!0,...u}}}:null);return c}},55077:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(20561),n=a(785893);let l=({children:e})=>(0,n.jsx)(i.Z,{onTouch:e=>{if(e.target instanceof HTMLElement&&"IMG"===e.target.tagName){let t=e.target.getBoundingClientRect().top+window.scrollY-70;window.scrollTo(window.scrollX,t)}},pressState:"none",children:e})},41990:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(883119),n=a(19963),l=a(233846),r=a(667294),s=a(785893);function o({auxData:e,enabled:t,onPull:a,refreshing:o,viewParameter:d}){let u=(0,l.ZP)(),{logContextEvent:c}=(0,n.v)(),p=4079===d,{position:g,startYRefCurrent:m,pullDistance:h}=function({enabled:e,onSelect:t,refreshing:a}){let i=(0,r.useRef)(null),[n,l]=(0,r.useState)(0),[s,o]=(0,r.useState)(!1),d=a?0:n/250,u=d>0,c=()=>{o(!1),l(0)};return(0,r.useEffect)(()=>{if(e){let e=e=>{window.scrollY<=0&&!a&&(i.current=e.touches[0].clientY)},r=e=>{if(i.current){let t=(e.touches[0].clientY-i.current)*.5;t>0&&(l(t),e.preventDefault())}},s=()=>{i.current&&(o(!0),t({pullDistance:n,position:d,resetState:c}),i.current=null)};return window.addEventListener("touchstart",e),window.addEventListener("touchmove",r,{passive:!1}),window.addEventListener("touchend",s),()=>{window.removeEventListener("touchstart",e),window.removeEventListener("touchmove",r,{passive:!1}),window.removeEventListener("touchend",s)}}},[e,t,n,a,d]),{pullDistance:n,hasStartPulling:u,position:d,startYRefCurrent:i.current,PULL_MENU_DISTANCE:250,isExecuted:s}}({enabled:t,onSelect:t=>{let{pullDistance:i,resetState:n}=t;i>=120&&(c({view_type:1,event_type:158,view_parameter:p?4079:92,aux_data:p?e:{}}),a()),n()},refreshing:o}),y=Math.min(g,1),_=u.bt("Потяните вниз, чтобы обновить", "Pull to refresh", "Pull down on grid to refresh items", undefined, true);return(0,s.jsx)(i.xu,{children:t&&(0,s.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:y,transition:null===m?"all .3s ease-out":void 0}},display:"flex",height:120*g,justifyContent:"center",children:(0,s.jsx)(i.JO,{accessibilityLabel:_,icon:m&&h<120?"arrow-circle-down":"arrow-circle-up",size:40})})})}},814692:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(883119),n=a(538645),l=a(785893);let r=()=>{let e=(0,n.HG)();return(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:e?{paddingTop:"0px",paddingBottom:"0px",marginTop:"0px",marginBottom:"0px"}:{paddingTop:"4px",paddingBottom:"4px",marginTop:"-4px",marginBottom:"-4px"}},"data-test-id":"initial-feed-fetch"})}},20561:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(883119),n=a(785893);function l({children:e,onMouseEnter:t,onMouseLeave:a,onTouch:l,rounding:r,fullWidth:s=!1,pressState:o="none",accessibilityLabel:d,role:u,dataTestId:c}){let p=(Array.isArray(o)?o:[o]).includes("compress");return(0,n.jsx)(i.iP,{accessibilityLabel:d,dataTestId:c,fullWidth:s,onMouseEnter:t&&(({event:e})=>t(e)),onMouseLeave:a&&(({event:e})=>a(e)),onTap:l&&(({event:e})=>l(e)),role:u,rounding:r,tapStyle:p?"compress":"none",children:e})}},200559:(e,t,a)=>{"use strict";a.d(t,{D:()=>i,u:()=>n});let{Provider:i,getMaybe:n}=(0,a(218291).Z)("unauthPageWrapperContext")},68707:(e,t,a)=>{"use strict";function i({isDesktop:e}){return+!e}a.d(t,{Z:()=>i})},1854:(e,t,a)=>{"use strict";a.d(t,{G:()=>f,Z:()=>x});var i=a(667294),n=a(883119),l=a(633569),r=a(399083),s=a(56063),o=a(762422),d=a(844379),u=a(538645),c=a(755090),p=a(607233),g=a(41990),m=a(814692),h=a(862173),y=a(769067),_=a(785893);let f=25;function x({align:e,customLayoutType:t,getColumnSpanConfig:a,getResponsiveModuleConfigForSecondItem:f,emptyState:x,feedItems:S,feedKey:v,maxColumns:w,minColumns:b,pagination:{hasNext:k,isLoadingNext:P,loadNext:T,refetch:F},pullToRefresh:I,renderFeedItem:E,serverRender:j,isLoadingStateEnabled:R,isLoadingAccessibilityLabel:A,isLoadedAccessibilityLabel:C}){let L=(0,u.HG)(),{experimentalColumnWidth:Z,experimentalGutter:M}=(0,r.Z)(),[D,K]=(0,i.useState)(!1),O=1===w?window.innerWidth:void 0,N="userSearch"===t?window.innerWidth-16:200,z=P&&0===S.length&&!D&&!R,$="desktopFlashlight"===t||"ideaPage"===t&&L?-2:s.qG,H=b??2;return"userSearch"===t&&(H=1),(0,c.Z)(()=>(window.addEventListener("online",T),()=>window.removeEventListener("online",T))),(0,_.jsxs)(n.xu,{"data-test-id":"MobileFeed",children:[(0,_.jsx)(g.Z,{enabled:!!I,onPull:()=>{F(),K(!0)},refreshing:D}),(0,_.jsxs)(n.xu,{"data-test-id":"grid",marginEnd:$,marginStart:$,opacity:D?.5:1,children:[(0,_.jsx)(o.Z,{isAtEndOfFeed:!k,isPlaceholderGrid:R&&P&&!S.length,itemCount:S.length,children:S.length?(0,_.jsx)(n.xu,{"data-test-id":"feed",marginTop:(0,p.kk)({isDesktop:L}),children:(0,_.jsx)(d.Z.Consumer,{children:n=>(0,_.jsx)(i.Fragment,{children:(0,_.jsx)(y.Z,{children:(0,_.jsx)(l.default,{_getResponsiveModuleConfigForSecondItem:f,align:"ideaPage"===t?"start":e,cacheKey:v,columnWidth:L?Z??s.yF:O??N,getColumnSpanConfig:a,gutterWidth:L?M??4*s.jC:void 0,id:j?v:void 0,isFetching:P,isLoadedAccessibilityLabel:C??"",isLoadingAccessibilityLabel:A??"",isLoadingStateEnabled:!!R,items:S,loadItems:T,maxColumns:w,minCols:H,optOutFluidGridExperiment:null!=w,renderItem:({data:e,itemIdx:t})=>E(e,t),scrollContainerRef:n,serverRender:j})})})})}):P?(0,_.jsx)(m.Z,{}):x??null}),z&&(0,_.jsx)(n.xu,{column:12,paddingY:2,children:(0,_.jsx)(h.Z,{partialViewportWidth:"desktopFlashlight"===t})})]})]})}},769067:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(538645),n=a(882368),l=a(415042),r=a(785893);let s=({children:e})=>{let t=(0,i.HG)();return!(0,n.Z)().isAuth&&t?(0,r.jsx)(l.x,{children:e}):e}},766948:(e,t,a)=>{"use strict";a.d(t,{Z:()=>eJ});var i,n,l,r,s,o,d,u=a(667294);a(167912);var c=a(616550),p=a(883119),g=a(78039),m=a(380222),h=a(233846),y=a(113474),_=a(79646),f=a(466068),x=a(593745),S=a(785893);function v({isTopRow:e,image:t}){return(0,S.jsxs)(p.zd,{height:e?217:168,wash:!0,width:e?236:117,children:[t.url&&(0,S.jsx)(p.Ee,{alt:t.alt||"",fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url}),!!t.price&&(0,S.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:t.price})]})}var w=a(19963),b=a(971518),k=a(586033),P=a(928362),T=a(611395),F=a(824014),I=a(824573);let E={container:{borderRadius:`${P.Oc}px ${P.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},j=({images:e,firstImageIndex:t})=>{let a=t+1,i=t+2;return(0,S.jsxs)(p.xu,{overflow:"hidden",rounding:4,children:[(0,S.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:E.content},children:e.at(t)?(0,S.jsx)(v,{image:e[t],isTopRow:!0}):null}),e.length>i?(0,S.jsxs)(p.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,S.jsx)(v,{image:e[a]}),(0,S.jsx)(v,{image:e[i]})]}):null]})};function R({dangerouslySetActionUrl:e,query:t,story:a,slotIndex:i}){let n,l,r,s,o,{logContextEvent:d}=(0,w.v)(),{action:c,id:g,objects:m,story_type:h,subtitle:y}=a,{text:_,url:f}=c||{},[x,v]=(0,u.useState)(!1),P=(0,u.useCallback)(()=>v(!0),[v]),R=(0,u.useCallback)(()=>v(!1),[v]),A=(m||[]).reduce((e,t)=>"pin"!==t.type?e:[...e,{domain:t.domain,image:{alt:t.title||t.description,height:t.images?.["474x"]?.height,url:t.images?.["474x"]?.url,width:t.images?.["474x"]?.width,price:(t.rich_summary?.products?.[0]||{}).offer_summary?.price}}],[]),C=(A[0]||{}).domain||void 0;["search_product_collage_story","shop_article_story"].includes(h)?(n=2,l=43,r={story_id:g,story_type:h,entered_query:t}):"shop_brand_story"===h||"shop_brand_affinity_story"===h?(n=1,l=92,C&&(r={story_type:h,commerce_data:JSON.stringify({domain:C})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(h)?(n=72,l=3050):"related_domain_collage"===h?(n=72,l=3455):"related_products_collage"===h&&(n=1,l=3177);let L=()=>d({event_type:101,element:372,component:200,view_type:n,view_parameter:l,aux_data:{story_type:h}}),Z=y?4:2;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(h)&&c){let e=c.user;s=e&&(e.image_medium_url||e.image_large_url),o=e&&e.full_name}let M=e||f;if(!M)return null;let D=(0,T.Z)({url:M})?"nofollow":"none";return(0,S.jsx)(k.F,{componentType:200,contextLogData:r||{},impressionType:"Story",loggingId:h,slotIndex:i,viewParameter:l,viewType:n,children:({impressionTrackerRef:e})=>(0,S.jsx)(p.xu,{ref:e,children:(0,S.jsx)(p.Tg,{href:M,onTap:L,rel:D,children:(0,S.jsxs)(p.xu,{dangerouslySetInlineStyle:{__style:E.container},onMouseEnter:P,onMouseLeave:R,overflow:"hidden",position:"relative",children:[(0,S.jsx)(j,{firstImageIndex:+!!["related_domain_collage","related_products_collage"].includes(h),images:A.map(({image:e})=>e)}),(0,S.jsx)(p.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:Z,rounding:"pill",children:(0,S.jsxs)(p.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[y?(0,S.jsx)(p.xu,{marginBottom:1,children:(0,S.jsx)(p.xv,{align:"start",color:"subtle",children:y.format})}):null,(0,S.jsx)(p.xv,{align:"start",weight:"bold",children:_})]})}),o&&s&&(0,S.jsx)(p.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,S.jsx)(b.qE,{name:o,outline:!0,size:"md",src:s})}),(0,S.jsx)(F.Z,{visibility:x?"visible":"none",children:(0,S.jsx)(I.Z,{additionalStyles:E.visualOverlay})})]})})})})}var A=a(51340),C=a(112800);let L=void 0!==i?i:i=a(307359),Z=()=>{(0,C.NC)("click_best_pin_board",!0)},M=()=>{(0,C.NC)("click_best_pin_profile",!0)},D=({pin:e})=>{let{pinner:t}=e,{username:a,fullName:i}=t??{},n=t?.imageMediumUrl||t?.imageSmallUrl,l=`/${a??""}/`;return(0,S.jsx)(p.Tg,{fullWidth:!1,href:l,onTap:M,rounding:"circle",children:(0,S.jsx)(b.qE,{name:i??"",outline:!0,size:"sm",src:n??""})})},K=({pin:e})=>{let t=(0,h.ZP)(),{board:a,pinner:i}=e,{name:n,privacy:l,url:r}=a??{},s=a?.entityId||"",{username:o,fullName:d}=i??{},u=`/${o??""}/`,c=(0,S.jsx)(p.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(p.rU,{display:"inlineBlock",href:u,onClick:M,underline:"hover",children:d})},d);return"protected"===l?(0,A.nk)(t.bt("Пользователь {{ pinnerName }} сохранил этот пин", "{{ pinnerName }} saved this Pin", "Showing who saved this pin, but not which board (private board), on closeup", undefined, true),{pinnerName:c}):(0,A.nk)(t.bt("Пользователь {{ pinnerName }} сохранил этот пин на доске «{{ boardName }}»", "{{ pinnerName }} saved to {{ boardName }}", "Showing who saved this pin to which board on closeup", undefined, true),{pinnerName:c,boardName:(0,S.jsx)(p.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(p.rU,{href:r??"",onClick:Z,children:n},"board")},s)})},O=({pinKey:e})=>{let t=(0,g.Z)(L,e);return(0,S.jsxs)(p.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,S.jsx)(D,{pin:t}),(0,S.jsx)(p.xu,{marginEnd:2}),(0,S.jsx)(p.xv,{size:"200",children:(0,S.jsx)(K,{pin:t})})]})},N=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="underline")},z=e=>{e.target&&e.target instanceof HTMLElement&&(e.target.style.textDecoration="none")};var $=a(219308);function H({pageType:e,pinCreditPrefix:t,pin:a,pinLink:i,viewParameter:n}){let l=(0,h.ZP)(),r=(0,$.Z)();if("topic"!==e.page&&(!a.domain||"Uploaded by user"===a.domain))return null;let s="topic"!==e.page||e.isAuth?"100":"200",o="topic"===e.page&&!!a.nativeCreator,d=o?a.nativeCreator?.fullName:a.domain;return(0,S.jsx)(p.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,S.jsx)(p.rU,{display:"inlineBlock",href:o?`/${a.nativeCreator?.username||""}/`:i,onClick:()=>{"topic"===e.page?(0,C.NC)("click_topic_best_pin_link"):r({event_type:12,view_type:3,object_id_str:a.entityId,component:85,view_parameter:n})},rel:"nofollow",target:"blank",underline:"hover",children:(0,S.jsx)(p.xv,{size:s,children:(0,A.nk)(l.bt("{{ pinCreditPrefix }} {{ pinCredit }}", "{{ pinCreditPrefix }} {{ pinCredit }}", "Tells the user where the pin is from in the form of \"Saved from <website>\"", undefined, true),{pinCreditPrefix:t,pinCredit:(0,S.jsx)(p.xv,{inline:!0,size:s,weight:"bold",children:"topic"!==e.page?(0,S.jsxs)("span",{"data-gestalt-valid-html":"Text",onBlur:z,onFocus:N,onMouseLeave:z,onMouseOver:N,children:[" ",a.domain]}):d},o?"creatorProfile":"pinLinkDomain")})})})})}var B=a(509228),U=a(139714),G=a(563651),W=a(859492),V=a(505077),Y=a(622809),q=a(740195),X=a(896403),Q=a(473357);let J=void 0!==n?n:n=a(330681);function ee({recipeKey:e}){let t=(0,g.Z)(J,e);if(t?.aggregateRating?.ratingValue&&t.aggregateRating.reviewCount){let e="number"==typeof t.cookTimes?.cook?.m&&"number"==typeof t.cookTimes.prep?.m?`${t.cookTimes.cook.m+t.cookTimes.prep.m} minutes \xb7 `:"";return(0,S.jsxs)(u.Fragment,{children:[(0,S.jsx)(Q.Z,{max_rating:t.aggregateRating.bestRating,rating:t.aggregateRating.ratingValue},t.aggregateRating.ratingValue),(0,S.jsx)(p.xv,{inline:!0,size:"200",children:` ${t.aggregateRating.reviewCount} \xb7 ${e}`})]})}return null}var et=a(174646);let ea=void 0!==l?l:l=a(886219),ei=e=>{let t=null;e.lastRepinDate&&(t=new Date(e.lastRepinDate));let a=null;return(e.createdAt&&(a=new Date(e.createdAt)),t)?a?t>a?t:a:t:a},en=e=>{let t="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return t;let a=ei(e);if(a&&a.getFullYear()===new Date().getFullYear()){let i=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:n}=e;i.has(n)&&(t=a?(0,S.jsx)(B.Z,{dateFormatType:B.k.LONG_MONTH_YEAR,useUTC:!1,value:a}):"")}return t},el=e=>!!(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished),er=(e,t)=>{let a=new Date((e.richMetadata??{}).article?.datePublished??Date.now()),i=a.getTime(),n=new Date().getTime();return null==t||n-i<=31536e6*t?(0,S.jsx)(B.Z,{dateFormatType:B.k.LONG_MONTH_YEAR,useUTC:!1,value:a}):""};function es(e){let{pinKey:t,viewportSize:a,pageType:i}=e,n=(0,g.Z)(ea,t),{pinCreditPrefix:l,pinLink:r}=(0,V.Z)(n),s=(0,Y.Z)(n),{description:o}=(0,W.eK)({richMetadataDescription:n.richMetadata?.description,richSummaryDisplayName:n.richSummary?.displayName,closeupUnifiedDescription:n.closeupUnifiedDescription});"videos_category"===i.page&&(o=(0,W.kt)(o,n.nativeCreator?.username||""));let d="wide"===a,u=(0,W.Ly)({pinTitle:n.title,gridTitle:n.gridTitle,richSummaryDisplayName:n.richSummary?.displayName??"",richMetadataTitle:n.richMetadata?.title??"",storyPinDataId:n.storyPinDataId,storyPinDataMetadataPinTitle:n.storyPinData?.metadata?.pinTitle,pinJoinVisualAnnotation:n.pinJoin?.visualAnnotation});(n.gridTitle||"").trim()&&u!==n.gridTitle&&(u=(0,W.EU)(n.gridTitle,200));let c=(0,G.r)(n.richMetadata?.recipe?.name,!!n.richMetadata?.recipe?.categorizedIngredients,n.richMetadata?.recipe?.fromAggregatedData??!1)?n.richMetadata?.recipe:null,m=el(n)&&er(n,2),h=en(n)||m,{isBot:y,isSocialBot:_}=(0,et.B)();return(0,S.jsx)(p.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,S.jsxs)(p.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,S.jsx)(H,{pageType:i,pin:{entityId:n.entityId,domain:n.domain||"",nativeCreator:n.nativeCreator&&{fullName:n.nativeCreator.fullName,username:n.nativeCreator.username}},pinCreditPrefix:"topic"===i.page&&n.nativeCreator?"Created by":l,pinLink:r??"",viewParameter:(0,q.Z)({hasPin:!0,hasPinRichMetadata:!!n.richMetadata,hasPinRichMetadataProducts:!!n.richMetadata?.products,hasPinRichMetadataArticle:!!n.richMetadata?.article,hasPinRichMetadataRecipe:!!n.richMetadata?.recipe,hasPinStoryPinData:!!n.storyPinData})}),(0,S.jsx)(p.kC,{direction:"row",justifyContent:"between",children:(0,S.jsx)(p.xu,{display:"flex",marginEnd:3*!d,marginTop:3*!!d,overflow:"hidden",children:u&&(0,S.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:600,fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:u})})}),h?(0,S.jsx)(p.xu,{marginTop:1,children:(0,S.jsx)(p.xv,{color:"subtle",children:h})}):null,o&&(0,S.jsx)(p.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,S.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[c&&(0,S.jsx)(ee,{recipeKey:c}),o]})}),c&&(0,S.jsx)(X.Z,{marginOverrides:c?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:c.categorizedIngredients,name:c.name,image:(0,U.Z)({imagesUrls:s,embedSrc:n.embed?.src,embedType:n.embed?.type,excludeOriginals:!y&&!_})}}}),(0,S.jsx)(p.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:(0,S.jsx)(O,{pinKey:n})})]})})}var eo=a(476943),ed=a(615071);let eu={nw:0,ne:90,se:180,sw:270},ec={ne:[7,-7],se:[7,7],sw:[-7,7],nw:[-7,-7]},ep={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},eg=(e,t,a,i)=>{if("rounded"!==i)return`translate(${t}, ${a}), rotate(${eu[e]})`;{let[i,n]=ec[e];return`translate(${t+i}, ${a+n}), rotate(${eu[e]})`}};function em({corner:e,x:t,y:a,size:i,cornerStyle:n}){return(0,S.jsxs)("g",{"data-test-id":`cropper-corner-${e}`,style:{cursor:ep[e],pointerEvents:"auto"},transform:eg(e,t,a,n),children:[(0,S.jsx)("rect",{className:`cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:i,stroke:"none",width:i,x:0,y:0}),"rounded"===n?(0,S.jsx)("path",{className:`cropperHandle ${e}`,d:"M16 0H24V8H16C11.5817 8 8 11.5817 8 16V24H0V16C0 7.16343 7.16345 0 16 0Z",fill:"#fff"}):(0,S.jsx)("path",{className:`cropperHandle ${e}`,d:`M ${i} 0 L 0 0 L 0 ${i}`,fill:"none",stroke:"#fff",strokeWidth:6})]})}let eh={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function ey({edge:e,x:t,y:a,w:i,h:n}){return(0,S.jsx)("rect",{className:`cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:n,stroke:"none",style:{cursor:eh[e],pointerEvents:"auto"},width:i,x:t,y:a})}function e_({x:e,y:t,w:a,h:i}){let n="rounded";return(0,S.jsxs)(u.Fragment,{children:[(0,S.jsx)(em,{corner:"nw",cornerStyle:n,size:20,x:e,y:t}),(0,S.jsx)(em,{corner:"ne",cornerStyle:n,size:20,x:e+a,y:t}),(0,S.jsx)(em,{corner:"sw",cornerStyle:n,size:20,x:e,y:t+i}),(0,S.jsx)(em,{corner:"se",cornerStyle:n,size:20,x:e+a,y:t+i}),(0,S.jsx)(ey,{edge:"n",h:30,w:Math.max(a-40,0),x:e+20,y:t-10}),(0,S.jsx)(ey,{edge:"e",h:Math.max(i-40,0),w:30,x:e+a-20,y:t+20}),(0,S.jsx)(ey,{edge:"s",h:30,w:Math.max(a-40,0),x:e+20,y:t+i-10}),(0,S.jsx)(ey,{edge:"w",h:Math.max(i-40,0),w:30,x:e-20,y:t+20})]})}var ef=a(50904),ex=a(984804),eS=a(970601),ev=a(755090),ew=a(836656);function eb(e){let{children:t,cropArea:a,imageSize:i,objectDetection:n,onChange:l,previewCropArea:r,showPreviewArea:s,viewParameter:o,viewType:d}=e,c=(0,$.Z)(),g=(0,u.useRef)(null),m=(0,u.useRef)(null),[h,y]=(0,u.useState)(0),[_,f]=(0,u.useState)(0),[x,v]=(0,u.useState)(0),[w,b]=(0,u.useState)(0),[k,P]=(0,u.useState)((0,ef.Z)({cropArea:a,imageSize:i})),[T,F]=(0,u.useState)(null),[I,E]=(0,u.useState)(null),[j,R]=(0,u.useState)(!1),[A,C]=(0,u.useState)(!1),L=e=>{e.preventDefault(),e.stopPropagation();let{clientX:t,clientY:a}=e,i=t-h,n=a-_;C(!1),v(i),b(n);let l=e.target,r=l.classList.contains("cropperHandle"),s="shadowMask"===l.id,o="cropSection"===l.id,d=l.id===ex.P,u=l.id===ew.I;r?(F("resize"),l.classList.contains("ne")?E("ne"):l.classList.contains("nw")?E("nw"):l.classList.contains("se")?E("se"):l.classList.contains("sw")?E("sw"):l.classList.contains("n")?E("n"):l.classList.contains("s")?E("s"):l.classList.contains("e")?E("e"):l.classList.contains("w")&&E("w")):s?(F("select"),P(eo.OI)):o?F("move"):(k.x<i&&i<k.x+k.w&&k.y<n&&n<k.y+k.h?F("move"):(F("select"),P(eo.OI)),R(d||u))},Z=e=>{if(!T)return;R(!1);let{clientX:t,clientY:a}=e,n=t-h,l=a-_;if("resize"===T){let e=Math.max(Math.min(n,(i.width??1)-eo.SP),eo.SP),t=Math.max(Math.min(l,(i.height??1)-eo.SP),eo.SP),{x:a,y:r,w:s,h:o}=k;switch(I){case"ne":e<a&&t>r+o?E("sw"):e<a?E("nw"):t>r+o&&E("se");break;case"nw":e>a+s&&t>r+o?E("se"):e>a+s?E("ne"):t>r+o&&E("sw");break;case"se":e<a&&t<r?E("nw"):e<a?E("sw"):t<r&&E("ne");break;case"sw":e>a+s&&t<r?E("ne"):e>a+s?E("se"):t<r&&E("nw");break;case"n":t>r+o&&E("s");break;case"s":t<r&&E("n");break;case"e":e<a&&E("w");break;case"w":e>a+s&&E("e")}switch(I){case"ne":P(({x:a,y:i,h:n})=>{let l=Math.max(e-a,eo.xZ),r=Math.max(n+(i-t),eo.xZ);return{x:a,y:r<=eo.xZ?i:t,w:l,h:r}});break;case"nw":P(({x:a,y:i,w:n,h:l})=>{let r=Math.max(n+(a-e),eo.xZ),s=Math.max(l+(i-t),eo.xZ);return{x:r===eo.xZ?a:e,y:s===eo.xZ?i:t,w:r,h:s}});break;case"se":P(({x:a,y:i})=>{let n=Math.max(e-a,eo.xZ),l=Math.max(t-i,eo.xZ);return{x:a,y:i,w:n,h:l}});break;case"sw":P(({x:a,y:i,w:n})=>{let l=Math.max(n+(a-e),eo.xZ),r=Math.max(t-i,eo.xZ);return{x:l===eo.xZ?a:e,y:i,w:l,h:r}});break;case"n":P(({x:e,y:a,w:i,h:n})=>{let l=Math.max(a-t+n,eo.xZ);return{x:e,y:l===eo.xZ?a:t,w:i,h:l}});break;case"s":P(({x:e,y:a,w:i})=>{let n=Math.max(t-a,eo.xZ);return{x:e,y:a,w:i,h:n}});break;case"e":P(({x:t,y:a,h:i})=>{let n=Math.max(e-t,eo.xZ);return{x:t,y:a,w:n,h:i}});break;case"w":P(({x:t,y:a,w:i,h:n})=>{let l=Math.max(i-e+t,eo.xZ);return{x:l===eo.xZ?t:e,y:a,w:l,h:n}})}}else if("move"===T){let e=n-x,t=l-w,a=Math.max(Math.min(k.x+e,(i.width??1)-k.w-eo.SP),eo.SP),r=Math.max(Math.min(k.y+t,(i.height??1)-k.h-eo.SP),eo.SP);v(n),b(l),P(({w:e,h:t})=>({x:a,y:r,w:e,h:t}))}else if("select"===T){let e=Math.max(Math.min(n,i.width??1),0),t=Math.max(Math.min(l,i.height??1),0);P({x:Math.min(x,e),y:Math.min(w,t),w:Math.abs(e-x),h:Math.abs(t-w)})}},M=()=>{if(F(null),E(null),R(!1),T){if(j&&"dots"===n)return void C(!0);if(0===k.w&&0===k.h)l({cropArea:{x:eo.SP,y:eo.SP,w:(i.width??1)-2*eo.SP,h:(i.height??1)-2*eo.SP},cropSource:5}),c({event_type:16586,view_type:d,view_parameter:o});else{let e,t,a=Math.max(Math.min(k.x,(i.width??1)-eo.xZ-eo.SP),eo.SP),n=Math.max(Math.min(k.y,(i.height??1)-eo.xZ-eo.SP),eo.SP);e=k.h<eo.xZ?eo.xZ:n+k.h>(i.height??1)-eo.SP?(i.height??1)-n-eo.SP:k.h,t=k.w<eo.xZ?eo.xZ:a+k.w>(i.width??1)-eo.SP?(i.width??1)-a-eo.SP:k.w,"move"===T?c({event_type:7603,view_type:d,view_parameter:o}):"resize"===T?c({event_type:7604,view_type:d,view_parameter:o}):"select"===T&&c({event_type:16584,view_type:d,view_parameter:o}),l({cropArea:{x:a,y:n,w:t,h:e},cropSource:6})}}};return(0,ev.Z)(()=>{if(m.current){let{x:e,y:t}=m.current.getBoundingClientRect();y(e),f(t)}}),(0,u.useEffect)(()=>{A&&P(a??eo.OI)},[a,A]),(0,u.useEffect)(()=>{let e=m.current;return e&&(e.addEventListener("mousedown",L),window.addEventListener("mousemove",Z),window.addEventListener("mouseup",M)),()=>{e&&(e.removeEventListener("mousedown",L),window.removeEventListener("mousemove",Z),window.removeEventListener("mouseup",M))}}),(0,S.jsxs)(p.xu,{ref:m,dangerouslySetInlineStyle:{__style:{cursor:"crosshair"}},"data-test-id":"visual-search-cropper",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:[(0,S.jsx)(eS.Z,{unsafeCSS:eo.iC}),(0,S.jsxs)("svg",{"data-gestalt-valid-html":"Box",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:[(0,S.jsx)("defs",{children:(0,S.jsxs)("mask",{id:"Mask",children:[(0,S.jsx)("rect",{fill:"white",height:i.height??"100%",rx:"0",ry:"0",width:i.width??"100%",x:"0",y:"0"}),(0,S.jsx)("rect",{height:k.h,id:"hole",rx:0,ry:0,width:k.w,x:k.x,y:k.y},`${k.x}${k.y}`),(0,S.jsx)(ed.Z,{classNames:"preview-crop-area",in:s&&!T,mountOnEnter:!0,nodeRef:g,timeout:300,unmountOnExit:!0,children:(0,S.jsx)(p.xu,{ref:g,children:(0,S.jsx)("rect",{height:r.h,id:"preview",rx:4,ry:4,width:r.w,x:r.x,y:r.y},`${r.x}${r.y}`)})})]})}),(0,S.jsx)("rect",{fill:"rgba(0,0,0,0.5)",height:"100%",id:"shadowMask",mask:"url(#Mask)",width:"100%",x:"0",y:"0"}),(0,S.jsx)("use",{className:"v2cropSection","data-test-id":"cropper-section",fill:"rgba(0,0,0,0)",href:"#hole",id:"cropSection",stroke:"white",strokeWidth:"2",style:{cursor:"move"}})]}),t,(0,S.jsx)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:"select"!==T&&(0,S.jsx)(e_,{h:k.h,w:k.w,x:k.x,y:k.y})})]})}var ek=a(187963),eP=a(830073),eT=a(859075),eF=a(850610),eI=a(595818);let eE=void 0!==r?r:r=a(551973);function ej({cropArea:e,customCropper:t,imageSignature:a,imageSize:i,pinKey:n,showAnimation:l,trafficSource:r,viewParameter:s,viewType:o}){let d=(0,g.Z)(eE,n),[c,p]=(0,u.useState)("none"),[m,h]=(0,u.useState)(!1),[y,_]=(0,u.useState)({x:0,y:0,w:0,h:0}),[f,x]=(0,u.useState)({isCropAreaOnDotArea:!1,indexToHide:-1}),{indexToHide:v}=f,w=(0,u.useMemo)(()=>(d.visualObjects??[]).filter(e=>e.isStela).map(eI.Z),[d.visualObjects]);return(0,u.useEffect)(()=>{let t=w&&!!w.length,a=(0,eT.Z)({cropArea:e,scaledHeight:i.height??0,scaledWidth:i.width??0});t&&(p("dots"),x((0,eP.Z)(w,a)))},[e,i.height,i.width,w]),(0,S.jsx)(eb,{cropArea:e,imageSize:i,objectDetection:c,onChange:t,previewCropArea:y,showPreviewArea:!1,viewParameter:s,viewType:o,children:"dots"===c&&(0,S.jsx)(ek.Z,{currentSpotlightIdx:v,handleSpotlightClick:e=>{let{x:a,y:n,w:l,h:s,title:o}=w[e];t({cropArea:(0,eF.Z)({cropArea:{x:a,y:n,w:l,h:s},scaledHeight:i.height??0,scaledWidth:i.width??0}),cropSource:4,trafficSource:r,title:o||""})},handleSpotlightHover:e=>{if(e===v)return;let{x:t,y:a,w:n,h:l}=w[e];_((0,eF.Z)({cropArea:{x:t,y:a,w:n,h:l},scaledWidth:i.width??0,scaledHeight:i.height??0})),h(!0)},handleSpotlightUnhover:()=>{h(!1)},imageSignature:a,imageSize:i,pinKey:d,showAnimation:l,viewParameter:s,viewType:o})},JSON.stringify(e))}var eR=a(890360),eA=a(779561),eC=a(5112),eL=a(677316),eZ=a(740607),eM=a(857147),eD=a(476151),eK=a(555587),eO=a(140042),eN=a(824879),ez=a(1854);let e$=0,eH="",eB=void 0!==s?s:s=a(718931);function eU(e){let{imageSpec_564x:t,imageSpec_orig:a,imageSignature:i}=e,n=t&&a,{url:l}=n??{},r=n?.width??1,s=n?.height??void 0;return"number"==typeof r&&"number"==typeof s&&r>564&&(s*=564/r,r=564),{width:r,height:s,url:l,imageSignature:i}}let eG=({data:e,index:t,viewParameter:a,productsURL:i})=>{switch(e.type){case"pin":return(0,S.jsx)(eO.ZP,{duploQueryRef:null,pinId:e.id,slotIndex:t,viewParameter:a,viewType:72});case"story":return i&&(0,S.jsx)(R,{dangerouslySetActionUrl:i,slotIndex:t,story:e});default:return null}},eW=({resourceOptions:e})=>{let t=(0,h.ZP)(),{data:a,isAtEnd:i,isFetching:n,fetchMore:l}=(0,y.Z)({name:"VisualLiveSearchResource",options:e}),r=(0,c.TH)(),s=`${r.pathname}products/${r.search}`;return(0,S.jsxs)(u.Fragment,{children:[a&&(0,S.jsx)(ez.Z,{customLayoutType:"desktopFlashlight",feedItems:a.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:l,hasNext:i,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>eG({data:e,index:t,viewParameter:3050,productsURL:s})}),(0,S.jsx)(p.xH,{accessibilityLabel:t.bt("Загрузка результатов визуального поиска…", "Loading visual search results...", "unauthDesktopVisualSearch.flashlightFeed.loading", undefined, true),show:n})]})},eV=({resourceOptions:e})=>{let t=(0,h.ZP)(),{data:a,isAtEnd:i,isFetching:n,fetchMore:l}=(0,y.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,S.jsxs)(u.Fragment,{children:[a&&(0,S.jsx)(ez.Z,{customLayoutType:"desktopFlashlight",feedItems:a||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:l,hasNext:i,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>eG({data:e,index:t,viewParameter:3334})}),(0,S.jsx)(p.xH,{accessibilityLabel:t.bt("Загрузка результатов визуального поиска товаров…", "Loading visual search product results...", "unauthDesktopVisualSearch.flashlightProductFeed.loading", undefined, true),show:n})]})};function eY({pinKey:e}){let t=(0,h.ZP)(),{isRTL:a}=(0,et.B)(),i=(0,$.Z)(),n=(0,c.k6)(),l=(0,c.TH)(),r=(0,u.useRef)(null),s=(0,c.$B)(),o=(0,eL.Z)(),{pinId:d}=(0,_.Z)(s.params.id||""),m=(0,eM.mB)(l.search),y=(0,x.Z)(l),v=function(e){let t=parseInt(e??"",10);switch(t){case 1:case 2:case 3:case 4:case 5:case 6:return t;default:return}}(m.cropSource),w=(0,eR.hd)(l),b=(0,g.Z)(eB,e),{getNormalizedPinImage:k}=(0,eA.Z)({pinKey:b});if((0,u.useEffect)(()=>{if(!y&&b){let{width:e,height:t}=k(),a=(0,eK.Z)({cropArea:{h:t-2*eo.SP,w:e-2*eo.SP,x:eo.SP,y:eo.SP},isProductPage:w,pinId:d,surfaceType:"flashlight"});n.replace(a)}},[k,n,y,w,b,d]),(0,ev.Z)(()=>{i({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:d}})}),(0,u.useEffect)(()=>{let e=r.current;return e&&eH===d&&(e.scrollTop=e$),()=>{e&&(e$=e.scrollTop,eH=d)}}),!b)return(0,S.jsx)(eC.Z,{objectId:"",view:72,children:(0,S.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{top:eZ.Pw}},position:"relative",children:(0,S.jsx)(p.xH,{accessibilityLabel:t.bt("Загрузка данных о пине", "Loading Pin data", "unauthDesktopFlashlightPage.loadingPinData", undefined, true),show:!0})})});let{imageSignature:P,description:T}=b,{width:F,height:I,url:E}=eU(b),j=function({initialCropArea:e,pin:t}){let a;if(e)a={...e};else{let{visualObjects:e}=t,{width:i=1,height:n=1}=eU(t);if(e&&e.length){let{x:t,y:l,w:r,h:s}=e[0];a=(0,eF.Z)({cropArea:{x:t,y:l,w:r,h:s},scaledWidth:i,scaledHeight:n})}else{let[e,t]=[i/6,n/6],[l,r]=[i-2*e,n-2*t];a={x:e,y:t,w:l,h:r}}}return{x:Math.floor(a.x??0),y:Math.floor(a.y??0),w:Math.floor(a.w??0),h:Math.floor(a.h??0)}}({initialCropArea:y,pin:b}),R=l.state&&l.state.internalNavigation,A=F+f.n,C=(A??1)+24,L={pin_id:d,imageSignature:P,crop:(0,eT.Z)({cropArea:j,scaledWidth:F,scaledHeight:I}),crop_source:v||5},Z={__style:{top:140}};return(0,S.jsx)(eC.Z,{objectId:"",view:72,children:(0,S.jsxs)(u.Fragment,{children:[(0,S.jsxs)(p.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{top:80}},display:"flex",height:60,position:"fixed",width:"100%",zIndex:new p.Ry(4),children:[(0,S.jsx)(p.xu,{left:!0,position:"absolute",children:(0,S.jsx)(eN.Z,{})}),(0,S.jsx)(p.xu,{flex:"grow",children:(0,S.jsx)(p.X6,{align:"center",size:"400",children:w?t.bt("Приобретайте похожие позиции", "Shop similar items", "unauthDesktopFlashlightPage.flashlightProductsFeed.header", undefined, true):t.bt("Визуально похожие результаты", "Visually similar results", "unauthDesktopFlashlightPage.flashlightFeed.header", undefined, true)})})]}),w?(0,S.jsx)(p.xu,{dangerouslySetInlineStyle:Z,position:"relative",children:(0,S.jsx)(eV,{resourceOptions:L})}):(0,S.jsxs)(p.xu,{display:"flex",paddingX:12,children:[(0,S.jsxs)(p.xu,{ref:r,dangerouslySetInlineStyle:Z,height:"calc(100% - 140px)",marginEnd:3,marginStart:3,overflow:"auto",position:"fixed",width:A,zIndex:new p.Ry(4),children:[(0,S.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{width:F,height:I}},"data-test-id":"flashlight-enabled-image",children:(0,S.jsxs)(p.zd,{height:I,rounding:2,width:F,children:[E&&(0,S.jsx)(p.Ee,{alt:T??"",naturalHeight:I??1,naturalWidth:F??1,src:E}),(0,S.jsx)(ej,{cropArea:j,customCropper:function({cropArea:e,cropSource:t}){let a=window.location.pathname+window.location.search,i=(0,eK.Z)({cropArea:e,cropSource:t??6,isProductPage:w,pinId:d,surfaceType:"flashlight"});o({action:"trigger",item:"cropper-changed",within:"flashlight-page"}),i!==a&&d&&n.replace({pathname:`/pin/${d}/visual-search/`,search:(0,eD.Z)({cropArea:e,cropSource:t??6,surfaceType:"flashlight"}),state:{internalNavigation:!0}})},imageSignature:P??void 0,imageSize:{height:I,width:F},pinKey:b,showAnimation:!R,surfaceType:"flashlight",viewParameter:3050,viewType:72})]})}),(0,S.jsx)(p.xu,{"data-test-id":"closeupDescription",direction:"column",display:"flex",margin:5,maxWidth:F??1,position:"relative",children:(0,S.jsx)(es,{pageType:{isAuth:!1,page:"flashlight"},pinKey:b,viewportSize:"narrow"})})]}),(0,S.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{...Z.__style,...a?{marginRight:`${C}px`}:{marginLeft:`${C}px`}}},position:"relative",width:"100%",children:(0,S.jsx)(eW,{resourceOptions:L})})]})]})})}let eq=void 0!==o?o:o=a(870688),eX=void 0!==d?d:d=a(586903);function eQ(){let e=(0,c.$B)(),{pinId:t}=(0,_.Z)(e.params.id||""),a=(0,m.Z)({strategy:"LEGACY",query:eX,variables:{pinId:t},useGetLegacyData:({pinId:e})=>(0,y.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}}).data}),i=a?.v3GetPinQuery?.__typename==="V3GetPin"?a.v3GetPinQuery.data:null,n=(0,g.Z)(eq,i);return(0,S.jsx)(eY,{pinKey:n})}function eJ(){let e=(0,h.ZP)();return(0,S.jsx)(u.Suspense,{fallback:(0,S.jsx)(p.xH,{accessibilityLabel:e.bt("Загрузка данных о пине", "Loading Pin data", "unauthDesktopFlashlightPage.loadingPinData", undefined, true),show:!0}),children:(0,S.jsx)(eQ,{})})}},51753:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var i=a(667294),n=a(718369),l=a(316886),r=a(196965),s=a(785893);class o extends i.Component{componentDidMount(){let{setCurrentPageData:e,viewData:t,viewParameter:a,viewType:i}=this.props;e({viewData:t,viewParameter:a,viewType:i})}componentDidUpdate(e){let{setCurrentPageData:t,viewData:a,viewParameter:i,viewType:n}=this.props;i===e.viewParameter&&n===e.viewType&&(0,l.ZP)(a,e.viewData)||t({viewData:a,viewParameter:i,viewType:n})}componentWillUnmount(){this.props.clearCurrentPageData()}render(){let{auxData:e,children:t,component:a,objectIdStr:i,viewData:n,viewParameter:l,viewType:o,clientTrackingParams:d}=this.props;return(0,s.jsx)(r.Z,{auxData:e,clientTrackingParams:d,component:a,objectIdStr:i,viewData:n,viewParameter:l,viewType:o,children:t})}}function d(e){let{setViewContextData:t,clearViewContextData:a}=(0,n.sV)();return(0,s.jsx)(o,{...e,clearCurrentPageData:a,setCurrentPageData:t})}},196965:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(667294),n=a(219308),l=a(112800);let r=e=>Object.keys(e).reduce((t,a)=>(void 0===e[a]&&delete t[a],t),{...e}),s=({viewType:e,viewParameter:t,viewData:a,auxData:i,objectIdStr:n,component:s,clientTrackingParams:o,element:d},u)=>{let c=r({event_type:13,view_type:e,view_parameter:t,view_data:a,aux_data:i,object_id_str:n,component:s,clientTrackingParams:o,element:d});-1===Object.keys(c).indexOf("view_type")&&(0,l.My)("mweb.logging.null_view_type"),u(c)};function o(e){let{auxData:t,clientTrackingParams:a,children:l,component:r,element:o,objectIdStr:d,viewData:u,viewParameter:c,viewType:p}=e,g=(0,n.Z)(),m=JSON.stringify(t),h=JSON.stringify(u);return(0,i.useEffect)(()=>{s(e,g)},[g,m,a,r,o,d,h,c,p]),i.Children.only(l)}},132280:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var i=a(667294),n=a(883119),l=a(283737),r=a(19963),s=a(174646),o=a(538645),d=a(93002),u=a(785893);function c({auxData:e,children:t,collapseButtonElementType:a,collapseByDefault:c=!0,componentType:p,displayViewState:g,expandButtonElementType:m,forceTappableHeader:h,headerHeight:y,headerPaddingRight:_,headerPreview:f,heading:x,surface:S,viewParameter:v,viewType:w}){let b=(0,o.HG)(),{isBot:k}=(0,s.B)(),{logContextEvent:P}=(0,r.v)(),{setIsShoppingModuleExpanded:T}=(0,d.x4)(),F=(0,i.useRef)(null),[I,E]=(0,i.useState)(void 0),[j,R]=(0,i.useState)(!k&&c||[1,2].includes(g));return(0,i.useEffect)(()=>{F.current&&E(F.current.scrollHeight+parseInt(window.getComputedStyle(F.current?.firstElementChild).marginTop,10))},[F]),(0,i.useEffect)(()=>{T&&T(!j)},[]),(0,u.jsxs)(n.kC,{dataTestId:"collapsible-layout",direction:"column",gap:4*!b,children:[(0,u.jsx)(l.Z,{collapsed:j,displayViewState:g,forceTappableHeader:h,headerHeight:y,headerPaddingRight:_,headerPreview:f,heading:x,onClick:()=>{R(!j),T&&T(j),P({aux_data:e,component:p,element:j?m:a,event_type:b?101:102,view_parameter:v,view_type:w})},showArrow:!0,surface:S}),b?(0,u.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transition:"height 600ms cubic-bezier(.25,1,.5,1)"}},"data-test-id":`collapsible-layout-content-${j?"collapsed":"expanded"}`,height:j?"0px":`${I}px`,marginBottom:j?void 0:1,overflow:"hidden",children:(0,u.jsx)(n.xu,{ref:F,children:t})}):!j&&(0,u.jsx)(n.xu,{children:t})]})}},152212:(e,t,a)=>{"use strict";a.d(t,{Z:()=>j});var i=a(667294),n=a(883119),l=a(484465),r=a(233846),s=a(685402),o=a(857656),d=a(349057),u=a(174646),c=a(169650),p=a(538645),g=a(755090),m=a(218216),h=a(785893);function y({children:e,isImagePinForUnauthOnTablet:t}){let{isAuthenticated:a}=(0,u.B)();return(0,h.jsxs)(n.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"pointer",width:t?"40vw":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!t||void 0,top:!0,zIndex:a?void 0:m.eu,children:[(0,h.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",borderRadius:"6px 6px 0 0",WebkitTransition:"opacity .04s linear",transition:"opacity .04s linear"}},left:!0,opacity:.4,position:"absolute",right:!0,top:!0}),e]})}var _=a(545007),f=a(80421),x=a(967312),S=a(676620),v=a(112800),w=a(677316),b=a(34632);function k({setShowClickthroughOverlay:e,isEligibleForPdp:t,isEligibleForDesktopSocialInviteOverlay:a,inviterFirstName:l}){let s=(0,r.ZP)(),o=(0,w.Z)(),d=(0,S.Z)(),u=(0,i.useRef)(null),c="desktop"===(0,p.ZP)(),g=l&&a,m=g&&(s.bt("Зарегистрируйтесь, чтобы присоединиться к {{ name }} в Pinterest", "Sign up to join {{ name }} on Pinterest", "pin.closeup.wash.desktop.shareNotification", undefined, true)).replace("{{ name }}",l),y=s.bt("Нажмите, чтобы использовать эту идею максимально эффективно с бесплатным аккаунтом", "Click to make the most out of this idea with a free account", "web.unauth.plp.clickable_wash.header", undefined, true),k=s.bt("Нажмите, чтобы использовать эту идею максимально эффективно с бесплатным аккаунтом", "Tap to make the most out of this idea with a free account", "mweb.unauth.plp.clickable_wash.header", undefined, true),P=(0,_.I0)(),{checkExperiment:T}=(0,x.F)(),F=(0,f.g)();return(0,h.jsx)(n.iP,{onMouseEnter:()=>{g&&(0,v.My)("dweb.main_pin.social.wash.view"),(0,v.My)("dweb.pin.wash.view")},onMouseLeave:()=>{g?o({action:"dismiss",item:"main-pin-social-wash"}):o({action:"dismiss",item:"main-pin-wash"})},onTap:({event:e})=>{c&&(e.preventDefault(),o({action:"click",item:"pin-image"}),a&&l&&o({action:"click",item:"main-pin-social-wash"}),o({action:"click",item:"main-pin-image-signup-modal"}),T("dweb_upsell_manager_redux").anyEnabled?P((0,b.QA)()):["enabled_all_improved","enabled_all","enabled_pin_wash"].includes(T("dweb_signup_to_login_modal_q2_push").group)?F?.showDesktopSignupModal({signupFlow:{type:"login"},attributionLabel:"click_closeup",container:"pinWash",reason:"UPSELL_LOGIN_OR_SIGNUP"}):d({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"click_closeup",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}}),t&&o({action:"click",item:"pdp-pin-image"}))},children:(0,h.jsxs)(n.xu,{zIndex:new n.Ry(2),children:[(0,h.jsx)(n.xu,{ref:u,alignItems:"center",bottom:!0,"data-test-id":"main-pin-hover-overlay",direction:"column",display:"flex",height:"100%",justifyContent:a?"center":void 0,left:!0,position:"absolute",right:!0,top:!0,width:"100%",children:(0,h.jsx)(n.xu,{alignItems:"center",direction:"column",display:"flex",maxWidth:240,paddingY:10,children:(0,h.jsx)(n.xu,{marginTop:8,children:(0,h.jsx)(n.X6,{align:"center",color:"light",size:g?"600":"400",children:c?m||y:k})})})}),!c&&(0,h.jsx)(n.xu,{marginEnd:4,marginTop:4,position:"absolute",right:!0,top:!0,children:(0,h.jsx)(n.hU,{accessibilityLabel:s.bt("Кнопка «Закрыть пин»", "Close pin clickable wash", "mweb.unauth.plp.clickable_wash.close_button", undefined, true),icon:"cancel",iconColor:"white",onClick:({event:t})=>{t.stopPropagation(),e&&(e(!1),o({action:"dismiss",item:"main-pin-hover-overlay"}))},size:"md"})})]})})}var P=a(981261),T=a(384536),F=a(200559),I=a(992114),E=a(57797);let j=e=>{let t=(0,r.ZP)(),{alt:a,clickthroughOverlayOptions:m,color:_,isFlashlightPage:f,naturalHeight:x,naturalWidth:S,placeholder:v,pwtElementTimingId:w,pwtSurfaceContext:b,setShowClickthroughOverlay:j,showSpinner:R,src:A,stickyFooter:C,isEligibleForPdp:L}=e,Z=!(0,s.b)(),{isAuthenticated:M}=(0,u.B)(),D=(0,p.ZP)(),K=(0,i.useRef)(null),O=(0,P.Z)({skipExpActivation:!0}),N=(0,i.useRef)(!1),{mWebCloseupRedesignEnabled:z}=(0,l.Z)(),[$,H]=(0,i.useState)(!Z||!!A&&!!v&&v===A),B=(0,i.useRef)(""),U=()=>{(0,d.Nx)("PinPageMainImageRendered"),b&&b.markConstraintComplete("PinPageMainImageRendered"),N.current||((0,I.nP)("mweb.closeup.closeup_image.load"),N.current=!0)};(0,i.useEffect)(()=>{let e=new Image;e.onload=()=>H(!0),e.src=A},[]);let G=(0,i.useRef)((0,F.u)()?.setHasScrolledPastMainContent);(0,i.useEffect)(()=>{let e=(0,c.Z)(()=>{if(K.current){let t=window.scrollY>K.current.offsetTop+K.current.offsetHeight;G.current?.(t),t&&window.removeEventListener("scroll",e)}},10);window.addEventListener("scroll",e)},[]),(0,g.Z)(()=>{A||(0,I.nP)("mweb.closeup.closeup_image.no_image_url"),(0===x||0===S)&&(0,I.nP)("mweb.closeup.closeup_image.invalid_dimensions")});let W=!f&&"tablet"===D,V=Z?(0,h.jsx)(o.Z,{alt:a,color:_,elementTiming:w,naturalHeight:x,naturalWidth:S,onLoad:U,src:v}):null,Y=T.Hg;return(f||"phone"===D||O)&&(Y="100%"),(0,h.jsx)(E.Z,{metricName:"CloseupImage",children:(0,h.jsxs)(n.xu,{ref:K,"data-test-id":"pin-closeup-image",maxHeight:"100%",maxWidth:"tablet"===D?T.g6:void 0,minHeight:"auto",overflow:C?void 0:"hidden",position:"relative",rounding:6*(!f&&"phone"!==D),width:Y,children:[!M&&m&&(0,h.jsx)(y,{isImagePinForUnauthOnTablet:!1,children:(0,h.jsx)(k,{inviterFirstName:B.current,isEligibleForPdp:L,setShowClickthroughOverlay:j})}),V&&(W?(0,h.jsx)(n.xu,{overflow:"hidden",rounding:6,children:V}):V),(0,h.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:+!!$,transition:$&&"desktop"!==D?"opacity .5s ease-in-out":void 0,backgroundColor:_}},left:!0,overflow:W?"hidden":void 0,position:Z?"absolute":"relative",right:!0,rounding:W?6:5,top:!0,children:Z?(0,h.jsx)(n.Ee,{alt:a,fetchPriority:z?"high":void 0,naturalHeight:x,naturalWidth:S,role:z?"img":void 0,src:A}):(0,h.jsx)(o.Z,{alt:a,color:_,elementTiming:w,fetchPriority:z?"high":void 0,naturalHeight:x,naturalWidth:S,onLoad:U,src:A})}),R&&(0,h.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:+!$,transition:$?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!$&&(0,h.jsx)(n.kC,{alignItems:"center",justifyContent:"start",children:(0,h.jsx)(n.xH,{accessibilityLabel:t.bt("Загрузка изображения…", "Loading image", "Loading higher resolution image", undefined, true),show:!0})})}),C]})})}},981261:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(967312),n=a(174646),l=a(538645);let r=({skipExpActivation:e=!1})=>{let{checkExperiment:t}=(0,i.F)(),a=(0,l.HG)(),{isBot:r,isAuthenticated:s}=(0,n.B)();return!s&&!!a&&a&&!r&&t("unauth_dweb_closeup_redesign",{dangerouslySkipActivation:e}).anyEnabled}},607233:(e,t,a)=>{"use strict";a.d(t,{G9:()=>r,SY:()=>o,kk:()=>l,mb:()=>d,s:()=>s});var i=a(56063),n=a(68707);let l=({isDesktop:e})=>{let t=(0,n.Z)({isDesktop:e});return t?-t:0},r=-2,s=({trafficSource:e,deviceType:t,experimentalGutter:a})=>{let n=a??4*i.jC;return"desktop"===t?n:"board"===e?4:void 0},o=({deviceType:e,customMWebColumnWidth:t,experimentalColumnWidth:a})=>{let n=a??i.yF;return"desktop"===e?n:t||200},d=({gutterWidth:e,itemWidth:t,className:a,minColumns:n=i.yc,maxColumns:l=i.g5})=>{let r=t+e;return Array.from({length:l+1-n},(e,t)=>t+n).map(t=>({minWidth:t===n?0:t*r,maxWidth:t===l?null:(t+1)*r-1,styles:`
      .${a} {
        max-width: ${t*r-e}px;
      }
      `})).map(({minWidth:e,maxWidth:t,styles:a})=>`
    @media (min-width: ${e}px) ${t?`and (max-width: ${t}px)`:""} {
      ${a}
    }
  `).join("")}},415042:(e,t,a)=>{"use strict";a.d(t,{D:()=>o,x:()=>s});var i=a(667294),n=a(112800),l=a(785893);let r=(0,i.createContext)(()=>{}),s=({children:e})=>{let[t,a]=(0,i.useState)(null),s=(0,i.useCallback)(e=>{(0,n.My)("dweb.unauth.context_menu.open_menu"),a(e)},[]),o=!!t;return(0,i.useEffect)(()=>{let e=()=>{a(null),(0,n.My)("dweb.unauth.context_menu.click_away")};return o&&document.addEventListener("click",e),()=>{o&&document.removeEventListener("click",e)}},[o]),(0,l.jsx)(r,{value:s,children:(0,l.jsxs)(i.Fragment,{children:[e,t]})})},o=()=>(0,i.useContext)(r)},384536:(e,t,a)=>{"use strict";a.d(t,{$K:()=>r,Hg:()=>n,g6:()=>l,w6:()=>i});let i=(e,t)=>Array.from({length:t-e},(t,a)=>a+e),n=508,l=600;function r(e){return null!=e}},862173:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var i=a(667294),n=a(883119),l=a(56063),r=a(970601),s=a(538645),o=a(9930),d=a(785893);let u="PinGridSkeletonLoader__tall",c="PinGridSkeletonLoader__short",p=({size:e})=>(0,d.jsx)(n.xu,{padding:1,children:(0,d.jsx)("div",{className:"tall"===e?u:c})}),g=({children:e})=>(0,d.jsx)(n.kC,{direction:"column",gap:{row:0,column:2},children:e}),m=({partialViewportWidth:e})=>{let t="desktop"===(0,s.ZP)(),a=t?l.yF:l.tG;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(r.Z,{unsafeCSS:[{name:u,height:250},{name:c,height:150}].map(({name:e,height:t})=>(0,o.Z)({name:e,width:a,height:t})).join("")}),(0,d.jsx)(n.xu,{"data-test-id":"pin-grid-skeleton-loader",marginEnd:l.qG,marginStart:l.qG,children:t?(0,d.jsxs)(n.kC,{direction:"row",gap:{row:l.jC,column:0},children:[(0,d.jsx)(g,{children:(0,d.jsx)(p,{size:"tall"})}),(0,d.jsx)(g,{children:(0,d.jsx)(p,{size:"short"})}),(0,d.jsx)(g,{children:(0,d.jsx)(p,{size:"tall"})}),!e&&(0,d.jsx)(g,{children:(0,d.jsx)(p,{size:"short"})})]}):(0,d.jsxs)(n.kC,{direction:"row",justifyContent:"center",overflow:"hidden",children:[(0,d.jsxs)(g,{children:[(0,d.jsx)(p,{size:"tall"}),(0,d.jsx)(p,{size:"short"}),(0,d.jsx)(p,{size:"tall"})]}),(0,d.jsxs)(g,{children:[(0,d.jsx)(p,{size:"short"}),(0,d.jsx)(p,{size:"tall"}),(0,d.jsx)(p,{size:"short"}),(0,d.jsx)(p,{size:"tall"})]})]})})]})}},9930:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=({name:e,width:t,height:a})=>{let i=`${t}${"number"==typeof t?"px":""}`,n=`${a}${"number"==typeof a?"px":""}`,l="number"==typeof t?t:236;return`
.${e} {
  -webkit-animation-duration: 1s;
  -webkit-animation-fill-mode: forwards;
  -webkit-animation-iteration-count: infinite;
  -webkit-animation-name: ${e}_placeHolderShimmer;
  -webkit-animation-timing-function: linear;
  border-radius: 16px;
  background: #f6f7f9;
  background-image: linear-gradient(to right, #f6f7f9 0%, #e9ebee 20%, #f6f7f9 40%, #f6f7f9 100%);
  background-repeat: no-repeat;
  background-size: ${l} ${n};
  width: ${i};
  height: ${n};
}

@keyframes ${e}_placeHolderShimmer{
  0% {
      background-position: -${l}px 0;
  }
  100% {
      background-position: ${l}px 0;
  }
}
`}},179185:(e,t,a)=>{"use strict";a.d(t,{Z:()=>eC});var i,n,l,r,s,o,d,u,c,p,g=a(667294);a(167912);var m=a(616550),h=a(883119),y=a(95460),_=a(78039),f=a(380222),x=a(233846),S=a(25402),v=a(810139),w=a(79646),b=a(352437),k=a(593745),P=a(949560),T=a(476943),F=a(779561),I=a(967312),E=a(857147),j=a(134121),R=a(859075),A=a(466068),C=a(19963),L=a(468318),Z=a(785893);function M({arrowType:e,pinId:t,viewParameter:a,viewType:i}){let n=(0,x.ZP)(),l=(0,m.k6)(),{previous:r}=(0,L.Hv)(),{logContextEvent:s}=(0,C.v)();return(0,Z.jsx)(h.xu,{"data-test-id":"go-back-button",children:(0,Z.jsx)(h.hU,{accessibilityLabel:n.bt("Вернуться", "Go back", "Accessible icon for close button", undefined, true),icon:e??"directional-arrow-left",iconColor:"darkGray",onClick:()=>{if(s({event_type:101,view_type:i,element:34,view_parameter:a}),0===r.length)return void l.replace(`/pin/${t}/`);l.goBack()}})})}var D=a(525726),K=a(94970),O=a(771753);function N({isProductPage:e,pinId:t,title:a,viewParameter:i,viewType:n}){let l=(0,g.useRef)(null);return(0,g.useEffect)(()=>(l.current&&K.Z.addObstruction("top",l.current),()=>{l.current&&K.Z.removeObstruction("top",l.current)})),(0,Z.jsx)(O.Z,{position:e?"sticky":"fixed",shouldShowShadow:!0,children:(0,Z.jsxs)(h.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingBottom:"12px"}},display:"flex",justifyContent:"center",children:[(0,Z.jsx)(h.xu,{alignItems:"center",display:"flex",height:48,left:!0,marginStart:5,position:"absolute",right:!0,width:48,children:(0,Z.jsx)(M,{arrowType:a?"directional-arrow-left":"cancel",pinId:t,viewParameter:i,viewType:n})}),(0,Z.jsx)(h.xu,{ref:l,alignItems:"center",color:"default","data-test-id":"related-products-header",display:"flex",height:48,children:(0,Z.jsx)(D.Z,{title:a})})]})})}var z=a(624404),$=a(298568),H=a(349057),B=a(72185),U=a(830073),G=a(476151),W=a(850610),V=a(970601),Y=a(533936);function q({animationReflow:e,height:t,isAnimating:a,left:i,maskId:n,maskUrl:l,setIsAnimating:r,top:s,width:o}){let{checkExperiment:d}=(0,I.F)(),u=(0,g.useRef)(null),c="enabled_once"===d("web_cutout_glow").group,p=`glow-sweep-${n}`,m=`${p}-class`,y=t/2+15*t/100;return(0,g.useEffect)(()=>{let e=u.current;e&&(a||(e.classList.remove(m),e.offsetWidth,e.classList.add(m)))},[e]),(0,Z.jsxs)(h.xu,{dangerouslySetInlineStyle:{__style:{top:s,left:i,maskImage:`url(${l})`,maskSize:"cover",maskRepeat:"no-repeat",maskMode:"luminance"}},"data-test-id":"cutout-item",height:t,id:Y.Ii,position:"absolute",width:o,children:[(0,Z.jsx)(h.xu,{ref:u,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",animation:c?`${p} 3s linear forwards`:"",maskImage:`
              linear-gradient(
                transparent 0%,
                transparent ${35}%,
                rgba(255,255,255,0.1) ${42.5}%,
                rgba(255,255,255,0.14) ${46.25}%,
                rgba(255,255,255,0.15) 50%,
                rgba(255,255,255,0.14) ${53.75}%,
                rgba(255,255,255,0.1) ${57.5}%,
                transparent ${65}%,
                transparent 100%
              )`,maskPosition:`0 -${y}px`,maskSize:"100% 100%",maskRepeat:"no-repeat"}},height:"100%",onAnimationEnd:()=>r(!1),onAnimationStart:()=>r(!0),width:"100%",children:(0,Z.jsx)(h.Ee,{alt:"cutout-glow-background-image",color:"white",fetchPriority:"high",fit:"cover",loading:"eager",naturalHeight:t,naturalWidth:o,role:"presentation",src:void 0})}),(0,Z.jsx)(V.Z,{unsafeCSS:`
          .${m} {
            animation: ${p} 3s linear forwards;
          }
          @keyframes ${p} {
            0% { mask-position: 0 -${y}px; }
            100% { mask-position: 0 ${y}px; }
          }`})]})}var X=a(259713);let Q=void 0!==i?i:i=a(625713);function J({animationReflow:e,auxData:t,bitmapData:a,hasLoggedRender:i,hoveredCutoutIndex:n,id:l,index:r,pinKey:s,selectedCutoutIndex:o,setHasLoggedRender:d,viewParameter:u,viewType:c,isAnimating:p,setIsAnimating:m}){let{logContextEvent:y}=(0,C.v)(),f=(0,_.Z)(Q,s),{getNormalizedPinImage:x}=(0,F.Z)({pinKey:f,maxWidth:T.Wm}),{height:S,width:v,url:w}=x(),{maskHeightRatio:b,maskUrl:k,maskWidthRatio:P,maskXRatio:I,maskYRatio:E}=a,j=I*v,R=E*S,A=P*v,L=b*S,M=o===r;return(0,g.useEffect)(()=>{i||(y({event_type:120,element:14154,view_parameter:u,view_type:c,aux_data:t}),d?.(!0))},[t,i,y,d,u,c]),(0,Z.jsxs)(h.xu,{dangerouslySetInlineStyle:{__style:{visibility:M?"hidden":"visible"}},children:[(0,Z.jsx)(V.Z,{unsafeCSS:Y.iF}),(0,Z.jsx)(X.Z,{imageHeight:S,imageUrl:w,imageWidth:v,maskHeight:L,maskUrl:k,maskWidth:A,maskX:j,maskY:R,show:n===r&&!M}),(0,Z.jsx)(q,{animationReflow:e,height:L,isAnimating:p,left:j,maskId:l,maskUrl:k,setIsAnimating:m,top:R,width:A})]})}var ee=a(245660),et=a(836656);let ea=void 0!==n?n:n=a(575174);function ei({animationReflow:e,bitmapMasks:t,hoveredCutoutIndex:i,imageContainerX:n,imageContainerY:l,pinImageHovered:r,pinKey:s,selectedCutoutIndex:o,setHoveredCutoutIndex:d,setSelectedCutoutIndex:u,surfaceType:c,trafficSource:p,viewParameter:y,viewType:f}){let{checkExperiment:x}=(0,I.F)(),{logContextEvent:S}=(0,C.v)(),v=(0,m.k6)(),w=(0,_.Z)(ea,s),{getNormalizedPinImage:b}=(0,F.Z)({pinKey:w,maxWidth:T.Wm}),k=(0,g.useRef)(null),[P,E]=(0,g.useState)(!1),[j,R]=(0,g.useState)([]),[A,L]=(0,g.useState)(!1),[M,D]=(0,g.useState)(!1),[K,O]=(0,g.useState)(!1),{height:N,width:z}=b(),$=(0,g.useMemo)(()=>({commerce_data:JSON.stringify({pin_has_cutout:!0})}),[]),{anyEnabled:H}=x("web_cutout_glow");(0,g.useEffect)(()=>{if(!t)return;let e=[];async function i({id:t,isHidden:i,maskHeightRatio:n,maskImage:l,maskWidthRatio:r,maskXRatio:s,maskYRatio:o,pinImageHeight:d,pinImageWidth:u}){let{ContourTracer:c}=await a.e(18893).then(a.bind(a,618893)),p=new c,g=await a.e(69670).then(a.bind(a,469670));await g.default();let m=atob(l),h=new Blob([Uint8Array.from(m,e=>e.charCodeAt(0))],{type:"image/png"}),y=await createImageBitmap(h),_=p.trace(y,{useAlpha:!1,threshold:80}),f=URL.createObjectURL(h);return e.push(f),{contours:_,contourXRatio:u*r/y.width,contourYRatio:d*n/y.height,id:t,isHidden:i,maskHeightRatio:n,maskUrl:f,maskWidthRatio:r,maskXRatio:s,maskYRatio:o}}let n=[];return t.forEach(e=>{let{id:t,mask_image:a,mask_bounds:l,is_hidden:r}=e,[s,o]=l?.[0]??[],[d,u]=l?.[1]??[];if(void 0!==t&&void 0!==a&&void 0!==s&&void 0!==o&&void 0!==d&&void 0!==u){let e=i({id:t,isHidden:!!r,maskHeightRatio:u,maskImage:a,maskWidthRatio:d,maskXRatio:s,maskYRatio:o,pinImageHeight:N,pinImageWidth:z});n.push(e)}}),(async()=>{R(await Promise.all(n))})(),()=>{e.forEach(e=>{URL.revokeObjectURL(e)})}},[t,N,z]);let B=(0,g.useMemo)(()=>{let e=[];return j.forEach((t,a)=>{let{contours:i}=t;i&&0!==i.length&&(e[a]=i.map(e=>{let t=e.points.map(e=>e.x),a=e.points.map(e=>e.y);return{minX:Math.min(...t),minY:Math.min(...a),maxX:Math.max(...t),maxY:Math.max(...a)}}))}),e},[j]),U=(0,g.useCallback)(e=>{let t=e.clientX-n,a=e.clientY-l;for(let e=j.length-1;e>=0;e-=1){let n=j[e];if(e===o||!n)continue;let{contours:l,contourXRatio:r,contourYRatio:s,maskXRatio:u,maskYRatio:c}=n,p=(t-u*z)/r,g=(a-c*N)/s,m=B[e];if(l.some((e,t)=>{let a=m?.[t];return a&&p>=a.minX&&p<=a.maxX&&g>=a.minY&&g<=a.maxY&&(0,ee.Z)({x:p,y:g},e.points)})){i!==e&&(d?.(e),S({event_type:105,element:14154,view_parameter:y,view_type:f,aux_data:{commerce_data:JSON.stringify({cutout_index:e,pin_has_cutout:!0})}}));return}}d?.(null)},[j,B,i,n,l,S,N,z,o,d,y,f]),V=()=>E(!1),Y=e=>{(e.movementX||e.movementY)&&E(!0),0===e.buttons?U(e):d?.(null)},q=e=>{U(e)},X=()=>d?.(null),Q=(0,g.useCallback)(()=>{if(P||null===i||!j[i])return void E(!1);u?.(i);let{maskXRatio:e,maskYRatio:t,maskWidthRatio:a,maskHeightRatio:n}=j[i],l=(0,W.Z)({cropArea:{x:e,y:t,w:a,h:n},scaledWidth:z,scaledHeight:N}),r=(0,G.Z)({cropArea:l,cropSource:9,surfaceType:c,trafficSource:p});if(r!==window.location.search){S({event_type:101,element:14154,view_parameter:y,view_type:f,aux_data:$});let e=`${window.location.pathname}${r}`;v.replace(e)}},[$,j,P,v,i,S,N,z,u,c,p,y,f]);return((0,g.useEffect)(()=>{let e=k.current;return e&&(e.addEventListener("mousedown",V),e.addEventListener("mousemove",Y),e.addEventListener("mouseup",q),e.addEventListener("mouseleave",X),e.addEventListener("click",Q)),()=>{e&&(e.removeEventListener("mousedown",V),e.removeEventListener("mousemove",Y),e.removeEventListener("mouseup",q),e.removeEventListener("mouseleave",X),e.removeEventListener("click",Q))}}),t)?(0,Z.jsx)(h.xu,{ref:k,bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"number"==typeof i?"pointer":"auto"}},"data-bitmaps-ready":j.length>0,"data-test-id":"cutouts-container",left:!0,position:"absolute",right:!0,top:!0,children:j.map((t,a)=>H?(0,Z.jsx)(J,{animationReflow:e,auxData:$,bitmapData:t,hasLoggedRender:A,hoveredCutoutIndex:i,id:t.id,index:a,isAnimating:K,pinKey:w,selectedCutoutIndex:o,setHasLoggedRender:L,setIsAnimating:O,viewParameter:y,viewType:f},t.id):(0,Z.jsx)(et.Z,{auxData:$,bitmapData:t,hasAnimatedCutoutsOnLand:M,hasLoggedRender:A,hoveredCutoutIndex:i,index:a,pinImageHovered:r,pinKey:w,selectedCutoutIndex:o,setHasAnimatedCutoutsOnLand:D,setHasLoggedRender:L,viewParameter:y,viewType:f},t.id))}):null}var en=a(863658);let el=void 0!==l?l:l=a(348042);function er({cropArea:e,imageContainerX:t=0,imageContainerY:a=0,imageSize:i,pinKey:n,surfaceType:l,trafficSource:r,viewParameter:s,viewType:o}){let d=(0,x.ZP)(),{checkExperiment:u}=(0,I.F)(),c=(0,_.Z)(el,n),p=(0,m.k6)(),y=(0,en.Z)({pinKey:c}),[f,S]=(0,g.useState)("none"),[v,w]=(0,g.useState)(null),[b,k]=(0,g.useState)(-1),[P,T]=(0,g.useState)(!1),{bitmap_masks:F}=y??{},E=(0,g.useMemo)(()=>(F??[]).flatMap(e=>{let{id:t,mask_bounds:a}=e,[i,n]=a?.[0]??[],[l,r]=a?.[1]??[];return void 0===i||void 0===n||void 0===l||void 0===r||void 0===t?[]:[{x:i,y:n,w:l,h:r,id:t}]}),[F]),j=E&&!!E.length,A=j&&"enabled_once"===u("web_cutout_glow").group;return(0,g.useEffect)(()=>{let t=(0,R.Z)({cropArea:e,scaledHeight:i.height??0,scaledWidth:i.width??0});if(j){let e=(0,U.Z)(E,t);S("cutouts"),k(e.indexToHide)}},[e,E,j,i.height,i.width]),(0,Z.jsx)(h.iP,{accessibilityLabel:d.bt("Обрезка для визуального поиска", "Visual Search Cropper", "visualSearchPage.visualSearchCropper", undefined, true),mouseCursor:"default",onTap:()=>A?void 0:T(!P),tabIndex:-1,children:(0,Z.jsx)(h.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,Z.jsx)(B.Z,{cropArea:e,hoveredCutoutIndex:v,imageContainerX:t,imageContainerY:a,imageSize:i,objectDetection:f,onChange:({cropArea:e,cropSource:t})=>{let a=t;if("cutouts"===f){let t=(0,R.Z)({cropArea:e,scaledHeight:i.height??0,scaledWidth:i.width??0}),{isCropAreaOnDotArea:n,indexToHide:l}=(0,U.Z)(E,t);n&&(a=9,k?.(l))}let n=window.location.search,s=(0,G.Z)({cropArea:e,cropSource:a,surfaceType:l,trafficSource:r});n!==s&&p.replace({pathname:window.location.pathname,search:s})},setHoveredCutoutIndex:w,setSelectedCutoutIndex:k,viewParameter:s,viewType:o,children:"cutouts"===f&&F&&(0,Z.jsx)(ei,{animationReflow:P,bitmapMasks:F,hoveredCutoutIndex:v,imageContainerX:t,imageContainerY:a,pinKey:c,selectedCutoutIndex:b,setHoveredCutoutIndex:w,setSelectedCutoutIndex:k,surfaceType:l,trafficSource:r,viewParameter:s,viewType:o})})})})}let es=void 0!==r?r:r=a(867540);function eo({cropArea:e,description:t,height:a,imageContainerX:i,imageContainerY:n,imageUrl:l,pinKey:r,surfaceType:s,trafficSource:o,viewParameter:d,viewType:u,width:c}){let p=(0,_.Z)(es,r),g=(0,$.A)();return(0,Z.jsx)(h.xu,{"data-test-id":"flashlight-enabled-image",height:a,width:c,children:(0,Z.jsxs)(h.zd,{height:a,rounding:4,width:c,children:[(0,Z.jsx)(z.Z,{_enableViewTransitions:!0,type:"image",children:(0,Z.jsx)(h.Ee,{alt:t,naturalHeight:a,naturalWidth:c,onLoad:()=>{(0,H.Nx)("visualSearchMainPinImageRender"),g&&g.markConstraintComplete("visualSearchMainPinImageRender")},src:l})}),(0,Z.jsx)(er,{cropArea:e,imageContainerX:i,imageContainerY:n,imageSize:{height:a,width:c},pinKey:p,surfaceType:s,trafficSource:o,viewParameter:d,viewType:u})]})})}var ed=a(219854),eu=a(925091),ec=a(994235),ep=a(245406);let eg=void 0!==s?s:s=a(686319);function em({createAndAddCutoutToComposer:e,isFilterOpened:t,isProductOnlyFeed:a,oneBarModules:i,pinKey:n,selectPinForCutoutDrawer:l,surface:r,surfaceType:s,viewParameter:o,viewType:d,visualSearchFlashlightUnifiedResource:u}){let c=(0,_.Z)(eg,n),p="stl"===s||a,m=!a&&i&&i.length>0,{data:y}=u,f=y?.search_identifier;return(0,Z.jsxs)(g.Fragment,{children:[m&&(0,Z.jsx)(h.xu,{position:"relative",zIndex:new h.Ry(1),children:(0,Z.jsx)(ep.v,{children:(0,Z.jsx)(eu.f,{children:(0,Z.jsx)(ed.default,{oneBarModulesKey:null,oneBarModulesRest:i,paddingX:8})})})}),(0,Z.jsx)(ec.Z,{commerceData:{is_product_only_feed:p},createAndAddCutoutToComposer:e,isFilterOpened:t,isProductFeed:p,pinKey:c,searchId:f,selectPinForCutoutDrawer:l,surface:r,viewParameter:o,viewType:d,visualSearchFlashlightUnifiedResource:u})]})}var eh=a(689788),ey=a(754322),e_=a(892671),ef=a(56063),ex=a(282273),eS=a(5112),ev=a(755090);a(422578);var ew=a(372312);let eb=void 0!==o?o:o=a(917013);var ek=a(12624),eP=a(486838);let eT=void 0!==d?d:d=a(259538);function eF({cropArea:e,cropSource:t,isProductPage:a,oneBarModules:i,pinKey:n,searchId:l,surfaceType:r,title:s,trafficSource:o,visualSearchFlashlightUnifiedResource:d}){let u=(0,_.Z)(eT,n),{getNormalizedPinImage:c}=(0,F.Z)({pinKey:u,maxWidth:T.Wm}),p=(0,m.TH)(),{width:y=0}=(0,ey.Z)()||{},f=(0,ek.t)(),x=(0,eP.Z)(),{imageContainerScrollTop:S,imageContainerScrollTopForPinId:v}=(0,eh.t)(),w=(0,g.useRef)(null),[b,k]=(0,g.useState)(0),[P,E]=(0,g.useState)(0),{state:j}=p||{},{internalNavigation:R=!1}=j||{},{width:C,height:L,url:M}=c(),D=C+A.n,K=a?0:D+48,O=y-x-K-A.n,{viewType:z,viewParameter:$}=function({cropSource:e,isProductPage:t,surfaceType:a}){let{checkExperiment:i}=(0,I.F)(),n=i("web_remove_is_eligible_for_related_products").anyEnabled,l=n?"flashlight":a;return{viewType:n?72:"flashlight"===l?t?427:72:427,viewParameter:9===e?3462:"flashlight"===l?3050:3455}}({cropSource:t,isProductPage:a,surfaceType:r}),H=function({isProductPage:e,pinKey:t,surfaceType:a,viewParameter:i,viewType:n}){let l=(0,_.Z)(eb,t);return{view_type:n,view_parameter:i,aux_data:(0,ew.Z)(l)({default:{is_product_only_feed:"stl"===a||e}})}}({isProductPage:a,pinKey:u,surfaceType:r,viewParameter:$,viewType:z}),B=()=>{let e=w.current;if(e){let{x:t,y:a}=e.getBoundingClientRect(),{scrollTop:i}=e;k(t),E(a-i)}};return(0,ev.Z)(()=>{B(),w.current&&0!==S.current&&v.current===u.entityId&&(w.current.scrollTop=S.current)}),(0,Z.jsx)(ex.Z,{constraints:a?[]:["visualSearchMainPinImageRender"],measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,Z.jsx)(eS.Z,{objectId:l,view:z,children:(0,Z.jsx)(e_.Z,{log:H,children:(0,Z.jsxs)(h.xu,{"data-test-id":"related-products",children:[(0,Z.jsx)(N,{isProductPage:a,pinId:u.entityId,title:a?s:"",viewParameter:$,viewType:z}),!a&&(0,Z.jsx)(h.xu,{ref:w,bottom:!0,dangerouslySetInlineStyle:{__style:{top:f+80,left:x,right:x}},height:"inherit",marginBottom:3,marginStart:12,onScroll:()=>{B(),S.current=w.current?.scrollTop||0,v.current=u.entityId},overflow:"auto",position:"fixed",width:D,children:(0,Z.jsx)(eo,{cropArea:e,description:u.description??"",height:L,imageContainerX:b,imageContainerY:P,imageSignature:u.imageSignature||"",imageUrl:M,pinKey:u,showAnimation:!R&&"flashlight"===r,surfaceType:r,trafficSource:o,viewParameter:$,viewType:z,width:C})}),(0,Z.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:{top:80*!a,left:K,right:K}},paddingX:ef.jC,position:"relative",width:O,children:(0,Z.jsx)(em,{isProductOnlyFeed:a,oneBarModules:i,pinKey:u,surfaceType:r,viewParameter:$,viewType:z,visualSearchFlashlightUnifiedResource:d})})]})})})})}let eI=void 0!==u?u:u=a(503390);function eE({pinKey:e}){let{checkExperiment:t}=(0,I.F)(),a=(0,m.TH)(),i=(0,_.Z)(eI,e),{getNormalizedPinImage:n}=(0,F.Z)({pinKey:i,maxWidth:T.Wm}),{cropSource:l,entrypoint:r,full_feed_title:s="",surfaceType:o,filters:d,hybrid_search_param:u,journey_depth:c,search_query:p,source_module_id:h,requestParams:y,rs:f}=(0,E.mB)(a.search),{width:x,height:S}=n(),v=(0,g.useMemo)(()=>(0,k.Z)(a,x,S)??{x:0,y:0,w:x,h:S},[a,x,S]),w=(0,j.Z)(Number(l))||5,b=a.pathname.includes("/products"),{anyEnabled:A}=t("web_remove_is_eligible_for_related_products"),{searchId:C,visualSearchFlashlightUnifiedResource:L,oneBarModules:M}=(0,P.Z)({resourceOptions:{crop:(0,R.Z)({cropArea:v,scaledWidth:x,scaledHeight:S}),crop_source:w,entry_source:b?"shopping":"flashlight",entrypoint:r||b&&"feed_module"||null,field_set_key:"shopping_grid_item",image_signature:i.imageSignature||void 0,is_shopping:b,pin_id:i.entityId,request_params:y,source:f,filters:d,hybrid_search_param:u,journey_depth:parseInt(c,10)||void 0,search_query:p,source_module_id:h}});return i?(0,Z.jsx)(eF,{cropArea:v,cropSource:w,isProductPage:b,oneBarModules:M,pinKey:i,searchId:C,surfaceType:A?"flashlight":o||"flashlight",title:s,trafficSource:f,visualSearchFlashlightUnifiedResource:L}):null}let ej=void 0!==c?c:c=a(211724),eR=void 0!==p?p:p=a(212198);function eA({pinId:e,relatedProductsDataRef:t}){let a=(0,x.ZP)(),i=(0,f.Z)({strategy:"LEGACY",query:ej,variables:{pinId:e},useGetLegacyData:()=>{let{data:e}=(0,S.Z)(t);return e}}),n=i?.v3GetPinQuery?.__typename==="V3GetPin"?i.v3GetPinQuery.data:null,l=(0,_.Z)(eR,n);return(0,Z.jsx)(g.Suspense,{fallback:(0,Z.jsx)(h.xH,{accessibilityLabel:a.bt("Загрузка данных о пине", "Loading Pin data", "RelatedProductsPage.loadingPinData", undefined, true),show:!0}),children:l&&(0,Z.jsx)(eE,{pinKey:l})})}function eC(){let e=(0,m.$B)(),{pinId:t}=(0,w.Z)(e.params.id||""),{ref:a}=(0,v.Z)({name:"PinResource",options:{id:t,field_set_key:"detailed"}});return(0,Z.jsx)(y.Z,{name:"RelatedProductsPage_RelatedProductsPageWrapper",children:(0,Z.jsx)(g.Suspense,{fallback:(0,Z.jsx)(b.Z,{}),children:(0,Z.jsx)(eA,{pinId:t,relatedProductsDataRef:a})})})}},158141:(e,t,a)=>{"use strict";a.d(t,{By:()=>h,IT:()=>g,N6:()=>o,br:()=>d,jq:()=>c,lU:()=>p,tq:()=>u});var i=a(397657);let n=e=>({type:"CLEAR_RECENT_SEARCH",payload:{query:e}}),l=()=>({type:"CLEAR_RECENT_SEARCHES"}),r=e=>({type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}),s=()=>({type:"CLEAR_RECENT_PERSONAL_SEARCHES"}),o=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),d=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),u=e=>({type:"UPDATE_RECENT_SEARCHES_BATCH",payload:{data:e}}),c=(e,t,a)=>({type:"UPDATE_TYPEAHEAD_CACHE",payload:{items:e,term:t,recent_queries_tags:a}}),p=(e,t,a)=>n=>{(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e}}).then(t,a),n("PERSONAL"===e?s():l())},g=(e,t,a,l,s)=>o=>{a||(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:t}}).then(l,s),o("PERSONAL"===t?r(e):n(e))},m=e=>({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}}),h=e=>t=>{t(m(e))}},43390:(e,t,a)=>{"use strict";a.d(t,{J:()=>_,Z:()=>b});var i=a(874929),n=a(874322),l=a(948155),r=a(403212),s=a(890452),o=a(674574),d=a(875202),u=a(48649);let c=new Set(["PinResource","RepinResource"]),p={ApiResource:e=>e?.url==="/v3/orientation/nux_creator_recommendations/"?"nux-creator-recommendations":e?.url==="/v3/users/me/interests/"?`recommended-interests:${e.data?.blend_type}`:e?.url===`/v3/usecases/${e.data?.use_case_id}/feed/`?"useCaseFeed":e?.url===`/v3/boards/${e.data?.board_id}/automagical/pins/`?`automagical-board-feed:${e.data?.board_id}`:"",AggregatedActivityFeedResource:e=>`trieditfeed:${e.aggregated_pin_data_id}`,AggregatedCommentFeedResource:e=>`aggregated-comments:${e.objectId}`,AggregatedCommentReplyFeedResource:e=>`${d.Z.AGGREGATED_COMMENT_REPLIES}:${e.objectId}`,BoardlessPinsResource:e=>`boardless-pins:${e.userId}`,BestPinsFeedAltResource:e=>`idea-page-best-pins:${e.interest}`,BoardArchiveResource:()=>"archived-boards",BoardContentRecommendationResource:e=>`recommendation-feed:${e.id}`,BoardFeedResource:e=>`boardfeed:${e.board_id}`,BoardSectionsRepinResource:e=>`board-sections:${e.board_id}`,BoardSectionsResource:e=>`board-sections:${e.board_id}`,BoardSectionPinsResource:e=>`board-section-pins:${e.section_id}`,BoardsFeedResource:e=>`profile-boards:${e.username}`,BoardToolsFeedResource:e=>`board-tools:${e.boardId}`,ConversationsResource:()=>"conversations",DidItLikedByResource:e=>`triedit-likes:${e.didItDataId}`,DidItUserFeedResource:e=>`profile-tried:${e.username}`,InterestResource:e=>`klp-pins:${e.interest}`,MoreIdeasTabsBoardsResource:()=>"homefeed-more-ideas-tabs",NewsHubResource:()=>"notifications",NewsHubDetailsResource:e=>`newshubdetail:${e.news_id}`,NuxInterestsResource:()=>"nuxTopics",PinsFromBrandResource:e=>`brand-pins:${e.pin}`,ReactionsResource:e=>`reactions:${e.pin_id}`,RelatedArticlesResource:e=>`related-articles:${e.article_id}`,RelatedModulesResource:e=>`related-modules:${e.pin_id}`,RelatedPinFeedResource:e=>`related-pins:${e.pin}`,RelatedProductFeedResource:e=>"pin"===e.shop_source?`closeup-related-products:${e.pin}`:`related-products:${e.pin}`,RelatedStreamResource:e=>`related-story-pins:${e.pinId}`,SearchResource:e=>{let t=`search:${e.scope}:${e.query}:${e.filters||""}:${e.article||""}`;return e.auto_correction_disabled?`${t}:auto-correction-disabled`:t},BaseSearchResource:e=>{let{appliedProductFilters:t,article:a,auto_correction_disabled:i,filters:n,journey_depth:l,query:r,scope:s,selected_one_bar_modules:o,source_id:d,source_module_id:c,top_pin_ids:p}=e;return`search:${(0,u.Z)({appliedFilters:t,article:a,autoCorrectionDisabled:i,filters:n,journeyDepth:l,query:r,scope:s,selectedOneBarModules:o,sourceId:d,sourceModuleId:c,topPinIds:p})}`},SectionToolsFeedResource:e=>`section-tools:${e.sectionId}`,ShareSuggestionsTypeaheadResource:e=>`share-suggestions:${e.board||e.user}:${e.term}`,StoryFeedResource:e=>`story-feed:${e.feed_type}:${e.request_params}`,SuggestedCreatorFollowsResource:()=>"suggested-creator-follows",StoryPinTaggedProductsResource:()=>"story-pin-tagged-products",TodayArticleFeedResource:e=>`today-article:${e.id}`,IdeasHubTodayArticlesResource:e=>`today-article:${e.interest_id}`,TodayTabInterestFeedResource:e=>`today-article-interestfeed:${e.interest_id}`,TodayTabResource:()=>"today-tab",SeoTier1CandidateResource:()=>"tier1-feed",UnifiedCommentsResource:e=>`unified-comments:${e.aggregated_pin_id}`,UserActivityPinsResource:e=>`profile-pins-feed:${e.user_id}`,UserHomefeedResource:e=>e.pin_quiz?"pin-quiz":"homefeed",UserFollowingResource:e=>`user-following:${e.username}`,UserRecentActivityResource:e=>`user-recent-activity:${e.filter_type}`,UserStoryPinsFeedResource:e=>`story-pins-feed:${e.user_id}`,VideosFeedResource:()=>"videos-feed",VisualLiveSearchResource:e=>`visual-search:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualLiveSearchProductFeedResource:e=>`visual-search-products:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualSearchFlashlightUnifiedResource:e=>`related-products-unified:${e.pin_id}`,InterestFollowingResource:e=>`topic-following:${e.username}`,UserPinsResource:e=>`profile-pins:${e.username}`,TopicFeedResource:e=>e.best_pins?`best-topic-pins:${e.interest}`:`topic-pins:${e.interest}`},g={AggregatedActivityFeedResource:({options:{aggregated_pin_data_id:e}})=>({type:d.Z.TRIED_IT_FEED,id:e}),AggregatedCommentFeedResource:({options:{objectId:e}})=>({type:d.Z.AGGREGATED_COMMENTS,id:e}),AggregatedCommentReplyFeedResource:({options:{isUnifiedComment:e,objectId:t}})=>({type:e?d.Z.AGGREGATED_COMMENT_REPLIES:d.Z.AGGREGATED_COMMENTS,id:t,reversed:!0}),ApiResource:({options:{url:e,data:t}})=>e===`/v3/usecases/${t?.use_case_id}/feed/`?{type:d.Z.USE_CASE_TAB,id:t.use_case_id}:e===`/v3/boards/${t?.board_id}/automagical/pins/`?{type:d.Z.AUTOMAGICAL_BOARD_FEED,id:t.board_id}:null,BoardFeedResource:({options:{board_id:e}})=>({type:d.Z.BOARDFEED,id:e}),BoardlessPinsResource:({options:{userId:e}})=>({type:d.Z.BOARDLESS_PINS,id:e}),BoardSectionPinsResource:({options:{section_id:e}})=>({type:d.Z.BOARD_SECTION_PINS,id:e}),BoardSectionsResource:({options:{board_id:e}})=>({type:d.Z.BOARD_SECTIONS,id:e}),BoardsResource:({options:{username:e,sort:t,filter_types:a}})=>({type:d.Z.PROFILE_BOARDS,id:(0,r.Z)(e,t,a)}),BaseSearchResource:({options:{appliedProductFilters:e,appliedUnifiedFilters:t,auto_correction_disabled:a,filters:i,journey_depth:n,query_pin_sigs:r,query:s,rs:o,scope:u,selected_one_bar_modules:c,source_id:p,source_module_id:g,top_pin_ids:m,user:h},response:y})=>({type:d.Z.SEARCH_PINS,id:(0,l.Tb)({appliedProductFilters:e,appliedUnifiedFilters:t,autoCorrectionDisabled:a,filters:i,journeyDepth:n,query:s,rs:o,scope:u,selectedOneBarModules:c,selectedPinImgSig:r,sourceId:p,sourceModuleId:g,topPinIds:m,user:h}),items:y.resource_response.data?.results||[]}),DidItCommentsResource:({options:{objectId:e}})=>({type:d.Z.AGGREGATED_COMMENTS,id:e,reversed:!0}),DidItUserFeedResource:({options:{username:e}})=>({type:d.Z.TRIED_IT_FEED,id:e}),IdeasHubTodayArticlesResource:({options:{interest_id:e}})=>({type:d.Z.TODAY_TAB,id:e}),RelatedArticlesResource:({options:{article_id:e}})=>({type:d.Z.TODAY_TAB,id:e}),StoryPinDraftsResource:({options:{userId:e}})=>({type:d.Z.STORY_PIN_DATA,id:e}),TodayTabInterestFeedResource:({options:{interest_id:e}})=>({type:d.Z.TODAY_ARTICLE_INTEREST_FEED,id:e}),TodayTabResource:()=>({type:d.Z.TODAY_TAB,id:"todayTab"}),UnifiedCommentsPreviewResource:({options:{aggregated_pin_id:e}})=>({type:d.Z.UNIFIED_COMMENTS,id:e}),UnifiedCommentsResource:({options:{aggregated_pin_id:e,is_reversed:t}})=>({type:d.Z.UNIFIED_COMMENTS,id:e,reversed:t}),UserActivityPinsResource:({options:{user_id:e}})=>({type:d.Z.PROFILE_PINS_FEED,id:e}),UserStoryPinsFeedResource:({response:e,options:{user_id:t}})=>({type:d.Z.STORY_PINS_FEED,id:t,items:e.resource_response.data||[]})},m=(e,{pinId:t,feedId:a})=>e[a]?{...e,[a]:e[a].filter(e=>"pin"!==e.type||e.id!==t)}:e,h=(e,{pinId:t,feedId:a})=>e[a]?{...e,[a]:[{type:"pin",id:t},...e[a]]}:e,y=(e,{pinId:t,oldFeedId:a,newFeedId:i})=>a===i?e:h(m(e,{pinId:t,feedId:a}),{pinId:t,feedId:i}),_=(e,t)=>e in p?p[e](t):null,f=(e,t)=>{switch(e.type){case"story":return{id:e.id??"",type:"story",story_type:e.story_type??""};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return t===d.Z.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"board_section":return{type:"boardsection",id:e.id};case"triedit":return{type:"triedit",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"home_feed_tab":return{type:"home_feed_tab",id:e.id,name:e.name};case"storypindata":return{id:e.id,type:"storypindata"};case"todayarticle":return{type:"todayarticle",id:e.id};case"unifiedcommentspreview":return"userdiditdata"===e.unified_comment.type?{type:"triedit",id:e.unified_comment.id}:{type:"aggregatedcomment",id:e.unified_comment.id};default:let a="useCaseFeed"===t&&"tracking_params"in e;return{type:"pin",id:e.id??"",...a&&{trackingParams:e.tracking_params}}}},x=(e,t)=>t?`board-section-pins:${t}`:`boardfeed:${e}`,S=(e,t,a)=>{let i=a||s.Z[e];if(i===o.LR)return t.result;if(i===o.sN)return t.result.map(e=>({id:e,schema:"board"}));if(i===o.Gn)return t.result.map(e=>({id:e,schema:"user"}));if(i===o.Ht)return t.result.map(e=>({id:e,schema:"invite"}));if(i===o.fE)return t.result.map(e=>({id:e,schema:"reaction"}));else if("object"==typeof i){let e=Object.entries(i).find(([,e])=>e===o.LR);if(e)return t.result[e[0]]}return null},v=(e,t)=>e.map(e=>{let{id:a,schema:i,type:n}=e;return"home_feed_tabs"===n?e:i?{id:a,type:i,trackingParams:"pin"===i?t.pins[a].tracking_params:void 0,user_id:void 0}:null}).filter(Boolean),w=(e,t,a)=>Object.keys(e).reduce((i,n)=>{let l=e[n]||[],r=l.filter(e=>{if(e.type!==t)return!0;if("reaction"===t){let t=e.id.lastIndexOf(":");return e.id.substring(0,t)!==a}return e.id!==a});return l.length!==r.length&&(i[n]=r),i},{...e}),b=(e={},t)=>{switch(t.type){case n.zP:case n.aW:{let{payload:a}=t,{resource:i,options:l,normalizedResponse:r,schema:s}=a;if(r&&i in p){let a=S(i,r,s);if(a&&Array.isArray(a)){let s=p[i](l);if("BoardToolsFeedResource"===i||"SectionToolsFeedResource"===i)return{...e,[s]:a};if("UnifiedCommentsResource"===i){let i=v(a,r.entities);if(e[s]&&(n.zP||n.aW===t.type))return{...e,[s]:[...e[s],...i]};return{...e,[s]:i}}{let i=[...t.type===n.aW&&e[s]||[],...v(a,r.entities)];return{...e,[s]:i}}}}else{let{data:i}=a.response.resource_response;if(!a.options?.redux_normalize_feed)return e;let l=g[a.resource]({options:a.options,response:a.response});if(l){let{type:a,id:r,items:s,reversed:o}=l,d=(s||i||[]).map(e=>f(e,a));o&&(d=d.reverse());let u=`${a}:${r}`,c=e[u];if(c||t.type!==n.aW){let a=c||[],i=d;return t.type===n.aW&&(i=o?d.concat(a):a.concat(d)),{...e,[u]:i}}}}break}case"FEED_ITEM_REORDERED":{let{payload:{feedType:a,feedId:n,itemType:l,targetItemId:r,sourceItemId:s}}=t,o=`${a}:${n}`,u=e[o]||[],c=-1,p=-1;if([d.Z.BOARDFEED,d.Z.BOARD_SECTION_PINS,d.Z.BOARD_SECTIONS,"profileBoards"].includes(a)&&(c=u.findIndex(e=>e.type===l&&e.id===s),p=u.findIndex(e=>e.type===l&&e.id===r)),-1!==c&&-1!==p)return{...e,[o]:(0,i.Z)(u,c,p)};break}case"FEED_ITEMS_REMOVED":{let{payload:{feedType:a,feedId:i,inverseSelection:n,itemType:l,itemIds:r=[]}}=t,s=`${a}:${i}`,o=e[s]||[];if(o&&o.length>0&&(a===d.Z.BOARD_SECTION_PINS||a===d.Z.BOARDFEED)){let t=o.filter(e=>{let t=r.includes(e.id);return!(e.type===l&&(n&&!t||!n&&t))}),a=!!t.find(e=>"pin"===e.type);return{...e,[s]:a?t:[]}}if(o&&o.length>0&&a===d.Z.BOARD_SECTIONS){let t=o.filter(e=>{let t=r.includes(e.id);return!(e.type===l&&t)});return{...e,[s]:t}}if(o&&o.length>0&&(a===d.Z.AGGREGATED_COMMENTS||a===d.Z.BOARDLESS_PINS||a===d.Z.PROFILE_PINS_FEED||a===d.Z.STORY_PINS_FEED||a===d.Z.UNIFIED_COMMENTS||a===d.Z.TRIED_IT_FEED||a===d.Z.STORY_PIN_DATA)){let t=o.filter(e=>{let t=r.includes(e.id);return!(e.type===l&&t)});return{...e,[s]:t}}break}case"FEED_ITEMS_ADDED":{let{payload:{feedType:a,feedId:i,itemType:n,itemIds:l=[],prepend:r}}=t,s=`${a}:${i}`,o=e[s]||[];if(o&&(a===d.Z.BOARD_SECTION_PINS||a===d.Z.BOARDFEED||a===d.Z.BOARDLESS_PINS)){let t=l.map(e=>({id:e,type:n})),a=0;"story"===(o[0]||{}).type&&(a=1),"story"===(o[1]||{}).type&&(a=2);let i=[...o.slice(0,a),...t,...o.slice(a)];return{...e,[s]:i}}if(o&&a===d.Z.BOARD_SECTIONS){let t=[...l].reverse().map(e=>({id:e,type:"boardsection"})),a=o?[...t,...o]:[...t];return{...e,[s]:a}}if(a===d.Z.AGGREGATED_COMMENTS||a===d.Z.AGGREGATED_COMMENT_REPLIES||a===d.Z.PROFILE_PINS_FEED||a===d.Z.STORY_PINS_FEED||a===d.Z.UNIFIED_COMMENTS){let t=l.map(e=>({id:e,type:n})),a=o?[...r?t:o,...r?o:t]:t;return{...e,[s]:a}}else if(a===d.Z.TRIED_IT_FEED){let t=l.map(e=>({id:e,type:n})),a=o?[...t,...o]:t;return{...e,[s]:a}}break}case"FEED_INVALIDATE":{let{payload:{feedType:a,feedId:i}}=t,n=`${a}:${i}`;return e[n],{...e,[n]:null}}case"APPEND_FEED_ITEMS":{let{payload:{id:a,items:i,options:n}}=t,l=e[a];if(!l)return{...e,[a]:i};{let t;return t=n.isPrepend?l[0]&&"story"===l[0].type?[].concat(l[0],i,l.slice(1)):i.concat(l):l.concat(i),{...e,[a]:t}}}case"PIN_DELETE":{let{payload:{pinId:a}}=t;return w(e,"pin",a)}case"BOARD_ARCHIVE":{let{payload:{boardId:a,username:i}}=t,n=`profile-boards:${i??""}`;if(e[n])return{...e,[n]:e[n].filter(e=>e.id!==a)};break}case"BOARD_UNARCHIVE":{let{payload:{boardId:a}}=t,i="archived-boards";if(e[i])return{...e,[i]:e[i].filter(e=>e.id!==a)};break}case"BOARD_DELETE":{let{payload:{boardId:a}}=t;return w(e,"board",a)}case"BOARD_SECTION_DELETE":{let{payload:{boardSectionId:a}}=t;return w(e,"boardsection",a)}case"PINS_MOVE":{let{payload:{source:a,target:i,pinIds:n,userId:l}}=t,r=a.boardlessPins&&l&&`boardless-pins:${l}`||a.boardId&&x(a.boardId,a.sectionId),s=x(i.boardId,i.sectionId);return n.reduce((e,t)=>y(e,{pinId:t,oldFeedId:r,newFeedId:s}),e)}case"PINS_MOVE_ALL":{let{payload:{source:a,target:i,excludePinIds:n}}=t,l=x(a.boardId,a.sectionId),r=x(i.boardId,i.sectionId),s={...e,[l]:n.map(e=>({type:"pin",id:e}))};return delete s[r],s}case"PIN_EDIT":{let{payload:{pinId:a,boardId:i,sectionId:n="",source:{boardId:l,sectionId:r}}}=t;return y(e,{pinId:a,oldFeedId:x(l,r),newFeedId:x(i,n)})}case n.AF:if(c.has(t.payload.resource)){let a,i=t.payload.response.resource_response.data,{board:n}=i;if("quick_saves"===n.layout)a=`boardless-pins:${t.payload.options.user_id}`;else{let e=t.payload.options.section;a=e?`board-section-pins:${e}`:`boardfeed:${n.id}`}if(e[a]){let t={...e},n={id:i.id,type:"pin",trackingParams:i?.tracking_params};return t[a]=[n].concat(e[a]),t}}if("BoardSectionResource"===t.payload.resource&&t.payload.normalizedResponse){let a=t.payload.normalizedResponse.result,i=t.payload.normalizedResponse.entities.boardsections[a].board,n=`board-sections:${i}`;if(e[n]){let t={...e};return t[n]=[{id:a,type:"boardsection"}].concat(e[n]),t}}if("AggregatedCommentResource"===t.payload.resource&&t.payload.normalizedResponse){let a={id:t.payload.normalizedResponse.result,type:"aggregatedcomment"},i={...e};for(let n of["aggregated-comments","unified-comments"]){let l=`${n}:${t.payload.options.objectId}`;e[l]&&(i={...i,[l]:[a].concat(i[l])})}return i}if("AggregatedCommentReplyResource"===t.payload.resource&&t.payload.normalizedResponse){let a=`${d.Z.AGGREGATED_COMMENT_REPLIES}:${t.payload.options.objectId}`;return{...e,[a]:[...e[a]||[],{id:t.payload.normalizedResponse.result,type:"aggregatedComment"}]}}if("ReactionsResource"===t.payload.resource&&t.payload.normalizedResponse){let{reaction_pin_id:a,reaction_type:i}=t.payload.options;if("reaction"===t.payload.options.action_type){let n=`reactions:${t.payload.options.pin_id}`,l={...e},r={id:`${a}:${t.payload.options.user_id}:${i}`,type:"reaction",trackingParams:void 0};return l[n]=[r].concat(e[n]),l}if("unreaction"===t.payload.options.action_type)return w(e,"reaction",`${a}:${t.payload.options.user_id}`)}break;case"COMPLETE_STORY":{let{payload:{storyId:a}}=t;return w(e,"story",a)}}return e}},824879:(e,t,a)=>{"use strict";a.d(t,{Z:()=>_});var i=a(545007),n=a(616550),l=a(883119),r=a(547504),s=a(219308),o=a(718369),d=a(640935),u=a(233846),c=a(890360),p=a(943369),g=a(112800),m=a(677316),h=a(538645),y=a(785893);function _({alignIconLeft:e,bgColor:t,color:a,disableRedirect:_=!1,fallbackUrl:f,icon:x="arrow-back",onTouch:S,padding:v,placement:w,shouldUseFallbackUrl:b,size:k="lg",viewParameter:P,viewType:T,isVisualSearch:F}){let I=(0,u.ZP)(),E=(0,n.k6)(),j=(0,n.TH)(),R=(0,h.HG)(),A=(0,i.v9)(e=>e.session.isAuthenticated),C=(0,s.Z)(),L=(0,m.Z)(),Z=(0,d.vs)(),{viewType:M,viewParameter:D}=(0,o.SU)(),[K,O]=T?[T,P]:[M,D],N=()=>j.search&&j.search.includes("?nativeShouldDismiss=true"),z=()=>{let e=(0,p.M0)().getItem(r.pm);j.key||"/ideas"!==f?(0,g.My)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,g.My)("pinner_conversion.back_button.no_history"),(0,g.My)(`web_back_button_click.${String(w)}.is_auth_${String(A)}`),L({action:"click",item:"back-button"}),K&&C({view_type:K,view_parameter:O,element:34,event_type:102}),S&&S(),_||((!j.key||!j.state||j.state?.referrer==="redirect"||b)&&f?E.push(f):j.pathname.includes("/password/reset/")&&N()?E.push("/login/?dismissWebview=true"):E.goBack())},$=Z?d.t4:"white",H=(0,c.am)(j)||F||"white"===a;return(0,y.jsx)(l.xu,{"data-test-id":"back-button",children:e?(0,y.jsx)(l.xu,{alignItems:"center",display:"flex",height:48,marginStart:"cancel"===x?-1:-2,width:48,children:(0,y.jsx)(l.hU,{accessibilityLabel:I.bt("Назад", "Back", "navigation button", undefined, true),bgColor:t,icon:x,iconColor:!a&&(!t||["white","lightGray","transparent"].includes(t))?"gray":a,onClick:z,padding:"auto"!==v?v:2,size:k})}):(0,y.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:R||H||t?"":$,width:Z&&!H?"fit-content":""}},rounding:"circle",children:(0,y.jsx)(l.hU,{accessibilityLabel:I.bt("Назад", "Back", "navigation button", undefined, true),bgColor:t||R?t:"transparent",icon:x,iconColor:!a&&(!t||["white","lightGray","transparent"].includes(t))?"gray":a,onClick:z,padding:"auto"!==v?v:2,size:k})})})}},918302:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var i=a(667294),n=a(883119),l=a(765554),r=a(94970),s=a(900957),o=a(357525),d=a(477565),u=a(785893);function c({oneBarModules:e,showIndicator:t,setProductFiltersModalIsOpen:a,showProductFilters:c=!1}){let p=(0,i.useRef)(null),g=(0,i.useRef)(null),[m,h]=(0,i.useState)(0);(0,i.useEffect)(()=>{setTimeout(()=>{g.current?.scrollTo({top:0,left:m,behavior:"smooth"})},1e3)},[m]);let y=new s.ZP;(0,i.useEffect)(()=>{let e=p.current;return e&&r.Z.addObstruction("top",e),()=>{e&&r.Z.removeObstruction("top",e)}});let _=e.map(e=>(0,o.Z)(d.Z,!0)(e));return(0,u.jsx)(n.xu,{ref:p,color:"default","data-root-margin":"search-one-bar",height:54,overflow:"hidden",children:(0,u.jsx)(n.xu,{ref:g,"data-test-id":"mweb-onebar-search",height:64,overflow:"auto",children:(0,u.jsx)(n.kC,{gap:1,maxWidth:"100%",children:_.map((e,i)=>(0,u.jsx)(l.Z,{hasProductFiltersApplied:t,impressionsFramework:y,index:i,module:e,oneBarModulesKey:null,onFilterButtonClick:()=>{c&&a?.(!0)},setLatestSelectedGuideX:h,showMWebProductFilters:c},`OneBarModule-${e.id||""}`))})})})}},48649:(e,t,a)=>{"use strict";function i({appliedFilters:e,article:t,autoCorrectionDisabled:a,filters:i,journeyDepth:n,query:l,scope:r,selectedOneBarModules:s,sourceId:o,sourceModuleId:d,topPinIds:u}){let c=[r,l,i,e,t,o,d,n,u].map(e=>e??"").join(":");return a&&(c+=":auto-correction-disabled"),s&&(c+=`:${s}`),c}a.d(t,{Z:()=>i})},827133:(e,t,a)=>{"use strict";a.d(t,{Nu:()=>l,q:()=>n,r:()=>r,z5:()=>i});let i=["board_shop_tool_module","shop_tab_upsell","story_pins_search_upsell","structured_search_bubble","user_style_story_v2","search_story_separator","search_story_landing_page_header"],n="checklist_education_feed_card",l=["#CFFFCA","#D7EDFF","#DAD4FF","#DAFFF6","#FFE2EB","#FFE4C1","#FFFD92"],r={"#d7edff":"01","#002966":"01","#cfffca":"02","#ffe0e0":"04","#800000":"04","#dafff6":"06","#fffd92":"07","#c3f9c2":"07","#005f3e":"07","#ffe4c1":"08","#842000":"08","#ffe2eb":"09","#e9e4ff":"10","#400387":"10","#dad4ff":"10","#efefef":"11"}},120790:(e,t,a)=>{"use strict";a.d(t,{Z:()=>eV});var i,n,l,r=a(538645),s=a(882368),o=a(179185),d=a(667294);a(167912);var u=a(616550),c=a(883119),p=a(78039),g=a(380222),m=a(233846),h=a(282273),y=a(113474),_=a(79646),f=a(903683),x=a(545007),S=a(754322),v=a(468318),w=a(970601),b=a(864339),k=a(967312),P=a(5112),T=a(740607),F=a(857147),I=a(755090),E=a(830073),j=a(134121),R=a(555587),A=a(595818),C=a(51753),L=a(515207);let Z=e=>({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});var M=a(158141),D=a(219308),K=a(316886),O=a(722910),N=a(94970),z=a(174646),$=a(876748),H=a(112800),B=a(677316),U=a(277302),G=a(785893);function W(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let V={baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}},Y={NONE:0,UP:1,DOWN:2};class q extends d.Component{constructor(...e){super(...e),W(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:Y.NONE,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),W(this,"onTouchStart",e=>{let{clientY:t}=e.touches[0];this.setState({startY:t,shouldAnimate:!1,scrollDirection:Y.NONE})}),W(this,"onTouchMove",e=>{let{clientY:t}=e.touches[0],{startY:a,currentDistanceFromTop:i}=this.state,{canMoveModal:n,maxDistanceFromTop:l}=this.props,r=t-a;n&&void 0!==l&&(r>0&&i>=0&&i<l&&window.scrollY<=0||r<0&&i<=l&&i>=0)&&this.setModalPosition(t)}),W(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:t,canMoveModal:a}=this.props;this.props.shouldSnapToEnds&&this.state.scrollDirection===Y.DOWN?(this.header&&N.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,H.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&this.state.scrollDirection===Y.UP&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:a,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),this.header&&N.Z.addObstruction("top",this.header),e&&(0,H.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),W(this,"handleHandleMove",e=>{let{clientY:t}=e.touches[0],{canMoveModal:a,maxDistanceFromTop:i,minDistanceFromTop:n}=this.props,{startY:l,currentDistanceFromTop:r}=this.state;a&&r<=(n||0)&&t-l>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:i,isAtTop:!1,scrollDirection:Y.NONE,shouldAnimate:!0,startY:0}))}),W(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:t,entryPoint:a,canMoveModal:i}=this.props,{currentDistanceFromTop:n,scrollDirection:l}=this.state;l===Y.NONE&&(n===e?(this.setState({canScrollOnChildren:i,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),(0,H.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,H.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_bottom`)))}),W(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:t}=this.state,{onDismiss:a,logContextEvent:i,maxDistanceFromTop:n,viewParameter:l,viewType:r}=this.props;e.stopPropagation(),a&&(i({aux_data:{commerce_data:JSON.stringify({snapped_top:0===t})},element:75,event_type:102,view_parameter:l,view_type:r}),this.setState({currentDistanceFromTop:n,startY:0,scrollDirection:Y.NONE},()=>a(e)))}),W(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:t,shouldAnimate:a,canScrollOnChildren:i}=this.state,{baseStyles:n}=V;return{...n,animation:"modalReveal 0.3s ease-out both",position:i?"absolute":"fixed",top:t>-1?t:void 0,bottom:0,width:"100vw",...e&&a?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),W(this,"setModalPosition",e=>{let{startY:t,currentDistanceFromTop:a}=this.state,{maxDistanceFromTop:i,snapToEndThreshold:n,entryPoint:l}=this.props;if(i){let r=e-t,s=Math.floor("CloseupShop"===l||"CloseUpMainPinDrawer"===l?Math.max(0,a+r):Math.min(i,Math.max(0,a+r))),o=Y.NONE;if(void 0!==n&&n>=0){let e=Math.floor(n*i),t=Math.floor((1-n)*i);r<0?o=s>t?Y.DOWN:Y.UP:r>0&&(o=s>e?Y.DOWN:Y.UP)}this.setState({startY:e,currentDistanceFromTop:s,scrollDirection:o})}})}componentDidMount(){let{isOpen:e}=this.props;e&&N.Z.pause()}componentDidUpdate(e,t){let{domainFilters:a,priceFilters:i,cropSource:n,isOpen:l,logContextEvent:r,maxDistanceFromTop:s,setHasDraggedDrawerToFullScreen:o,minDistanceFromTop:d,entryPoint:u}=this.props,{currentDistanceFromTop:c}=this.state;if(l&&!e.isOpen?N.Z.pause():!l&&e.isOpen&&N.Z.resume(),"CloseUpMainPinDrawer"===u&&s<e.maxDistanceFromTop&&c>s&&this.handleHeaderTouch(),t.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&c===(d||0)&&o&&o(!0),a&&i&&(!(0,K.ZP)(a,e.domainFilters)||!(0,K.ZP)(i,e.priceFilters))){let e="";r({event_type:13,view_parameter:"related_products"===(0,U.Z)(n)?3455:3456,view_type:72,element:11735})}}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&N.Z.removeObstruction("top",this.header),e&&N.Z.resume()}render(){let{children:e,headerChildren:t,heading:a,isAuth:i,isInHSObjLevelOneBarExp:n,isOpen:l,isRTL:r,mobileAccessibilityCloseIconLabel:s,mobileHideCloseIcon:o,noDivider:d,showHandle:u}=this.props,{headerHeight:p,canScrollOnChildren:g}=this.state,m=g||!i||n?"0":"32px 32px 0 0";return l?(0,G.jsx)($.Z,{children:(0,G.jsx)(c.xu,{"aria-label":a,role:"dialog",children:(0,G.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:m}},"data-test-id":"sliding-modal-events-handler",onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,G.jsxs)(c.iP,{accessibilityLabel:this.props.i18n.bt("Просмотрите все результаты поиска", "View all search results", "SlidingModal.Header.a11yLabel", undefined, true),onTap:this.handleHeaderTouch,children:[(0,G.jsxs)(c.Le,{top:p||0,children:[u&&(0,G.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:m}},"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",onTouchMove:this.handleHandleMove,children:O.Z}),n&&(0,G.jsxs)(c.xu,{alignItems:"center",color:"default",display:this.state.isAtTop?"flex":"none",height:60,justifyContent:"center",opacity:+!!this.state.isAtTop,position:"relative",children:[(0,G.jsx)(c.xu,{alignItems:"center",display:"flex",left:!0,marginStart:2,padding:3,position:"absolute",children:(0,G.jsx)(c.JO,{accessibilityLabel:this.props.i18n.bt("Закрыть всплывающее модальное окно", "Close sliding modal", "slidingModal.hybridSearch.closeModal", undefined, true),color:"default",icon:"arrow-down",size:"20"})}),(0,G.jsx)(c.kC,{alignItems:"stretch",flex:"grow",justifyContent:"center",children:(0,G.jsx)(c.xv,{size:"300",weight:"bold",children:this.props.i18n.bt("Похожие пины", "More like this", "slidingModal.hybridSearch.moreLikeThis", undefined, true)})})]}),!o&&(0,G.jsxs)(c.xu,{ref:e=>{this.header=e},color:"default",rounding:2,children:[(0,G.jsxs)(c.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,G.jsx)(c.kC,{alignItems:"center",justifyContent:"start",children:(0,G.jsx)(c.hU,{accessibilityLabel:s||"Close visual search results",dataTestId:"close-visual-search-results",icon:"arrow-back",iconColor:"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,G.jsx)(c.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:t}){let a=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight";return e?{[a]:38,[i]:50,marginTop:15,marginBottom:15}:{[a]:-10,[i]:50,marginTop:15,marginBottom:15}}({isRTL:r})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,G.jsx)(c.X6,{accessibilityLevel:2,align:"center",size:"400",children:a})})]}),t||null,!d&&(0,G.jsx)(c.iz,{})]})]}),(0,G.jsx)(c.xu,{overflow:g?"auto":"visible",children:e})]})})})}):null}}function X(e){let t=(0,m.ZP)(),a=(0,D.Z)(),{isRTL:i}=(0,z.B)(),n=(0,B.Z)(),{isAuth:l}=(0,s.Z)(),{checkExperiment:r}=(0,k.F)(),o=l&&r("web_search_hybrid_object_level_onebar",{dangerouslySkipActivation:!0}).anyEnabled;return(0,G.jsx)(q,{...e,i18n:t,isAuth:l,isInHSObjLevelOneBarExp:o,isRTL:i,logContextEvent:a,trackInteraction:n})}var Q=a(640935),J=a(824879);function ee({handleBackClick:e,viewParameter:t,viewType:a}){let{checkExperiment:i}=(0,k.F)(),n=(0,Q.vs)(),{isAuth:l}=(0,s.Z)(),r=l&&i("web_search_hybrid_object_level_onebar",{dangerouslySkipActivation:!0}).anyEnabled;return(0,G.jsx)(c.xu,{"data-test-id":"cancelButton",left:!0,margin:2,position:"fixed",top:!0,children:(0,G.jsx)(J.Z,{bgColor:r?"white":"transparent",color:n||r?"darkGray":"white",disableRedirect:!0,icon:"cancel",isVisualSearch:!0,onTouch:e,padding:3,size:"lg",viewParameter:t,viewType:a})})}var et=a(56063),ea=a(55077),ei=a(140042),en=a(43390),el=a(1854),er=a(19963),es=a(806476);function eo(){let[e,t]=(0,d.useState)(0),[a,i]=(0,d.useState)(0),[n,l]=(0,d.useState)(!1),[r,s]=(0,d.useState)(!1),[o,u]=(0,d.useState)(void 0);function c(){s(!1),l(!1),u(void 0)}function p(e,t){"vertical"!==t&&e.stopPropagation()}return{onCarouselTouchStart:function(e){let{clientX:a,clientY:n}=e.touches[0];t(a),i(n),c()},onCarouselTouchMove:function(t){let{clientX:i,clientY:d}=t.touches[0],c=Math.abs(i-e);Math.abs(d-a)>10&&l(!0),c>10&&s(!0),r&&n?u(e=>e||"vertical"):r?u(e=>e||"horizontal"):n?u(e=>e||"vertical"):u(void 0),p(t,o)},onCarouselTouchEnd:function(e){p(e,o),c()}}}function ed({data:e,pinId:t,surfaceType:a,viewParameter:i,viewType:n}){let l=(0,m.ZP)(),{logContextEvent:r}=(0,er.v)(),{width:s}=(0,S.Z)()||{},{onCarouselTouchStart:o,onCarouselTouchMove:d,onCarouselTouchEnd:u}=eo(),p=(e?.results||[]).find(e=>"story"===e.type),{url:g=`/pin/${t}`,text:h=""}=p?.action||{},y=l.bt("Купить похожие товары", "Shop similar", "mobileFlashlight.productUpsellTitle", undefined, true);function _(){r({component:14339,element:179,event_type:102,view_parameter:i,view_type:n})}return p&&"stl"!==a?(0,G.jsxs)(c.xu,{marginBottom:-6,children:[(0,G.jsxs)(c.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:4,children:[(0,G.jsx)(c.Tg,{href:g,onTap:({event:e})=>{e.stopPropagation(),_()},tapStyle:"compress",children:(0,G.jsx)(c.X6,{accessibilityLevel:2,size:"400",children:y})}),(0,G.jsx)(c.I_,{accessibilityLabel:h||l.bt("Показать больше", "See more", "headerModule.headerModuleActionButton.iconButton", undefined, true),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:g,icon:"arrow-forward",iconColor:"darkGray",onClick:_,size:"sm"})]}),(0,G.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},onTouchEnd:u,onTouchMove:d,onTouchStart:o,children:(0,G.jsx)(es.default,{component:14339,disableHeader:!0,story:p,storyKey:p?{type:"deprecated",data:p}:null,surface:"ShoppingDynamicHeightGrid",view:n,viewParameter:i,width:s})})]}):null}var eu=a(925091),ec=a(357525),ep=a(477565),eg=a(245406),em=a(918302);function eh({auxData:e}){let{onCarouselTouchStart:t,onCarouselTouchMove:a,onCarouselTouchEnd:i}=eo(),n=e?.metadata?.one_bar_modules,l=(0,ec.Z)(ep.Z,!0)(n);return l&&l.length>0?(0,G.jsx)(eg.v,{children:(0,G.jsx)(eu.f,{children:(0,G.jsx)(c.xu,{marginBottom:4,onTouchEnd:i,onTouchMove:a,onTouchStart:t,paddingX:2,children:(0,G.jsx)(c.iP,{onTap:({event:e})=>e.stopPropagation(),children:(0,G.jsx)(em.Z,{oneBarModules:l})})})})}):null}function ey({auxData:e,isShopTheLookFeed:t,pinId:a,searchResourceOptions:i,surfaceType:n,viewParameter:l,viewType:r}){let s=(0,m.ZP)(),{auxData:o,data:u,fetchMore:p,isAtEnd:g,isFetching:h,isLoaded:_}=(0,y.Z)({name:"VisualSearchFlashlightUnifiedResource",options:i}),f=(u?.results||[]).flatMap(e=>"pin"===e.type?e:[]),x=s.bt("Поиск по изображению", "Image search", "mobileFlashlight.organicFeedTitle", undefined, true),S=s.bt("Купить подобное", "Shop the look", "mobileFlashlight.shopTheLookFeedTitle", undefined, true);return _?(0,G.jsxs)(d.Fragment,{children:[(0,G.jsx)(eh,{auxData:o}),(0,G.jsx)(ed,{data:u,pinId:a,surfaceType:n,viewParameter:l,viewType:r}),(0,G.jsx)(c.xu,{"data-test-id":t?"shop-the-look-feed-title":"organic-feed-title",marginBottom:3,paddingX:4,children:(0,G.jsx)(c.X6,{accessibilityLevel:2,size:"400",children:t?S:x})}),(0,G.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},"data-test-id":t?"shop-the-look-feed":"organic-feed",paddingX:et.D6,children:(0,G.jsx)(el.Z,{feedItems:f,feedKey:(0,en.J)("VisualSearchFlashlightUnifiedResource",i)??"",pagination:{loadNext:p||(()=>void 0),hasNext:!g,isLoadingNext:h||!1,refetch:()=>void 0},renderFeedItem:(a,i)=>(0,G.jsx)(ea.Z,{children:(0,G.jsx)(ei.ZP,{auxData:e,componentType:0,duploQueryRef:null,pinId:a.id??"",slotIndex:i,trackingParams:a.tracking_params||void 0,trafficSource:t?"shop_feed":void 0,viewParameter:l,viewType:r})})})})]}):(0,G.jsx)(c.xH,{accessibilityLabel:s.bt("Загрузка результатов визуального поиска", "Loading visual search results", "mobileFlashlightPage.loadingSpinner", undefined, true),show:!0})}function e_({isShopTheLookFeed:e,searchResourceOptions:t,viewParameter:a,viewType:i}){let{data:n,fetchMore:l,isAtEnd:r,isFetching:s}=(0,y.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:t}:{name:"VisualLiveSearchResource",options:t});return(0,G.jsx)(c.xu,{color:"default",paddingX:et.D6,children:(0,G.jsx)(el.Z,{feedItems:n?.results??[],feedKey:(0,en.J)("VisualLiveSearchResource",t)??"",pagination:{loadNext:l||(()=>void 0),hasNext:!r,isLoadingNext:s||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,G.jsx)(ea.Z,{children:(0,G.jsx)(ei.ZP,{componentType:0,duploQueryRef:null,pinId:e.id??"",slotIndex:t,trackingParams:e.tracking_params,trafficSource:"flashlight",viewParameter:a,viewType:i})})})})}var ef=a(384536);function ex(){return Math.min(ef.g6,window.innerWidth)}function eS(e,t){return Math.floor(ex()/t*e)}var ev=a(407683),ew=a(260542),eb=a(73473),ek=a(17747),eP=a(940330),eT=a(152212);function eF({pinDominantColor:e,url:t,closeupImageWidth:a,closeupImageHeight:i}){let n=(0,m.ZP)();return(0,G.jsx)(eT.Z,{alt:n.bt("Изображение пина", "Pin image", "flashlight.cropper.closeupImage", undefined, true),color:e,isFlashlightPage:!0,naturalHeight:i,naturalWidth:a,placeholder:t,pwtElementTimingId:"cropper-closeup-image",showSpinner:!1,src:t})}let eI=e=>{let{alt:t,src:a,top:i,left:n}=e;return(0,G.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:i,left:n}},height:24,position:"absolute",width:24,children:(0,G.jsx)(c.Ee,{alt:t,color:"transparent",naturalHeight:24,naturalWidth:24,src:a})})},eE={backgroundColor:"#000000",opacity:"0.4"};function ej({closeupImageUrl:e,closeupImageDims:t,cropArea:{x:a,y:i,w:n,h:l},disableBorder:r,disableHandles:s,handleBackClick:o,onTouchEnd:d,onTouchMove:u,onTouchStart:p,pinDominantColor:g,showBackButton:h,viewParameter:y}){let _=(0,m.ZP)(),{closeupImageWidth:f,closeupImageHeight:x}=t,S=Math.floor(x*i),v=Math.floor(f*a),w=Math.floor(x*l),b=Math.floor(f*n),k=v+b,P=S+w;return(0,G.jsxs)(c.xu,{"data-test-id":"cropper-container",onTouchEnd:d,onTouchMove:u,onTouchStart:p,position:"relative",children:[(0,G.jsx)(eF,{closeupImageHeight:x,closeupImageWidth:f,pinDominantColor:g,url:e??""}),(0,G.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:eE},height:S,left:!0,position:"absolute",top:!0,width:"100%"}),(0,G.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...eE,top:S}},height:w,left:!0,position:"absolute",width:v}),(0,G.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...eE,top:S,left:k}},height:w,position:"absolute",right:!0}),(0,G.jsx)(c.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...eE,top:P}},left:!0,position:"absolute",width:"100%"}),h&&(0,G.jsx)(ee,{handleBackClick:o,viewParameter:y,viewType:427}),!s&&(0,G.jsxs)(c.xu,{"data-test-id":"CropperHandles",children:[(0,G.jsx)(eI,{alt:_.bt("Левая верхняя точка кадрирующей рамки", "Top left cropper handle", "flashlight.cropper.topLeftHandle", undefined, true),left:v-9,src:ek,top:S-9}),(0,G.jsx)(eI,{alt:_.bt("Правая верхняя точка кадрирующей рамки", "Top right cropper handle", "flashlight.cropper.topRightHandle", undefined, true),left:k-15,src:eP,top:S-9}),(0,G.jsx)(eI,{alt:_.bt("Левая нижняя точка кадрирующей рамки", "Bottom left cropper handle", "flashlight.cropper.bottomLeftHandle", undefined, true),left:v-9,src:ew,top:P-15}),(0,G.jsx)(eI,{alt:_.bt("Правая нижняя точка кадрирующей рамки", "Bottom right cropper handle", "flashlight.Cropper.BottomLeftHandle", undefined, true),left:k-15,src:eb,top:P-15})]}),(0,G.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:S-2,left:v-2,border:r?void 0:"2px solid #ffffff"}},"data-test-id":"CroppedArea",height:w+4,position:"absolute",rounding:2,width:b+4})]})}var eR=a(850610);function eA({auxData:e,onClick:t,shouldLogDotRender:a,showNoHalo:i,style:n,viewParameter:l,x:r,y:s}){let o=(0,m.ZP)(),d=(0,D.Z)();return(0,I.Z)(()=>{a&&d({aux_data:e,element:1221,event_type:120,view_parameter:l,view_type:72})}),(0,G.jsx)("div",{"aria-label":o.bt("Выберите определенный элемент на изображении", "Select a specific item on image", "dot.accessibilityLabel", undefined, true),"data-test-id":"dot",onClick:t,onKeyPress:t,role:"button",style:{position:"absolute",top:s-16,left:r-16,outline:"none",...n},tabIndex:0,children:(0,G.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:i?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:t?"pointer":"default"}},children:(0,G.jsx)(c.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}},display:"flex",justifyContent:"center",padding:0,position:"absolute"})})})}var eC=a(718222);let eL="flashlightDotPop",eZ=(0,eC.Ll)([`
  ${eL} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]),eM=e=>{let t=parseFloat((.1*e).toFixed(2));return{animation:`${eL} 0.3s ease-out ${t}s both`}};function eD({closeupImageTop:e,imageHeight:t,imageTop:a,imageWidth:i,onDotTap:n,pinId:l,pinImageSignature:r,setCropArea:s,shouldLogDotRender:o,showNoHalo:u,viewParameter:c,visualObjects:p,visualObjectToHide:g}){let m=(0,D.Z)();return(0,G.jsxs)(d.Fragment,{children:[(0,G.jsx)(w.Z,{unsafeCSS:eZ}),p.map((d,h)=>{if(h===g)return null;let{x:y=0,y:_=0,w:f=0,h:x=0}=d,S={x:y,y:_,h:x,w:f},v=(0,eR.Z)({cropArea:{x:y,y:_,w:f,h:x},scaledWidth:i,scaledHeight:t}),w=Math.floor(v.x+v.w/2),b=Math.floor(v.y+a+v.h/2),k=eM(h),P={pin_id:l,image_signature:r,visual_objects:JSON.stringify([S]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,G.jsx)(eA,{auxData:P,onClick:function(){m({aux_data:P,element:1221,event_type:102,view_parameter:c,view_type:72}),n({cropArea:S,cropSource:4,visualObjects:p}),s?.(S)},shouldLogDotRender:o,showNoHalo:u,style:k,viewParameter:c,x:w,y:b-e},JSON.stringify(S))})]})}let eK={OUTSIDE:0,INSIDE:1,LEFT_CROPPER:2,RIGHT_CROPPER:3,TOP_CROPPER:4,BOTTOM_CROPPER:5,TOP_LEFT_HANDLE:6,TOP_RIGHT_HANDLE:7,BOTTOM_LEFT_HANDLE:8,BOTTOM_RIGHT_HANDLE:9,NONE:10};function eO({closeupImageUrl:e,closeupImageDims:t,cropArea:a,handleBackClick:i,handleChangeCloseupImageTop:n,handleCropperChange:l,headerHeight:r,pinDominantColor:o,pinId:u,pinImageSignature:p,showBackButton:g,viewParameter:m,visualObjects:h,visualObjectToHide:y}){let _=(0,D.Z)(),{isAuth:f}=(0,s.Z)(),x=(0,d.useRef)(null),[S,v]=(0,d.useState)(0),[w,b]=(0,d.useState)(0),[k,P]=(0,d.useState)(eK.NONE),[T,F]=(0,d.useState)(a),{current:I}=(0,ev.Z)(),{x:E,y:j,w:R,h:A}=T,{closeupImageTop:C,closeupImageMinTop:L,closeupImageWidth:Z,closeupImageHeight:M,minCropperWidthRatio:K,minCropperHeightRatio:O}=t,N=r||0,z=(e,t)=>{let a=t-C,i=e-(x.current?x.current.getBoundingClientRect().left:0),n=M*j,l=M*(j+A),r=Z*E,s=Z*(R+E);if(a>n+12&&a<l-12&&i>r+12&&i<s-12)return eK.INSIDE;if(i<=r+12&&i>=r-12&&a>=n+15&&a<=l-15)return eK.LEFT_CROPPER;if(i<=s+12&&i>=s-12&&a>=n+15&&a<=l-15)return eK.RIGHT_CROPPER;if(i<=s-15&&i>=r+15&&a>=n-12&&a<=n+12)return eK.TOP_CROPPER;if(i<=s-15&&i>=r+15&&a>=l-12&&a<=l+12)return eK.BOTTOM_CROPPER;else if(i<=r-9+24&&i>=r-12&&a>=n-12&&a<=n+24-9)return eK.TOP_LEFT_HANDLE;else if(i<=s+12&&i>=s-15&&a>=n-12&&a<=n+24-9)return eK.TOP_RIGHT_HANDLE;else if(i<=r-9+24&&i>=r-12&&a>=l-15&&a<=l+12)return eK.BOTTOM_LEFT_HANDLE;else if(i<=s+12&&i>=s-15&&a>=l-15&&a<=l+12)return eK.BOTTOM_RIGHT_HANDLE;else return eK.OUTSIDE};return(0,G.jsx)(c.kC,{justifyContent:"center",width:"100vw",children:(0,G.jsxs)(c.xu,{ref:x,dangerouslySetInlineStyle:{__style:{top:C,touchAction:"none"}},maxWidth:ef.g6,overflow:"hidden",position:"fixed",width:"100%",children:[(0,G.jsx)(ej,{closeupImageDims:t,closeupImageUrl:e,cropArea:T,handleBackClick:i,onTouchEnd:()=>{[eK.NONE,eK.OUTSIDE].includes(k)||(_({event_type:k===eK.INSIDE?7603:7604,view_parameter:m,view_type:72}),l({cropArea:T,cropSource:6,visualObjects:h}))},onTouchMove:e=>{let{clientX:t,clientY:a}=e.touches[0];if(v(t),b(a),k===eK.NONE&&P(z(t,a)),null!=K&&null!=O&&null!=L){let e=a-w,i=(t-S)/Z,l=e/M,r=Math.min(E+R-K,Math.max(0,E+i)),s=R+(E-r),o=Math.min(j+A-O,Math.max(0,j+l)),d=A+(j-o),u=Math.min(1-E,Math.max(K,R+i)),c=Math.min(1-j,Math.max(O,A+l));switch(k){case eK.OUTSIDE:n(Math.floor(Math.max(L,Math.min(N,C+e))));break;case eK.INSIDE:F(e=>({...e,x:Math.max(0,Math.min(1-R,E+i)),y:Math.max(0,Math.min(1-A,j+l))}));break;case eK.LEFT_CROPPER:F(e=>({...e,x:r,w:s}));break;case eK.RIGHT_CROPPER:F(e=>({...e,w:u}));break;case eK.TOP_CROPPER:F(e=>({...e,y:o,h:d}));break;case eK.BOTTOM_CROPPER:F(e=>({...e,h:c}));break;case eK.TOP_LEFT_HANDLE:F({x:r,w:s,y:o,h:d});break;case eK.TOP_RIGHT_HANDLE:F(e=>({...e,w:u,y:o,h:d}));break;case eK.BOTTOM_LEFT_HANDLE:F(e=>({...e,h:c,x:r,w:s}));break;case eK.BOTTOM_RIGHT_HANDLE:F(e=>({...e,h:c,w:u}))}}},onTouchStart:e=>{let{clientX:t,clientY:a}=e.touches[0];v(t),b(a),P(eK.NONE)},pinDominantColor:o,showBackButton:g,viewParameter:m}),!!h.length&&0!==M&&0!==Z&&(0,G.jsx)(c.xu,{"data-test-id":"FlashlightDots",children:(0,G.jsx)(eD,{closeupImageTop:C,imageHeight:M,imageTop:C,imageWidth:Z,onDotTap:l,pinId:u,pinImageSignature:p,setCropArea:F,shouldLogDotRender:!I,showNoHalo:f,viewParameter:m,visualObjects:h,visualObjectToHide:y})})]})})}let eN=`
  html, body {
    overscroll-behavior: none;
  }
`,ez=void 0!==i?i:i=a(41723);function e$({pinKey:e}){let t=(0,m.ZP)(),a=(0,x.I0)(),i=(0,u.k6)(),{previous:n}=(0,v.Hv)(),l=(0,u.TH)(),{isAuth:o}=(0,s.Z)(),{width:g}=(0,S.Z)()||{},h=(0,r.ZP)(),y=(0,p.Z)(ez,e),{checkExperiment:_}=(0,k.F)(),f=o&&_("web_search_hybrid_object_level_onebar",{dangerouslySkipActivation:!0}).anyEnabled,D=(0,F.mB)(l.search),{cropSource:K,filters:O,hybrid_search_param:N,journey_depth:z,search_query:$,source_module_id:H,x:B,y:U,h:W,w:V,surfaceType:Y,requestParams:q}=D,Q=Y||"flashlight",J=!o&&(0,T.x9)(h)||void 0,[et,ea]=(0,d.useState)(()=>{var e,t,a;let i,n,l=function({headerHeight:e,pinImageHeight:t,pinImageWidth:a}){let i=0,n=0,l=0;t&&a&&(i=ex(),n=eS(t,a),l=Math.min(Math.floor(.6*window.innerHeight),eS(t,a)));return{closeupImageWidth:i,closeupImageHeight:n,closeupImageMinTop:l-n,closeupImageTop:e||0,minCropperWidthRatio:i?50/i:0,minCropperHeightRatio:n?50/n:0,modalTop:l}}({headerHeight:J,pinImageHeight:y.imageSpec_736x?.height,pinImageWidth:y.imageSpec_736x?.width}),{closeupImageHeight:r,modalTop:s}=l,o=(e=Number(W),t=Number(U),a=J||0,i=e?Number(e):.4,n=t?Number(t):.1,r>0&&s>0&&(e||(i=(s-2*s*.1-a)/r),t||(n=.1*s/r)),{h:i,y:n});return{closeupImageDims:l,x:B?Number(B):.1,w:V?Number(V):.8,y:o.y,h:o.h}}),[ei,en]=(0,d.useState)(()=>{let e=(0,j.Z)(Number(K));return e||(B&&U&&W&&V?6:5)}),el={x:et.x,y:et.y,w:et.w,h:et.h},er="stl"===Q&&4===ei,es=function({cropSource:e,surfaceType:t,isProductPage:a,queryEntrypoint:i}){return i||("stl"===t&&4===e?"shop_the_look_module":a?"feed_module":null)}({cropSource:ei,isProductPage:!1,surfaceType:Q,queryEntrypoint:D.entrypoint}),eo={pin_id:y?.entityId,crop:el,crop_source:ei,is_shopping:er,entry_source:er?"shopping":"flashlight",entrypoint:es,filters:O,hybrid_search_param:N,journey_depth:parseInt(z,10)||void 0,search_query:$,source_module_id:H},ed=(y.visualObjects??[]).filter(e=>e.isStela).map(A.Z),[eu,ec]=(0,d.useState)((0,E.Z)(ed,el)),{isCropAreaOnDotArea:ep,indexToHide:eg}=eu,{closeupImageWidth:em,modalTop:eh}=et.closeupImageDims,ef=y?.imageSpec_736x?.url??"",ev=!g||g-60<em&&o,ew=!ev&&o,eb=o?60*!f:J,ek=t.bt("Визуальный поиск", "Visual search", "Visual search results", undefined, true),{auxData:eP,viewType:eT,viewParameter:eF}=function({cropSource:e,isAuth:t,isCropAreaOnDotArea:a,isProductPage:i,surfaceType:n}){let l=t||"stl"===n,r=4===e||a,s=i?"product":"stl"===n?r?"product":"organic":t?r?"unified":"organic":"organic";return{auxData:(()=>{let e=e=>({commerce_data:JSON.stringify({is_product_only_feed:e})});return"product"===s?e(!0):"unified"===s||l?e(!1):void 0})(),viewType:"product"===s?427:72,viewParameter:"organic"===s?3050:3462}}({cropSource:ei,isAuth:o,isCropAreaOnDotArea:ep,isProductPage:!1,surfaceType:Q}),eI=e=>a((0,M.By)(e)),eE=e=>a(Z(e));function ej(){if(0===n.length)return void i.replace(`/pin/${y.entityId}/`);i.goBack()}return((0,I.Z)(()=>{eE(ei)}),0===eh)?null:(0,G.jsxs)(d.Fragment,{children:[(0,G.jsx)(w.Z,{unsafeCSS:eN}),(0,G.jsx)(C.Z,{auxData:eP,viewParameter:eF,viewType:eT,children:(0,G.jsx)(P.Z,{view:eT,children:(0,G.jsxs)(b.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,G.jsx)(L.Z,{text:t.bt("Страница визуального поиска", "Visual Search Page", "flashlight.accessibilityhiddenheading.fullpage", undefined, true)}),(0,G.jsx)(c.xu,{color:"dark",height:"100vh",width:"100vw"}),(0,G.jsx)(eO,{closeupImageDims:et.closeupImageDims,closeupImageUrl:ef,cropArea:el,handleBackClick:ej,handleChangeCloseupImageTop:function(e){ea(t=>({...t,closeupImageDims:{...t.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:t,visualObjects:a}){eE(t),eI(y.entityId),ec((0,E.Z)(a,e)),en(t),ea(t=>({...t,...e})),i.replace((0,R.Z)({cropArea:e,cropSource:t,isProductPage:!1,pinId:y.entityId,requestParams:q,surfaceType:Q}))},headerHeight:J,pinDominantColor:y.dominantColor||"#efefef",pinId:y.entityId,pinImageSignature:y.imageSignature,showBackButton:ev,viewParameter:eF,visualObjects:ed,visualObjectToHide:eg}),ew&&(0,G.jsx)(ee,{handleBackClick:ej,viewParameter:eF,viewType:eT}),(0,G.jsx)(X,{canMoveModal:!0,cropSource:ei,entryPoint:"flashlight",headerHeight:J,heading:ek,isOpen:!0,location:l,maxDistanceFromTop:eh||0,minDistanceFromTop:eb,mobileAccessibilityCloseIconLabel:t.bt("Скрыть результаты визуального поиска", "Close visual search results", "close visual search results and go back to pin", undefined, true),mobileHideCloseIcon:o,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:ej,pinId:y.entityId,shouldSnapToEnds:!0,showHandle:o,snapToEndThreshold:.3,viewParameter:eF,viewType:eT,children:o?(0,G.jsx)(ey,{auxData:eP,isShopTheLookFeed:er,pinId:y.entityId,searchResourceOptions:eo,surfaceType:Q,viewParameter:eF,viewType:eT}):(0,G.jsx)(e_,{isShopTheLookFeed:er,searchResourceOptions:eo,viewParameter:eF,viewType:eT})})]})})})]})}let eH=void 0!==n?n:n=a(844593),eB=void 0!==l?l:l=a(287221);function eU(){let e=(0,u.$B)(),{pinId:t}=(0,_.Z)(e.params.id||""),a=(0,g.Z)({strategy:"LEGACY",query:eB,variables:{pinId:t},useGetLegacyData:({pinId:e})=>{let{data:t}=(0,y.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),a=(0,f.S6)()(e);return t??a}}),i=a?.v3GetPinQuery?.__typename==="V3GetPin"?a.v3GetPinQuery.data:null,n=(0,p.Z)(eH,i);return n?(0,G.jsx)(e$,{pinKey:n}):null}function eG(){let e=(0,m.ZP)();return(0,G.jsx)(h.Z,{measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,G.jsx)(d.Suspense,{fallback:(0,G.jsx)(c.xH,{accessibilityLabel:e.bt("Загрузка данных о пине", "Loading Pin data", "mobileFlashlightPage.loadingPinData", undefined, true),show:!0}),children:(0,G.jsx)(eU,{})})})}var eW=a(766948);let eV=function(){let e=(0,r.HG)(),t=(0,s.Z)();return e?t.isAuth?(0,G.jsx)(o.Z,{}):(0,G.jsx)(eW.Z,{}):(0,G.jsx)(eG,{})}},118244:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>r});var i=a(667294),n=a(276162);let l=(0,i.createContext)(void 0);(0,n.kr)();let r=l},57797:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(667294);a(276162);var n=a(118244);function l({children:e,metricName:t}){return(0,i.use)(n.ZP),e}},742961:(e,t,a)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/pin/[id]/visual-search",function(){return a(120790).Z}])},260542:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_left-d4d98c77.svg"},73473:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_right-ccae4564.svg"},17747:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_left-68937c82.svg"},940330:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_right-4d7ae997.svg"}},e=>{var t=t=>e(e.s=t);e.O(0,[97270,83119,57201,75114,30811,13474,51508,78039,80347,48609,6881,68394,65575,34623,96695,75389,69183,9654,32649,6476,57586,90481,95815],()=>t(742961)),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search.ru_RU-4a673e3e2611bdd4.mjs.map